var Ks=Object.defineProperty;var fs=et=>{throw TypeError(et)};var $s=(et,o,V)=>o in et?Ks(et,o,{enumerable:!0,configurable:!0,writable:!0,value:V}):et[o]=V;var $t=(et,o,V)=>$s(et,typeof o!="symbol"?o+"":o,V),Fe=(et,o,V)=>o.has(et)||fs("Cannot "+V);var t=(et,o,V)=>(Fe(et,o,"read from private field"),V?V.call(et):o.get(et)),tt=(et,o,V)=>o.has(et)?fs("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(et):o.set(et,V),rt=(et,o,V,a)=>(Fe(et,o,"write to private field"),a?a.call(et,V):o.set(et,V),V),X=(et,o,V)=>(Fe(et,o,"access private method"),V);var he=(et,o,V,a)=>({set _(y){rt(et,o,y,V)},get _(){return t(et,o,a)}});import{r as requireReactDom,g as getAugmentedNamespace,u as useStore,a as reactExports,j as jsxRuntimeExports,U as UI_TEXT,L as LiquidButton,I as Icons,S as SERVICES,E as ENGAGEMENT_MODELS,P as PORTFOLIO,B as BLOG_POSTS,s as settings,p as performanceMode}from"./index-NQoxc4XA.js";var reactDomExports=requireReactDom();function commonjsRequire(et){throw new Error('Could not dynamically require "'+et+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(o,V){module.exports=o.pdfjsLib=V()})(globalThis,()=>(()=>{var __webpack_modules__=[,((et,o)=>{var Vt;Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationReplyType=o.AnnotationPrefix=o.AnnotationMode=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=R,o.bytesToString=ut,o.createValidAbsoluteUrl=J,o.getModificationDate=St,o.getUuid=Nt,o.getVerbosityLevel=H,o.info=$,o.isArrayBuffer=K,o.isArrayEqual=Ct,o.isNodeJS=void 0,o.normalizeUnicode=Mt,o.objectFromMap=yt,o.objectSize=vt,o.setVerbosityLevel=at,o.shadow=S,o.string32=gt,o.stringToBytes=pt,o.stringToPDFString=ft,o.stringToUTF8String=At,o.unreachable=ct,o.utf8StringToString=_t,o.warn=U;const V=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=V;const a=[1,0,0,1,0,0];o.IDENTITY_MATRIX=a;const y=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=y;const Y=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=Y;const z=1.35;o.LINE_FACTOR=z;const nt=.35;o.LINE_DESCENT_FACTOR=nt;const O=nt/z;o.BASELINE_FACTOR=O;const C={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=C;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=f;const N="pdfjs_internal_editor_";o.AnnotationEditorPrefix=N;const j={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};o.AnnotationEditorType=j;const v={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};o.AnnotationEditorParamsType=v;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=m;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=E;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=p;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=d;const x={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=x;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=w;const b={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=b;const n={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=n;const h={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=h;const i={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=i;const l={O:"PageOpen",C:"PageClose"};o.PageActionEventType=l;const c={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=c;const L={NONE:0,BINARY:1};o.CMapCompressionType=L;const r={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=r;const _={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=_;let F=c.WARNINGS;function at(xt){Number.isInteger(xt)&&(F=xt)}function H(){return F}function $(xt){F>=c.INFOS&&console.log("Info: ".concat(xt))}function U(xt){F>=c.WARNINGS&&console.log("Warning: ".concat(xt))}function ct(xt){throw new Error(xt)}function R(xt,it){xt||ct(it)}function B(xt){switch(xt==null?void 0:xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function J(xt,it=null,lt=null){if(!xt)return null;try{if(lt&&typeof xt=="string"){if(lt.addDefaultProtocol&&xt.startsWith("www.")){const Xt=xt.match(/\./g);(Xt==null?void 0:Xt.length)>=2&&(xt="http://".concat(xt))}if(lt.tryConvertEncoding)try{xt=At(xt)}catch(Xt){}}const Pt=it?new URL(xt,it):new URL(xt);if(B(Pt))return Pt}catch(Pt){}return null}function S(xt,it,lt,Pt=!1){return Object.defineProperty(xt,it,{value:lt,enumerable:!Pt,configurable:!0,writable:!1}),lt}const e=(function(){function it(lt,Pt){this.constructor===it&&ct("Cannot initialize BaseException."),this.message=lt,this.name=Pt}return it.prototype=new Error,it.constructor=it,it})();o.BaseException=e;class s extends e{constructor(it,lt){super(it,"PasswordException"),this.code=lt}}o.PasswordException=s;class u extends e{constructor(it,lt){super(it,"UnknownErrorException"),this.details=lt}}o.UnknownErrorException=u;class P extends e{constructor(it){super(it,"InvalidPDFException")}}o.InvalidPDFException=P;class k extends e{constructor(it){super(it,"MissingPDFException")}}o.MissingPDFException=k;class M extends e{constructor(it,lt){super(it,"UnexpectedResponseException"),this.status=lt}}o.UnexpectedResponseException=M;class G extends e{constructor(it){super(it,"FormatError")}}o.FormatError=G;class ot extends e{constructor(it){super(it,"AbortException")}}o.AbortException=ot;function ut(xt){(typeof xt!="object"||(xt==null?void 0:xt.length)===void 0)&&ct("Invalid argument for bytesToString");const it=xt.length,lt=8192;if(it<lt)return String.fromCharCode.apply(null,xt);const Pt=[];for(let Xt=0;Xt<it;Xt+=lt){const Gt=Math.min(Xt+lt,it),I=xt.subarray(Xt,Gt);Pt.push(String.fromCharCode.apply(null,I))}return Pt.join("")}function pt(xt){typeof xt!="string"&&ct("Invalid argument for stringToBytes");const it=xt.length,lt=new Uint8Array(it);for(let Pt=0;Pt<it;++Pt)lt[Pt]=xt.charCodeAt(Pt)&255;return lt}function gt(xt){return String.fromCharCode(xt>>24&255,xt>>16&255,xt>>8&255,xt&255)}function vt(xt){return Object.keys(xt).length}function yt(xt){const it=Object.create(null);for(const[lt,Pt]of xt)it[lt]=Pt;return it}function Q(){const xt=new Uint8Array(4);return xt[0]=1,new Uint32Array(xt.buffer,0,1)[0]===1}function st(){try{return new Function(""),!0}catch(xt){return!1}}class g{static get isLittleEndian(){return S(this,"isLittleEndian",Q())}static get isEvalSupported(){return S(this,"isEvalSupported",st())}static get isOffscreenCanvasSupported(){return S(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?S(this,"platform",{isWin:!1,isMac:!1}):S(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var it,lt;return S(this,"isCSSRoundSupported",(lt=(it=globalThis.CSS)==null?void 0:it.supports)==null?void 0:lt.call(it,"width: round(1.5px, 1px)"))}}o.FeatureTest=g;const D=[...Array(256).keys()].map(xt=>xt.toString(16).padStart(2,"0"));class q{static makeHexColor(it,lt,Pt){return"#".concat(D[it]).concat(D[lt]).concat(D[Pt])}static scaleMinMax(it,lt){let Pt;it[0]?(it[0]<0&&(Pt=lt[0],lt[0]=lt[1],lt[1]=Pt),lt[0]*=it[0],lt[1]*=it[0],it[3]<0&&(Pt=lt[2],lt[2]=lt[3],lt[3]=Pt),lt[2]*=it[3],lt[3]*=it[3]):(Pt=lt[0],lt[0]=lt[2],lt[2]=Pt,Pt=lt[1],lt[1]=lt[3],lt[3]=Pt,it[1]<0&&(Pt=lt[2],lt[2]=lt[3],lt[3]=Pt),lt[2]*=it[1],lt[3]*=it[1],it[2]<0&&(Pt=lt[0],lt[0]=lt[1],lt[1]=Pt),lt[0]*=it[2],lt[1]*=it[2]),lt[0]+=it[4],lt[1]+=it[4],lt[2]+=it[5],lt[3]+=it[5]}static transform(it,lt){return[it[0]*lt[0]+it[2]*lt[1],it[1]*lt[0]+it[3]*lt[1],it[0]*lt[2]+it[2]*lt[3],it[1]*lt[2]+it[3]*lt[3],it[0]*lt[4]+it[2]*lt[5]+it[4],it[1]*lt[4]+it[3]*lt[5]+it[5]]}static applyTransform(it,lt){const Pt=it[0]*lt[0]+it[1]*lt[2]+lt[4],Xt=it[0]*lt[1]+it[1]*lt[3]+lt[5];return[Pt,Xt]}static applyInverseTransform(it,lt){const Pt=lt[0]*lt[3]-lt[1]*lt[2],Xt=(it[0]*lt[3]-it[1]*lt[2]+lt[2]*lt[5]-lt[4]*lt[3])/Pt,Gt=(-it[0]*lt[1]+it[1]*lt[0]+lt[4]*lt[1]-lt[5]*lt[0])/Pt;return[Xt,Gt]}static getAxialAlignedBoundingBox(it,lt){const Pt=this.applyTransform(it,lt),Xt=this.applyTransform(it.slice(2,4),lt),Gt=this.applyTransform([it[0],it[3]],lt),I=this.applyTransform([it[2],it[1]],lt);return[Math.min(Pt[0],Xt[0],Gt[0],I[0]),Math.min(Pt[1],Xt[1],Gt[1],I[1]),Math.max(Pt[0],Xt[0],Gt[0],I[0]),Math.max(Pt[1],Xt[1],Gt[1],I[1])]}static inverseTransform(it){const lt=it[0]*it[3]-it[1]*it[2];return[it[3]/lt,-it[1]/lt,-it[2]/lt,it[0]/lt,(it[2]*it[5]-it[4]*it[3])/lt,(it[4]*it[1]-it[5]*it[0])/lt]}static singularValueDecompose2dScale(it){const lt=[it[0],it[2],it[1],it[3]],Pt=it[0]*lt[0]+it[1]*lt[2],Xt=it[0]*lt[1]+it[1]*lt[3],Gt=it[2]*lt[0]+it[3]*lt[2],I=it[2]*lt[1]+it[3]*lt[3],mt=(Pt+I)/2,wt=Math.sqrt((Pt+I)**2-4*(Pt*I-Gt*Xt))/2,Dt=mt+wt||1,jt=mt-wt||1;return[Math.sqrt(Dt),Math.sqrt(jt)]}static normalizeRect(it){const lt=it.slice(0);return it[0]>it[2]&&(lt[0]=it[2],lt[2]=it[0]),it[1]>it[3]&&(lt[1]=it[3],lt[3]=it[1]),lt}static intersect(it,lt){const Pt=Math.max(Math.min(it[0],it[2]),Math.min(lt[0],lt[2])),Xt=Math.min(Math.max(it[0],it[2]),Math.max(lt[0],lt[2]));if(Pt>Xt)return null;const Gt=Math.max(Math.min(it[1],it[3]),Math.min(lt[1],lt[3])),I=Math.min(Math.max(it[1],it[3]),Math.max(lt[1],lt[3]));return Gt>I?null:[Pt,Gt,Xt,I]}static bezierBoundingBox(it,lt,Pt,Xt,Gt,I,mt,wt){const Dt=[],jt=[[],[]];let Rt,T,A,W,ht,dt,bt,Et;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(T=6*it-12*Pt+6*Gt,Rt=-3*it+9*Pt-9*Gt+3*mt,A=3*Pt-3*it):(T=6*lt-12*Xt+6*I,Rt=-3*lt+9*Xt-9*I+3*wt,A=3*Xt-3*lt),Math.abs(Rt)<1e-12){if(Math.abs(T)<1e-12)continue;W=-A/T,0<W&&W<1&&Dt.push(W);continue}bt=T*T-4*A*Rt,Et=Math.sqrt(bt),!(bt<0)&&(ht=(-T+Et)/(2*Rt),0<ht&&ht<1&&Dt.push(ht),dt=(-T-Et)/(2*Rt),0<dt&&dt<1&&Dt.push(dt))}let It=Dt.length,kt;const Tt=It;for(;It--;)W=Dt[It],kt=1-W,jt[0][It]=kt*kt*kt*it+3*kt*kt*W*Pt+3*kt*W*W*Gt+W*W*W*mt,jt[1][It]=kt*kt*kt*lt+3*kt*kt*W*Xt+3*kt*W*W*I+W*W*W*wt;return jt[0][Tt]=it,jt[1][Tt]=lt,jt[0][Tt+1]=mt,jt[1][Tt+1]=wt,jt[0].length=jt[1].length=Tt+2,[Math.min(...jt[0]),Math.min(...jt[1]),Math.max(...jt[0]),Math.max(...jt[1])]}}o.Util=q;const Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ft(xt){if(xt[0]>="ï"){let lt;if(xt[0]==="þ"&&xt[1]==="ÿ"?lt="utf-16be":xt[0]==="ÿ"&&xt[1]==="þ"?lt="utf-16le":xt[0]==="ï"&&xt[1]==="»"&&xt[2]==="¿"&&(lt="utf-8"),lt)try{const Pt=new TextDecoder(lt,{fatal:!0}),Xt=pt(xt);return Pt.decode(Xt)}catch(Pt){U('stringToPDFString: "'.concat(Pt,'".'))}}const it=[];for(let lt=0,Pt=xt.length;lt<Pt;lt++){const Xt=Z[xt.charCodeAt(lt)];it.push(Xt?String.fromCharCode(Xt):xt.charAt(lt))}return it.join("")}function At(xt){return decodeURIComponent(escape(xt))}function _t(xt){return unescape(encodeURIComponent(xt))}function K(xt){return typeof xt=="object"&&(xt==null?void 0:xt.byteLength)!==void 0}function Ct(xt,it){if(xt.length!==it.length)return!1;for(let lt=0,Pt=xt.length;lt<Pt;lt++)if(xt[lt]!==it[lt])return!1;return!0}function St(xt=new Date){return[xt.getUTCFullYear().toString(),(xt.getUTCMonth()+1).toString().padStart(2,"0"),xt.getUTCDate().toString().padStart(2,"0"),xt.getUTCHours().toString().padStart(2,"0"),xt.getUTCMinutes().toString().padStart(2,"0"),xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){tt(this,Vt,!1);this.promise=new Promise((it,lt)=>{this.resolve=Pt=>{rt(this,Vt,!0),it(Pt)},this.reject=Pt=>{rt(this,Vt,!0),lt(Pt)}})}get settled(){return t(this,Vt)}}Vt=new WeakMap,o.PromiseCapability=Ut;let Ot=null,qt=null;function Mt(xt){return Ot||(Ot=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qt=new Map([["ﬅ","ſt"]])),xt.replaceAll(Ot,(it,lt,Pt)=>lt?lt.normalize("NFKC"):qt.get(Pt))}function Nt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(xt);else for(let it=0;it<32;it++)xt[it]=Math.floor(Math.random()*255);return ut(xt)}const Wt="pdfjs_internal_id_";o.AnnotationPrefix=Wt}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var et,V,a,y,re,xe,nt,O,C,f,N,j,v,m,E,ve,d,x,De,b,n;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(i){var St,Ut;if(typeof i=="string"||i instanceof URL?i={url:i}:(0,_util.isArrayBuffer)(i)&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:c}=l,L=i.url?getUrlProp(i.url):null,r=i.data?getDataProp(i.data):null,_=i.httpHeaders||null,F=i.withCredentials===!0,at=(St=i.password)!=null?St:null,H=i.range instanceof PDFDataRangeTransport?i.range:null,$=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let U=i.worker instanceof PDFWorker?i.worker:null;const ct=i.verbosity,R=typeof i.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(i.docBaseUrl)?i.docBaseUrl:null,B=typeof i.cMapUrl=="string"?i.cMapUrl:null,J=i.cMapPacked!==!1,S=i.CMapReaderFactory||DefaultCMapReaderFactory,e=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,s=i.StandardFontDataFactory||DefaultStandardFontDataFactory,u=i.stopAtErrors!==!0,P=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,M=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!_util.isNodeJS,G=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,ot=typeof i.disableFontFace=="boolean"?i.disableFontFace:_util.isNodeJS,ut=i.fontExtraProperties===!0,pt=i.enableXfa===!0,gt=i.ownerDocument||globalThis.document,vt=i.disableRange===!0,yt=i.disableStream===!0,Q=i.disableAutoFetch===!0,st=i.pdfBug===!0,g=H?H.length:(Ut=i.length)!=null?Ut:NaN,D=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!_util.isNodeJS&&!ot,q=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:S===_display_utils.DOMCMapReaderFactory&&s===_display_utils.DOMStandardFontDataFactory&&B&&e&&(0,_display_utils.isValidFetchUrl)(B,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(e,document.baseURI),Z=i.canvasFactory||new DefaultCanvasFactory({ownerDocument:gt}),ft=i.filterFactory||new DefaultFilterFactory({docId:c,ownerDocument:gt}),At=null;(0,_util.setVerbosityLevel)(ct);const _t={canvasFactory:Z,filterFactory:ft};if(q||(_t.cMapReaderFactory=new S({baseUrl:B,isCompressed:J}),_t.standardFontDataFactory=new s({baseUrl:e})),!U){const Ot={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};U=Ot.port?PDFWorker.fromPort(Ot):new PDFWorker(Ot),l._worker=U}const K={docId:c,apiVersion:"3.11.174",data:r,password:at,disableAutoFetch:Q,rangeChunkSize:$,length:g,docBaseUrl:R,enableXfa:pt,evaluatorOptions:{maxImageSize:P,disableFontFace:ot,ignoreErrors:u,isEvalSupported:k,isOffscreenCanvasSupported:M,canvasMaxAreaInBytes:G,fontExtraProperties:ut,useSystemFonts:D,cMapUrl:q?B:null,standardFontDataUrl:q?e:null}},Ct={ignoreErrors:u,isEvalSupported:k,disableFontFace:ot,fontExtraProperties:ut,enableXfa:pt,ownerDocument:gt,disableAutoFetch:Q,pdfBug:st,styleElement:At};return U.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const Ot=_fetchDocument(U,K),qt=new Promise(function(Mt){let Nt;H?Nt=new _transport_stream.PDFDataTransportStream({length:g,initialData:H.initialData,progressiveDone:H.progressiveDone,contentDispositionFilename:H.contentDispositionFilename,disableRange:vt,disableStream:yt},H):r||(Nt=(Vt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vt):(0,_display_utils.isValidFetchUrl)(Vt.url)?new _displayFetch_stream.PDFFetchStream(Vt):new _displayNetwork.PDFNetworkStream(Vt))({url:L,length:g,httpHeaders:_,withCredentials:F,rangeChunkSize:$,disableRange:vt,disableStream:yt})),Mt(Nt)});return Promise.all([Ot,qt]).then(function([Mt,Nt]){if(l.destroyed)throw new Error("Loading aborted");const Wt=new _message_handler.MessageHandler(c,Mt,U.port),Vt=new WorkerTransport(Wt,l,Nt,Ct,_t);l._transport=Vt,Wt.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(i,l){if(i.destroyed)throw new Error("Worker was destroyed");const c=await i.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(i.destroyed)throw new Error("Worker was destroyed");return c}function getUrlProp(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch(l){if(_util.isNodeJS&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(i){if(_util.isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return(0,_util.stringToBytes)(i);if(typeof i=="object"&&!isNaN(i==null?void 0:i.length)||(0,_util.isArrayBuffer)(i))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const o=class o{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d".concat(he(o,et)._++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,c,L;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((c=this._transport)==null?void 0:c.destroy())}catch(r){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};et=new WeakMap,tt(o,et,0);let PDFDocumentLoadingTask=o;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,c,L=!1,r=null){this.length=l,this.initialData=c,this.progressiveDone=L,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,c){for(const L of this._rangeListeners)L(l,c)}onDataProgress(l,c){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(l,c)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const c of this._progressiveReadListeners)c(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,c){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,c){this._pdfInfo=l,this._transport=c,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const r=[];for(const _ in L)r.push(...L[_]);return r}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,c,L,r=!1){tt(this,y);tt(this,V,null);tt(this,a,!1);this._pageIndex=l,this._pageInfo=c,this._transport=L,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:c=this.rotate,offsetX:L=0,offsetY:r=0,dontFlip:_=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:c,offsetX:L,offsetY:r,dontFlip:_})}getAnnotations({intent:l="display"}={}){const c=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,c.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:c,intent:L="display",annotationMode:r=_util.AnnotationMode.ENABLE,transform:_=null,background:F=null,optionalContentConfigPromise:at=null,annotationCanvasMap:H=null,pageColors:$=null,printAnnotationStorage:U=null}){var s,u;(s=this._stats)==null||s.time("Overall");const ct=this._transport.getRenderingIntent(L,r,U);rt(this,a,!1),X(this,y,xe).call(this),at||(at=this._transport.getOptionalContentConfig());let R=this._intentStates.get(ct.cacheKey);R||(R=Object.create(null),this._intentStates.set(ct.cacheKey,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const B=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);R.displayReadyCapability||(R.displayReadyCapability=new _util.PromiseCapability,R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(ct));const J=P=>{var k,M;R.renderTasks.delete(S),(this._maybeCleanupAfterRender||B)&&rt(this,a,!0),X(this,y,re).call(this,!B),P?(S.capability.reject(P),this._abortOperatorList({intentState:R,reason:P instanceof Error?P:new Error(P)})):S.capability.resolve(),(k=this._stats)==null||k.timeEnd("Rendering"),(M=this._stats)==null||M.timeEnd("Overall")},S=new InternalRenderTask({callback:J,params:{canvasContext:l,viewport:c,transform:_,background:F},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:H,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!B,pdfBug:this._pdfBug,pageColors:$});(R.renderTasks||(R.renderTasks=new Set)).add(S);const e=S.task;return Promise.all([R.displayReadyCapability.promise,at]).then(([P,k])=>{var M;if(this.destroyed){J();return}(M=this._stats)==null||M.time("Rendering"),S.initializeGraphics({transparency:P,optionalContentConfig:k}),S.operatorListChanged()}).catch(J),e}getOperatorList({intent:l="display",annotationMode:c=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var H;function r(){F.operatorList.lastChunk&&(F.opListReadCapability.resolve(F.operatorList),F.renderTasks.delete(at))}const _=this._transport.getRenderingIntent(l,c,L,!0);let F=this._intentStates.get(_.cacheKey);F||(F=Object.create(null),this._intentStates.set(_.cacheKey,F));let at;return F.opListReadCapability||(at=Object.create(null),at.operatorListChanged=r,F.opListReadCapability=new _util.PromiseCapability,(F.renderTasks||(F.renderTasks=new Set)).add(at),F.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(_)),F.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:c===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const c=this.streamTextContent(l);return new Promise(function(L,r){function _(){F.read().then(function({value:H,done:$}){if($){L(at);return}Object.assign(at.styles,H.styles),at.items.push(...H.items),_()},r)}const F=c.getReader(),at={items:[],styles:Object.create(null)};_()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const L of c.renderTasks)l.push(L.completed),L.cancel();return this.objs.clear(),rt(this,a,!1),X(this,y,xe).call(this),Promise.all(l)}cleanup(l=!1){rt(this,a,!0);const c=X(this,y,re).call(this,!1);return l&&c&&this._stats&&(this._stats=new _display_utils.StatTimer),c}_startRenderPage(l,c){var r,_;const L=this._intentStates.get(c);L&&((r=this._stats)==null||r.timeEnd("Page Request"),(_=L.displayReadyCapability)==null||_.resolve(l))}_renderPageChunk(l,c){for(let L=0,r=l.length;L<r;L++)c.operatorList.fnArray.push(l.fnArray[L]),c.operatorList.argsArray.push(l.argsArray[L]);c.operatorList.lastChunk=l.lastChunk,c.operatorList.separateAnnots=l.separateAnnots;for(const L of c.renderTasks)L.operatorListChanged();l.lastChunk&&X(this,y,re).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:c,annotationStorageSerializable:L}){const{map:r,transfers:_}=L,at=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:c,annotationStorage:r},_).getReader(),H=this._intentStates.get(c);H.streamReader=at;const $=()=>{at.read().then(({value:U,done:ct})=>{if(ct){H.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(U,H),$())},U=>{if(H.streamReader=null,!this._transport.destroyed){if(H.operatorList){H.operatorList.lastChunk=!0;for(const ct of H.renderTasks)ct.operatorListChanged();X(this,y,re).call(this,!0)}if(H.displayReadyCapability)H.displayReadyCapability.reject(U);else if(H.opListReadCapability)H.opListReadCapability.reject(U);else throw U}})};$()}_abortOperatorList({intentState:l,reason:c,force:L=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!L){if(l.renderTasks.size>0)return;if(c instanceof _display_utils.RenderingCancelledException){let r=RENDERING_CANCELLED_TIMEOUT;c.extraDelay>0&&c.extraDelay<1e3&&(r+=c.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:c,force:!0})},r);return}}if(l.streamReader.cancel(new _util.AbortException(c.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[r,_]of this._intentStates)if(_===l){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}V=new WeakMap,a=new WeakMap,y=new WeakSet,re=function(l=!1){if(X(this,y,xe).call(this),!t(this,a)||this.destroyed)return!1;if(l)return rt(this,V,setTimeout(()=>{rt(this,V,null),X(this,y,re).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:c,operatorList:L}of this._intentStates.values())if(c.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,a,!1),!0},xe=function(){t(this,V)&&(clearTimeout(t(this,V)),rt(this,V,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){tt(this,nt,new Set);tt(this,O,Promise.resolve())}postMessage(l,c){const L={data:structuredClone(l,c?{transfer:c}:null)};t(this,O).then(()=>{for(const r of t(this,nt))r.call(this,L)})}addEventListener(l,c){t(this,nt).add(c)}removeEventListener(l,c){t(this,nt).delete(c)}terminate(){t(this,nt).clear()}}nt=new WeakMap,O=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const i=(C=document==null?void 0:document.currentScript)==null?void 0:C.src;i&&(PDFWorkerUtil.fallbackWorkerSrc=i.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(i,l){let c;try{if(c=new URL(i),!c.origin||c.origin==="null")return!1}catch(r){return!1}const L=new URL(l,c);return c.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(i){const l='importScripts("'.concat(i,'");');return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:i=null,port:l=null,verbosity:c=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=i,this.destroyed=!1,this.verbosity=c,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((L=t(_PDFWorker,f))!=null&&L.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,f)||rt(_PDFWorker,f,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new _message_handler.MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:i}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const l=new Worker(i),c=new _message_handler.MessageHandler("main","worker",l),L=()=>{l.removeEventListener("error",r),c.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||L()};l.addEventListener("error",r),c.on("test",F=>{if(l.removeEventListener("error",r),this.destroyed){L();return}F?(this._messageHandler=c,this._port=l,this._webWorker=l,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),c.destroy(),l.terminate())}),c.on("ready",F=>{if(l.removeEventListener("error",r),this.destroyed){L();return}try{_()}catch(at){this._setupFakeWorker()}});const _=()=>{const F=new Uint8Array;c.send("test",F,[F.buffer])};_();return}catch(l){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(i=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const c="fake".concat(PDFWorkerUtil.fakeWorkerId++),L=new _message_handler.MessageHandler(c+"_worker",c,l);i.setup(L,l);const r=new _message_handler.MessageHandler(c,c+"_worker",l);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(i=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(i.message,'".')))})}destroy(){var i;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(i=t(_PDFWorker,f))==null||i.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){var c;if(!(i!=null&&i.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(c=t(this,f))==null?void 0:c.get(i.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(i)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch(l){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};f=new WeakMap,tt(_PDFWorker,f);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,c,L,r,_){tt(this,E);tt(this,N,new Map);tt(this,j,new Map);tt(this,v,new Map);tt(this,m,null);this.messageHandler=l,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=_.canvasFactory,this.filterFactory=_.filterFactory,this.cMapReaderFactory=_.cMapReaderFactory,this.standardFontDataFactory=_.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,c=_util.AnnotationMode.ENABLE,L=null,r=!1){let _=_util.RenderingIntentFlag.DISPLAY,F=_annotation_storage.SerializableEmpty;switch(l){case"any":_=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":_=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(l))}switch(c){case _util.AnnotationMode.DISABLE:_+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:_+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:_+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,F=(_&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(c))}return r&&(_+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:_,cacheKey:"".concat(_,"_").concat(F.hash),annotationStorageSerializable:F}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=t(this,m))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const r of t(this,j).values())l.push(r._destroy());t(this,j).clear(),t(this,v).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return l.push(c),Promise.all(l).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),t(this,N).clear(),this.filterFactory.destroy(),(r=this._networkStream)==null||r.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:c}=this;l.on("GetReader",(L,r)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=_=>{this._lastProgress={loaded:_.loaded,total:_.total}},r.onPull=()=>{this._fullReader.read().then(function({value:_,done:F}){if(F){r.close();return}(0,_util.assert)(_ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(_),1,[_])}).catch(_=>{r.error(_)})},r.onCancel=_=>{this._fullReader.cancel(_),r.ready.catch(F=>{if(!this.destroyed)throw F})}}),l.on("ReaderHeadersReady",L=>{const r=new _util.PromiseCapability,_=this._fullReader;return _.headersReady.then(()=>{var F;(!_.isStreamingSupported||!_.isRangeSupported)&&(this._lastProgress&&((F=c.onProgress)==null||F.call(c,this._lastProgress)),_.onProgress=at=>{var H;(H=c.onProgress)==null||H.call(c,{loaded:at.loaded,total:at.total})}),r.resolve({isStreamingSupported:_.isStreamingSupported,isRangeSupported:_.isRangeSupported,contentLength:_.contentLength})},r.reject),r.promise}),l.on("GetRangeReader",(L,r)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const _=this._networkStream.getRangeReader(L.begin,L.end);if(!_){r.close();return}r.onPull=()=>{_.read().then(function({value:F,done:at}){if(at){r.close();return}(0,_util.assert)(F instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(F),1,[F])}).catch(F=>{r.error(F)})},r.onCancel=F=>{_.cancel(F),r.ready.catch(at=>{if(!this.destroyed)throw at})}}),l.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(L,this))}),l.on("DocException",function(L){let r;switch(L.name){case"PasswordException":r=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":r=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}c._capability.reject(r)}),l.on("PasswordRequest",L=>{if(rt(this,m,new _util.PromiseCapability),c.onPassword){const r=_=>{_ instanceof Error?t(this,m).reject(_):t(this,m).resolve({password:_})};try{c.onPassword(r,L.code)}catch(_){t(this,m).reject(_)}}else t(this,m).reject(new _util.PasswordException(L.message,L.code));return t(this,m).promise}),l.on("DataLoaded",L=>{var r;(r=c.onProgress)==null||r.call(c,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),l.on("StartRenderPage",L=>{if(this.destroyed)return;t(this,j).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),l.on("commonobj",([L,r,_])=>{var F;if(!this.destroyed&&!this.commonObjs.has(L))switch(r){case"Font":const at=this._params;if("error"in _){const U=_.error;(0,_util.warn)("Error during font loading: ".concat(U)),this.commonObjs.resolve(L,U);break}const H=at.pdfBug&&((F=globalThis.FontInspector)!=null&&F.enabled)?(U,ct)=>globalThis.FontInspector.fontAdded(U,ct):null,$=new _font_loader.FontFaceObject(_,{isEvalSupported:at.isEvalSupported,disableFontFace:at.disableFontFace,ignoreErrors:at.ignoreErrors,inspectFont:H});this.fontLoader.bind($).catch(U=>l.sendWithPromise("FontFallback",{id:L})).finally(()=>{!at.fontExtraProperties&&$.data&&($.data=null),this.commonObjs.resolve(L,$)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,_);break;default:throw new Error("Got unknown common object type ".concat(r))}}),l.on("obj",([L,r,_,F])=>{var H;if(this.destroyed)return;const at=t(this,j).get(r);if(!at.objs.has(L))switch(_){case"Image":if(at.objs.resolve(L,F),F){let $;if(F.bitmap){const{width:U,height:ct}=F;$=U*ct*4}else $=((H=F.data)==null?void 0:H.length)||0;$>_util.MAX_IMAGE_SIZE_TO_CACHE&&(at._maybeCleanupAfterRender=!0)}break;case"Pattern":at.objs.resolve(L,F);break;default:throw new Error("Got unknown object type ".concat(_))}}),l.on("DocProgress",L=>{var r;this.destroyed||(r=c.onProgress)==null||r.call(c,{loaded:L.loaded,total:L.total})}),l.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L,r;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:c}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:(r=(L=this._fullReader)==null?void 0:L.filename)!=null?r:null},c).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=l-1,L=t(this,v).get(c);if(L)return L;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(_=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(c,_,this,this._params.pdfBug);return t(this,j).set(c,F),F});return t(this,v).set(c,r),r}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:c})}getFieldObjects(){return X(this,E,ve).call(this,"GetFieldObjects")}hasJSActions(){return X(this,E,ve).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,E,ve).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",c=t(this,N).get(l);if(c)return c;const L=this.messageHandler.sendWithPromise(l,null).then(r=>{var _,F,at,H;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:(F=(_=this._fullReader)==null?void 0:_.filename)!=null?F:null,contentLength:(H=(at=this._fullReader)==null?void 0:at.contentLength)!=null?H:null}});return t(this,N).set(l,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const c of t(this,j).values())if(!c.cleanup())throw new Error("startCleanup: Page ".concat(c.pageNumber," is currently rendering."));this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,N).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:c}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:c})}}N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakSet,ve=function(l,c=null){const L=t(this,N).get(l);if(L)return L;const r=this.messageHandler.sendWithPromise(l,c);return t(this,N).set(l,r),r};class PDFObjects{constructor(){tt(this,x);tt(this,d,Object.create(null))}get(l,c=null){if(c){const r=X(this,x,De).call(this,l);return r.capability.promise.then(()=>c(r.data)),null}const L=t(this,d)[l];if(!(L!=null&&L.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(l,"."));return L.data}has(l){const c=t(this,d)[l];return(c==null?void 0:c.capability.settled)||!1}resolve(l,c=null){const L=X(this,x,De).call(this,l);L.data=c,L.capability.resolve()}clear(){var l;for(const c in t(this,d)){const{data:L}=t(this,d)[c];(l=L==null?void 0:L.bitmap)==null||l.close()}rt(this,d,Object.create(null))}}d=new WeakMap,x=new WeakSet,De=function(l){var c;return(c=t(this,d))[l]||(c[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){tt(this,b,null);rt(this,b,l),this.onContinue=null}get promise(){return t(this,b).capability.promise}cancel(l=0){t(this,b).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,b).operatorList;if(!l)return!1;const{annotationCanvasMap:c}=t(this,b);return l.form||l.canvas&&(c==null?void 0:c.size)>0}}b=new WeakMap,exports$1.RenderTask=RenderTask;const h=class h{constructor({callback:l,params:c,objs:L,commonObjs:r,annotationCanvasMap:_,operatorList:F,pageIndex:at,canvasFactory:H,filterFactory:$,useRequestAnimationFrame:U=!1,pdfBug:ct=!1,pageColors:R=null}){this.callback=l,this.params=c,this.objs=L,this.commonObjs=r,this.annotationCanvasMap=_,this.operatorListIdx=null,this.operatorList=F,this._pageIndex=at,this.canvasFactory=H,this.filterFactory=$,this._pdfBug=ct,this.pageColors=R,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=U===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:c}){var at,H;if(this.cancelled)return;if(this._canvas){if(t(h,n).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(h,n).add(this._canvas)}this._pdfBug&&((at=globalThis.StepperManager)!=null&&at.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:r,transform:_,background:F}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:c},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:_,viewport:r,transparency:l,background:F}),this.operatorListIdx=0,this.graphicsReady=!0,(H=this.graphicsReadyCallback)==null||H.call(this)}cancel(l=null,c=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),t(h,n).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),c))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(h,n).delete(this._canvas),this.callback())))}};n=new WeakMap,tt(h,n,new WeakSet);let InternalRenderTask=h;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((et,o,V)=>{var C,f,N,ms,v;Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableEmpty=o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var a=V(1),y=V(4),Y=V(8);const z=Object.freeze({map:null,hash:"",transfers:void 0});o.SerializableEmpty=z;class nt{constructor(){tt(this,N);tt(this,C,!1);tt(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(E,p){const d=t(this,f).get(E);return d===void 0?p:Object.assign(p,d)}getRawValue(E){return t(this,f).get(E)}remove(E){if(t(this,f).delete(E),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of t(this,f).values())if(p instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(E,p){const d=t(this,f).get(E);let x=!1;if(d!==void 0)for(const[w,b]of Object.entries(p))d[w]!==b&&(x=!0,d[w]=b);else x=!0,t(this,f).set(E,p);x&&X(this,N,ms).call(this),p instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(E){return t(this,f).has(E)}getAll(){return t(this,f).size>0?(0,a.objectFromMap)(t(this,f)):null}setAll(E){for(const[p,d]of Object.entries(E))this.setValue(p,d)}get size(){return t(this,f).size}resetModified(){t(this,C)&&(rt(this,C,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new O(this)}get serializable(){if(t(this,f).size===0)return z;const E=new Map,p=new Y.MurmurHash3_64,d=[],x=Object.create(null);let w=!1;for(const[b,n]of t(this,f)){const h=n instanceof y.AnnotationEditor?n.serialize(!1,x):n;h&&(E.set(b,h),p.update("".concat(b,":").concat(JSON.stringify(h))),w||(w=!!h.bitmap))}if(w)for(const b of E.values())b.bitmap&&d.push(b.bitmap);return E.size>0?{map:E,hash:p.hexdigest(),transfers:d}:z}}C=new WeakMap,f=new WeakMap,N=new WeakSet,ms=function(){t(this,C)||(rt(this,C,!0),typeof this.onSetModified=="function"&&this.onSetModified())},o.AnnotationStorage=nt;class O extends nt{constructor(p){super();tt(this,v);const{map:d,hash:x,transfers:w}=p.serializable,b=structuredClone(d,w?{transfer:w}:null);rt(this,v,{map:b,hash:x,transfers:w})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,v)}}v=new WeakMap,o.PrintAnnotationStorage=O}),((et,o,V)=>{var O,C,f,N,j,v,m,E,p,d,x,w,b,n,h,Ie,Le,c,je,Ne,gs,bs,xs,Oe,vs;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var a=V(5),y=V(1),Y=V(6);const U=class U{constructor(R){tt(this,h);tt(this,O,"");tt(this,C,!1);tt(this,f,null);tt(this,N,null);tt(this,j,null);tt(this,v,!1);tt(this,m,null);tt(this,E,this.focusin.bind(this));tt(this,p,this.focusout.bind(this));tt(this,d,!1);tt(this,x,!1);tt(this,w,!1);$t(this,"_initialOptions",Object.create(null));$t(this,"_uiManager",null);$t(this,"_focusEventsAllowed",!0);$t(this,"_l10nPromise",null);tt(this,b,!1);tt(this,n,U._zIndex++);this.constructor===U&&(0,y.unreachable)("Cannot initialize AnnotationEditor."),this.parent=R.parent,this.id=R.id,this.width=this.height=null,this.pageIndex=R.parent.pageIndex,this.name=R.name,this.div=null,this._uiManager=R.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=R.isCentered,this._structTreeParentId=null;const{rotation:B,rawDims:{pageWidth:J,pageHeight:S,pageX:e,pageY:s}}=this.parent.viewport;this.rotation=B,this.pageRotation=(360+B-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[J,S],this.pageTranslation=[e,s];const[u,P]=this.parentDimensions;this.x=R.x/u,this.y=R.y/P,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,y.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(R){const B=new nt({id:R.parent.getNextId(),parent:R.parent,uiManager:R._uiManager});B.annotationElementId=R.annotationElementId,B.deleted=!0,B._uiManager.addToAnnotationStorage(B)}static initialize(R,B=null){if(U._l10nPromise||(U._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(S=>[S,R.get(S)]))),B!=null&&B.strings)for(const S of B.strings)U._l10nPromise.set(S,R.get(S));if(U._borderLineWidth!==-1)return;const J=getComputedStyle(document.documentElement);U._borderLineWidth=parseFloat(J.getPropertyValue("--outline-width"))||0}static updateDefaultParams(R,B){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(R){return!1}static paste(R,B){(0,y.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,b)}set _isDraggable(R){var B;rt(this,b,R),(B=this.div)==null||B.classList.toggle("draggable",R)}center(){const[R,B]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*B/(R*2),this.y+=this.width*R/(B*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*B/(R*2),this.y-=this.width*R/(B*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(R){this._uiManager.addCommands(R)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,n)}setParent(R){R!==null&&(this.pageIndex=R.pageIndex,this.pageDimensions=R.pageDimensions),this.parent=R}focusin(R){this._focusEventsAllowed&&(t(this,d)?rt(this,d,!1):this.parent.setSelected(this))}focusout(R){var J;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const B=R.relatedTarget;B!=null&&B.closest("#".concat(this.id))||(R.preventDefault(),(J=this.parent)!=null&&J.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(R,B,J,S){const[e,s]=this.parentDimensions;[J,S]=this.screenToPageTranslation(J,S),this.x=(R+J)/e,this.y=(B+S)/s,this.fixAndSetPosition()}translate(R,B){X(this,h,Ie).call(this,this.parentDimensions,R,B)}translateInPage(R,B){X(this,h,Ie).call(this,this.pageDimensions,R,B),this.div.scrollIntoView({block:"nearest"})}drag(R,B){const[J,S]=this.parentDimensions;if(this.x+=R/J,this.y+=B/S,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:k,y:M}=this.div.getBoundingClientRect();this.parent.findNewParent(this,k,M)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:e,y:s}=this;const[u,P]=X(this,h,Le).call(this);e+=u,s+=P,this.div.style.left="".concat((100*e).toFixed(2),"%"),this.div.style.top="".concat((100*s).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[R,B]=this.pageDimensions;let{x:J,y:S,width:e,height:s}=this;switch(e*=R,s*=B,J*=R,S*=B,this.rotation){case 0:J=Math.max(0,Math.min(R-e,J)),S=Math.max(0,Math.min(B-s,S));break;case 90:J=Math.max(0,Math.min(R-s,J)),S=Math.min(B,Math.max(e,S));break;case 180:J=Math.min(R,Math.max(e,J)),S=Math.min(B,Math.max(s,S));break;case 270:J=Math.min(R,Math.max(s,J)),S=Math.max(0,Math.min(B-e,S));break}this.x=J/=R,this.y=S/=B;const[u,P]=X(this,h,Le).call(this);J+=u,S+=P;const{style:k}=this.div;k.left="".concat((100*J).toFixed(2),"%"),k.top="".concat((100*S).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(R,B){var J;return X(J=U,c,je).call(J,R,B,this.parentRotation)}pageTranslationToScreen(R,B){var J;return X(J=U,c,je).call(J,R,B,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:R,pageDimensions:[B,J]}=this,S=B*R,e=J*R;return y.FeatureTest.isCSSRoundSupported?[Math.round(S),Math.round(e)]:[S,e]}setDims(R,B){var e;const[J,S]=this.parentDimensions;this.div.style.width="".concat((100*R/J).toFixed(2),"%"),t(this,v)||(this.div.style.height="".concat((100*B/S).toFixed(2),"%")),(e=t(this,f))==null||e.classList.toggle("small",R<U.SMALL_EDITOR_SIZE||B<U.SMALL_EDITOR_SIZE)}fixDims(){const{style:R}=this.div,{height:B,width:J}=R,S=J.endsWith("%"),e=!t(this,v)&&B.endsWith("%");if(S&&e)return;const[s,u]=this.parentDimensions;S||(R.width="".concat((100*parseFloat(J)/s).toFixed(2),"%")),!t(this,v)&&!e&&(R.height="".concat((100*parseFloat(B)/u).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const R=rt(this,f,document.createElement("button"));R.className="altText";const B=await U._l10nPromise.get("editor_alt_text_button_label");R.textContent=B,R.setAttribute("aria-label",B),R.tabIndex="0",R.addEventListener("contextmenu",Y.noContextMenu),R.addEventListener("pointerdown",J=>J.stopPropagation()),R.addEventListener("click",J=>{J.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),R.addEventListener("keydown",J=>{J.target===R&&J.key==="Enter"&&(J.preventDefault(),this._uiManager.editAltText(this))}),X(this,h,Oe).call(this),this.div.append(R),U.SMALL_EDITOR_SIZE||(U.SMALL_EDITOR_SIZE=Math.min(128,Math.round(R.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,O),decorative:t(this,C)}}set altTextData({altText:R,decorative:B}){t(this,O)===R&&t(this,C)===B||(rt(this,O,R),rt(this,C,B),X(this,h,Oe).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,E)),this.div.addEventListener("focusout",t(this,p));const[R,B]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*B/R).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*R/B).toFixed(2),"%"));const[J,S]=this.getInitialTranslation();return this.translate(J,S),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(R){const{isMac:B}=y.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&B){R.preventDefault();return}rt(this,d,!0),X(this,h,vs).call(this,R)}moveInDOM(){var R;(R=this.parent)==null||R.moveEditorInDOM(this)}_setParentAndPosition(R,B,J){R.changeParent(this),this.x=B,this.y=J,this.fixAndSetPosition()}getRect(R,B){const J=this.parentScale,[S,e]=this.pageDimensions,[s,u]=this.pageTranslation,P=R/J,k=B/J,M=this.x*S,G=this.y*e,ot=this.width*S,ut=this.height*e;switch(this.rotation){case 0:return[M+P+s,e-G-k-ut+u,M+P+ot+s,e-G-k+u];case 90:return[M+k+s,e-G+P+u,M+k+ut+s,e-G+P+ot+u];case 180:return[M-P-ot+s,e-G+k+u,M-P+s,e-G+k+ut+u];case 270:return[M-k-ut+s,e-G-P-ot+u,M-k+s,e-G-P+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(R,B){const[J,S,e,s]=R,u=e-J,P=s-S;switch(this.rotation){case 0:return[J,B-s,u,P];case 90:return[J,B-S,P,u];case 180:return[e,B-S,u,P];case 270:return[e,B-s,P,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,w,!0)}disableEditMode(){rt(this,w,!1)}isInEditMode(){return t(this,w)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var R,B;(R=this.div)==null||R.addEventListener("focusin",t(this,E)),(B=this.div)==null||B.addEventListener("focusout",t(this,p))}serialize(R=!1,B=null){(0,y.unreachable)("An editor must be serializable")}static deserialize(R,B,J){const S=new this.prototype.constructor({parent:B,id:B.getNextId(),uiManager:J});S.rotation=R.rotation;const[e,s]=S.pageDimensions,[u,P,k,M]=S.getRectInCurrentCoords(R.rect,s);return S.x=u/e,S.y=P/s,S.width=k/e,S.height=M/s,S}remove(){var R;this.div.removeEventListener("focusin",t(this,E)),this.div.removeEventListener("focusout",t(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(R=t(this,f))==null||R.remove(),rt(this,f,null),rt(this,N,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,h,gs).call(this),t(this,m).classList.remove("hidden"))}select(){var R;this.makeResizable(),(R=this.div)==null||R.classList.add("selectedEditor")}unselect(){var R,B,J;(R=t(this,m))==null||R.classList.add("hidden"),(B=this.div)==null||B.classList.remove("selectedEditor"),(J=this.div)!=null&&J.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(R,B){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,x)}set isEditing(R){rt(this,x,R),this.parent&&(R?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(R,B){rt(this,v,!0);const J=R/B,{style:S}=this.div;S.aspectRatio=J,S.height="auto"}static get MIN_SIZE(){return 16}};O=new WeakMap,C=new WeakMap,f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakMap,x=new WeakMap,w=new WeakMap,b=new WeakMap,n=new WeakMap,h=new WeakSet,Ie=function([R,B],J,S){[J,S]=this.screenToPageTranslation(J,S),this.x+=J/R,this.y+=S/B,this.fixAndSetPosition()},Le=function(){const[R,B]=this.parentDimensions,{_borderLineWidth:J}=U,S=J/R,e=J/B;switch(this.rotation){case 90:return[-S,e];case 180:return[S,e];case 270:return[S,-e];default:return[-S,-e]}},c=new WeakSet,je=function(R,B,J){switch(J){case 90:return[B,-R];case 180:return[-R,-B];case 270:return[-B,R];default:return[R,B]}},Ne=function(R){switch(R){case 90:{const[B,J]=this.pageDimensions;return[0,-B/J,J/B,0]}case 180:return[-1,0,0,-1];case 270:{const[B,J]=this.pageDimensions;return[0,B/J,-J/B,0]}default:return[1,0,0,1]}},gs=function(){if(t(this,m))return;rt(this,m,document.createElement("div")),t(this,m).classList.add("resizers");const R=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||R.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const B of R){const J=document.createElement("div");t(this,m).append(J),J.classList.add("resizer",B),J.addEventListener("pointerdown",X(this,h,bs).bind(this,B)),J.addEventListener("contextmenu",Y.noContextMenu)}this.div.prepend(t(this,m))},bs=function(R,B){B.preventDefault();const{isMac:J}=y.FeatureTest.platform;if(B.button!==0||B.ctrlKey&&J)return;const S=X(this,h,xs).bind(this,R),e=this._isDraggable;this._isDraggable=!1;const s={passive:!0,capture:!0};window.addEventListener("pointermove",S,s);const u=this.x,P=this.y,k=this.width,M=this.height,G=this.parent.div.style.cursor,ot=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(B.target).cursor;const ut=()=>{this._isDraggable=e,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",S,s),this.parent.div.style.cursor=G,this.div.style.cursor=ot;const pt=this.x,gt=this.y,vt=this.width,yt=this.height;pt===u&&gt===P&&vt===k&&yt===M||this.addCommands({cmd:()=>{this.width=vt,this.height=yt,this.x=pt,this.y=gt;const[Q,st]=this.parentDimensions;this.setDims(Q*vt,st*yt),this.fixAndSetPosition()},undo:()=>{this.width=k,this.height=M,this.x=u,this.y=P;const[Q,st]=this.parentDimensions;this.setDims(Q*k,st*M),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},xs=function(R,B){const[J,S]=this.parentDimensions,e=this.x,s=this.y,u=this.width,P=this.height,k=U.MIN_SIZE/J,M=U.MIN_SIZE/S,G=Mt=>Math.round(Mt*1e4)/1e4,ot=X(this,h,Ne).call(this,this.rotation),ut=(Mt,Nt)=>[ot[0]*Mt+ot[2]*Nt,ot[1]*Mt+ot[3]*Nt],pt=X(this,h,Ne).call(this,360-this.rotation),gt=(Mt,Nt)=>[pt[0]*Mt+pt[2]*Nt,pt[1]*Mt+pt[3]*Nt];let vt,yt,Q=!1,st=!1;switch(R){case"topLeft":Q=!0,vt=(Mt,Nt)=>[0,0],yt=(Mt,Nt)=>[Mt,Nt];break;case"topMiddle":vt=(Mt,Nt)=>[Mt/2,0],yt=(Mt,Nt)=>[Mt/2,Nt];break;case"topRight":Q=!0,vt=(Mt,Nt)=>[Mt,0],yt=(Mt,Nt)=>[0,Nt];break;case"middleRight":st=!0,vt=(Mt,Nt)=>[Mt,Nt/2],yt=(Mt,Nt)=>[0,Nt/2];break;case"bottomRight":Q=!0,vt=(Mt,Nt)=>[Mt,Nt],yt=(Mt,Nt)=>[0,0];break;case"bottomMiddle":vt=(Mt,Nt)=>[Mt/2,Nt],yt=(Mt,Nt)=>[Mt/2,0];break;case"bottomLeft":Q=!0,vt=(Mt,Nt)=>[0,Nt],yt=(Mt,Nt)=>[Mt,0];break;case"middleLeft":st=!0,vt=(Mt,Nt)=>[0,Nt/2],yt=(Mt,Nt)=>[Mt,Nt/2];break}const g=vt(u,P),D=yt(u,P);let q=ut(...D);const Z=G(e+q[0]),ft=G(s+q[1]);let At=1,_t=1,[K,Ct]=this.screenToPageTranslation(B.movementX,B.movementY);if([K,Ct]=gt(K/J,Ct/S),Q){const Mt=Math.hypot(u,P);At=_t=Math.max(Math.min(Math.hypot(D[0]-g[0]-K,D[1]-g[1]-Ct)/Mt,1/u,1/P),k/u,M/P)}else st?At=Math.max(k,Math.min(1,Math.abs(D[0]-g[0]-K)))/u:_t=Math.max(M,Math.min(1,Math.abs(D[1]-g[1]-Ct)))/P;const St=G(u*At),Ut=G(P*_t);q=ut(...yt(St,Ut));const Ot=Z-q[0],qt=ft-q[1];this.width=St,this.height=Ut,this.x=Ot,this.y=qt,this.setDims(J*St,S*Ut),this.fixAndSetPosition()},Oe=async function(){var J;const R=t(this,f);if(!R)return;if(!t(this,O)&&!t(this,C)){R.classList.remove("done"),(J=t(this,N))==null||J.remove();return}U._l10nPromise.get("editor_alt_text_edit_button_label").then(S=>{R.setAttribute("aria-label",S)});let B=t(this,N);if(!B){rt(this,N,B=document.createElement("span")),B.className="tooltip",B.setAttribute("role","tooltip");const S=B.id="alt-text-tooltip-".concat(this.id);R.setAttribute("aria-describedby",S);const e=100;R.addEventListener("mouseenter",()=>{rt(this,j,setTimeout(()=>{rt(this,j,null),t(this,N).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},e))}),R.addEventListener("mouseleave",()=>{var s;clearTimeout(t(this,j)),rt(this,j,null),(s=t(this,N))==null||s.classList.remove("show")})}R.classList.add("done"),B.innerText=t(this,C)?await U._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,O),B.parentNode||R.append(B)},vs=function(R){if(!this._isDraggable)return;const B=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let J,S;B&&(J={passive:!0,capture:!0},S=s=>{const[u,P]=this.screenToPageTranslation(s.movementX,s.movementY);this._uiManager.dragSelectedEditors(u,P)},window.addEventListener("pointermove",S,J));const e=()=>{if(window.removeEventListener("pointerup",e),window.removeEventListener("blur",e),B&&window.removeEventListener("pointermove",S,J),rt(this,d,!1),!this._uiManager.endDragSession()){const{isMac:s}=y.FeatureTest.platform;R.ctrlKey&&!s||R.shiftKey||R.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",e),window.addEventListener("blur",e)},tt(U,c),$t(U,"_borderLineWidth",-1),$t(U,"_colorManager",new a.ColorManager),$t(U,"_zIndex",1),$t(U,"SMALL_EDITOR_SIZE",0);let z=U;o.AnnotationEditor=z;class nt extends z{constructor(R){super(R),this.annotationElementId=R.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((et,o,V)=>{var v,m,E,p,d,Be,b,n,h,i,l,_s,r,_,F,at,H,$,U,ct,R,B,J,S,e,s,u,P,k,M,G,ot,ut,pt,gt,vt,yt,Q,st,g,D,q,Z,ft,At,_t,K,ys,Ue,He,_e,We,ze,Zt,de,As,Es,Ge,ue,Xe;Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=Y,o.opacityToHex=z;var a=V(1),y=V(6);function Y(Gt,I,mt){for(const wt of mt)I.addEventListener(wt,Gt[wt].bind(Gt))}function z(Gt){return Math.round(Math.min(255,Math.max(1,255*Gt))).toString(16).padStart(2,"0")}class nt{constructor(){tt(this,v,0)}getId(){return"".concat(a.AnnotationEditorPrefix).concat(he(this,v)._++)}}v=new WeakMap;const w=class w{constructor(){tt(this,d);tt(this,m,(0,a.getUuid)());tt(this,E,0);tt(this,p,null)}static get _isSVGFittingCanvas(){const I='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',wt=new OffscreenCanvas(1,3).getContext("2d"),Dt=new Image;Dt.src=I;const jt=Dt.decode().then(()=>(wt.drawImage(Dt,0,0,1,1,0,0,1,3),new Uint32Array(wt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",jt)}async getFromFile(I){const{lastModified:mt,name:wt,size:Dt,type:jt}=I;return X(this,d,Be).call(this,"".concat(mt,"_").concat(wt,"_").concat(Dt,"_").concat(jt),I)}async getFromUrl(I){return X(this,d,Be).call(this,I,I)}async getFromId(I){t(this,p)||rt(this,p,new Map);const mt=t(this,p).get(I);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(I){const mt=t(this,p).get(I);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(I){t(this,p)||rt(this,p,new Map);const mt=t(this,p).get(I);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(I){return I.startsWith("image_".concat(t(this,m),"_"))}};m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakSet,Be=async function(I,mt){t(this,p)||rt(this,p,new Map);let wt=t(this,p).get(I);if(wt===null)return null;if(wt!=null&&wt.bitmap)return wt.refCounter+=1,wt;try{wt||(wt={bitmap:null,id:"image_".concat(t(this,m),"_").concat(he(this,E)._++),refCounter:0,isSvg:!1});let Dt;if(typeof mt=="string"){wt.url=mt;const jt=await fetch(mt);if(!jt.ok)throw new Error(jt.statusText);Dt=await jt.blob()}else Dt=wt.file=mt;if(Dt.type==="image/svg+xml"){const jt=w._isSVGFittingCanvas,Rt=new FileReader,T=new Image,A=new Promise((W,ht)=>{T.onload=()=>{wt.bitmap=T,wt.isSvg=!0,W()},Rt.onload=async()=>{const dt=wt.svgUrl=Rt.result;T.src=await jt?"".concat(dt,"#svgView(preserveAspectRatio(none))"):dt},T.onerror=Rt.onerror=ht});Rt.readAsDataURL(Dt),await A}else wt.bitmap=await createImageBitmap(Dt);wt.refCounter=1}catch(Dt){console.error(Dt),wt=null}return t(this,p).set(I,wt),wt&&t(this,p).set(wt.id,wt),wt};let O=w;class C{constructor(I=128){tt(this,b,[]);tt(this,n,!1);tt(this,h);tt(this,i,-1);rt(this,h,I)}add({cmd:I,undo:mt,mustExec:wt,type:Dt=NaN,overwriteIfSameType:jt=!1,keepUndo:Rt=!1}){if(wt&&I(),t(this,n))return;const T={cmd:I,undo:mt,type:Dt};if(t(this,i)===-1){t(this,b).length>0&&(t(this,b).length=0),rt(this,i,0),t(this,b).push(T);return}if(jt&&t(this,b)[t(this,i)].type===Dt){Rt&&(T.undo=t(this,b)[t(this,i)].undo),t(this,b)[t(this,i)]=T;return}const A=t(this,i)+1;A===t(this,h)?t(this,b).splice(0,1):(rt(this,i,A),A<t(this,b).length&&t(this,b).splice(A)),t(this,b).push(T)}undo(){t(this,i)!==-1&&(rt(this,n,!0),t(this,b)[t(this,i)].undo(),rt(this,n,!1),rt(this,i,t(this,i)-1))}redo(){t(this,i)<t(this,b).length-1&&(rt(this,i,t(this,i)+1),rt(this,n,!0),t(this,b)[t(this,i)].cmd(),rt(this,n,!1))}hasSomethingToUndo(){return t(this,i)!==-1}hasSomethingToRedo(){return t(this,i)<t(this,b).length-1}destroy(){rt(this,b,null)}}b=new WeakMap,n=new WeakMap,h=new WeakMap,i=new WeakMap,o.CommandManager=C;class f{constructor(I){tt(this,l);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=a.FeatureTest.platform;for(const[wt,Dt,jt={}]of I)for(const Rt of wt){const T=Rt.startsWith("mac+");mt&&T?(this.callbacks.set(Rt.slice(4),{callback:Dt,options:jt}),this.allKeys.add(Rt.split("+").at(-1))):!mt&&!T&&(this.callbacks.set(Rt,{callback:Dt,options:jt}),this.allKeys.add(Rt.split("+").at(-1)))}}exec(I,mt){if(!this.allKeys.has(mt.key))return;const wt=this.callbacks.get(X(this,l,_s).call(this,mt));if(!wt)return;const{callback:Dt,options:{bubbles:jt=!1,args:Rt=[],checker:T=null}}=wt;T&&!T(I,mt)||(Dt.bind(I,...Rt)(),jt||(mt.stopPropagation(),mt.preventDefault()))}}l=new WeakSet,_s=function(I){I.altKey&&this.buffer.push("alt"),I.ctrlKey&&this.buffer.push("ctrl"),I.metaKey&&this.buffer.push("meta"),I.shiftKey&&this.buffer.push("shift"),this.buffer.push(I.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt},o.KeyboardManager=f;const L=class L{get _colors(){const I=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(I),(0,a.shadow)(this,"_colors",I)}convert(I){const mt=(0,y.getRGB)(I);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[wt,Dt]of this._colors)if(Dt.every((jt,Rt)=>jt===mt[Rt]))return L._colorsMapping.get(wt);return mt}getHexCode(I){const mt=this._colors.get(I);return mt?a.Util.makeHexColor(...mt):I}};$t(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let N=L;o.ColorManager=N;const Xt=class Xt{constructor(I,mt,wt,Dt,jt,Rt){tt(this,K);tt(this,r,null);tt(this,_,new Map);tt(this,F,new Map);tt(this,at,null);tt(this,H,null);tt(this,$,new C);tt(this,U,0);tt(this,ct,new Set);tt(this,R,null);tt(this,B,null);tt(this,J,new Set);tt(this,S,null);tt(this,e,new nt);tt(this,s,!1);tt(this,u,!1);tt(this,P,null);tt(this,k,a.AnnotationEditorType.NONE);tt(this,M,new Set);tt(this,G,null);tt(this,ot,this.blur.bind(this));tt(this,ut,this.focus.bind(this));tt(this,pt,this.copy.bind(this));tt(this,gt,this.cut.bind(this));tt(this,vt,this.paste.bind(this));tt(this,yt,this.keydown.bind(this));tt(this,Q,this.onEditingAction.bind(this));tt(this,st,this.onPageChanging.bind(this));tt(this,g,this.onScaleChanging.bind(this));tt(this,D,this.onRotationChanging.bind(this));tt(this,q,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});tt(this,Z,[0,0]);tt(this,ft,null);tt(this,At,null);tt(this,_t,null);rt(this,At,I),rt(this,_t,mt),rt(this,at,wt),this._eventBus=Dt,this._eventBus._on("editingaction",t(this,Q)),this._eventBus._on("pagechanging",t(this,st)),this._eventBus._on("scalechanging",t(this,g)),this._eventBus._on("rotationchanging",t(this,D)),rt(this,H,jt.annotationStorage),rt(this,S,jt.filterFactory),rt(this,G,Rt),this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const I=Xt.prototype,mt=jt=>{const{activeElement:Rt}=document;return Rt&&t(jt,At).contains(Rt)&&jt.hasSomethingToControl()},wt=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],I.selectAll],[["ctrl+z","mac+meta+z"],I.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],I.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],I.delete],[["Escape","mac+Escape"],I.unselectAll],[["ArrowLeft","mac+ArrowLeft"],I.translateSelectedEditors,{args:[-wt,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],I.translateSelectedEditors,{args:[-Dt,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],I.translateSelectedEditors,{args:[wt,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],I.translateSelectedEditors,{args:[Dt,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],I.translateSelectedEditors,{args:[0,-wt],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],I.translateSelectedEditors,{args:[0,-Dt],checker:mt}],[["ArrowDown","mac+ArrowDown"],I.translateSelectedEditors,{args:[0,wt],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],I.translateSelectedEditors,{args:[0,Dt],checker:mt}]]))}destroy(){X(this,K,_e).call(this),X(this,K,Ue).call(this),this._eventBus._off("editingaction",t(this,Q)),this._eventBus._off("pagechanging",t(this,st)),this._eventBus._off("scalechanging",t(this,g)),this._eventBus._off("rotationchanging",t(this,D));for(const I of t(this,F).values())I.destroy();t(this,F).clear(),t(this,_).clear(),t(this,J).clear(),rt(this,r,null),t(this,M).clear(),t(this,$).destroy(),t(this,at).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",t(this,G)?t(this,S).addHCMFilter(t(this,G).foreground,t(this,G).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(t(this,At)).direction)}editAltText(I){var mt;(mt=t(this,at))==null||mt.editAltText(this,I)}onPageChanging({pageNumber:I}){rt(this,U,I-1)}focusMainContainer(){t(this,At).focus()}findParent(I,mt){for(const wt of t(this,F).values()){const{x:Dt,y:jt,width:Rt,height:T}=wt.div.getBoundingClientRect();if(I>=Dt&&I<=Dt+Rt&&mt>=jt&&mt<=jt+T)return wt}return null}disableUserSelect(I=!1){t(this,_t).classList.toggle("noUserSelect",I)}addShouldRescale(I){t(this,J).add(I)}removeShouldRescale(I){t(this,J).delete(I)}onScaleChanging({scale:I}){this.commitOrRemove(),this.viewParameters.realScale=I*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of t(this,J))mt.onScaleChanging()}onRotationChanging({pagesRotation:I}){this.commitOrRemove(),this.viewParameters.rotation=I}addToAnnotationStorage(I){!I.isEmpty()&&t(this,H)&&!t(this,H).has(I.id)&&t(this,H).setValue(I.id,I)}blur(){if(!this.hasSelection)return;const{activeElement:I}=document;for(const mt of t(this,M))if(mt.div.contains(I)){rt(this,P,[mt,I]),mt._focusEventsAllowed=!1;break}}focus(){if(!t(this,P))return;const[I,mt]=t(this,P);rt(this,P,null),mt.addEventListener("focusin",()=>{I._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){X(this,K,He).call(this),X(this,K,We).call(this)}removeEditListeners(){X(this,K,_e).call(this),X(this,K,ze).call(this)}copy(I){var wt;if(I.preventDefault(),(wt=t(this,r))==null||wt.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const Dt of t(this,M)){const jt=Dt.serialize(!0);jt&&mt.push(jt)}mt.length!==0&&I.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(I){this.copy(I),this.delete()}paste(I){I.preventDefault();const{clipboardData:mt}=I;for(const jt of mt.items)for(const Rt of t(this,B))if(Rt.isHandlingMimeForPasting(jt.type)){Rt.paste(jt,this.currentLayer);return}let wt=mt.getData("application/pdfjs");if(!wt)return;try{wt=JSON.parse(wt)}catch(jt){(0,a.warn)('paste: "'.concat(jt.message,'".'));return}if(!Array.isArray(wt))return;this.unselectAll();const Dt=this.currentLayer;try{const jt=[];for(const A of wt){const W=Dt.deserialize(A);if(!W)return;jt.push(W)}const Rt=()=>{for(const A of jt)X(this,K,Ge).call(this,A);X(this,K,Xe).call(this,jt)},T=()=>{for(const A of jt)A.remove()};this.addCommands({cmd:Rt,undo:T,mustExec:!0})}catch(jt){(0,a.warn)('paste: "'.concat(jt.message,'".'))}}keydown(I){var mt;(mt=this.getActive())!=null&&mt.shouldGetKeyboardEvents()||Xt._keyboardManager.exec(this,I)}onEditingAction(I){["undo","redo","delete","selectAll"].includes(I.name)&&this[I.name]()}setEditingState(I){I?(X(this,K,ys).call(this),X(this,K,He).call(this),X(this,K,We).call(this),X(this,K,Zt).call(this,{isEditing:t(this,k)!==a.AnnotationEditorType.NONE,isEmpty:X(this,K,ue).call(this),hasSomethingToUndo:t(this,$).hasSomethingToUndo(),hasSomethingToRedo:t(this,$).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,K,Ue).call(this),X(this,K,_e).call(this),X(this,K,ze).call(this),X(this,K,Zt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(I){if(!t(this,B)){rt(this,B,I);for(const mt of t(this,B))X(this,K,de).call(this,mt.defaultPropertiesToUpdate)}}getId(){return t(this,e).getId()}get currentLayer(){return t(this,F).get(t(this,U))}getLayer(I){return t(this,F).get(I)}get currentPageIndex(){return t(this,U)}addLayer(I){t(this,F).set(I.pageIndex,I),t(this,s)?I.enable():I.disable()}removeLayer(I){t(this,F).delete(I.pageIndex)}updateMode(I,mt=null){if(t(this,k)!==I){if(rt(this,k,I),I===a.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,K,Es).call(this);return}this.setEditingState(!0),X(this,K,As).call(this),this.unselectAll();for(const wt of t(this,F).values())wt.updateMode(I);if(mt){for(const wt of t(this,_).values())if(wt.annotationElementId===mt){this.setSelected(wt),wt.enterInEditMode();break}}}}updateToolbar(I){I!==t(this,k)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:I})}updateParams(I,mt){if(t(this,B)){if(I===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(I);return}for(const wt of t(this,M))wt.updateParams(I,mt);for(const wt of t(this,B))wt.updateDefaultParams(I,mt)}}enableWaiting(I=!1){if(t(this,u)!==I){rt(this,u,I);for(const mt of t(this,F).values())I?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",I)}}getEditors(I){const mt=[];for(const wt of t(this,_).values())wt.pageIndex===I&&mt.push(wt);return mt}getEditor(I){return t(this,_).get(I)}addEditor(I){t(this,_).set(I.id,I)}removeEditor(I){var mt;t(this,_).delete(I.id),this.unselect(I),(!I.annotationElementId||!t(this,ct).has(I.annotationElementId))&&((mt=t(this,H))==null||mt.remove(I.id))}addDeletedAnnotationElement(I){t(this,ct).add(I.annotationElementId),I.deleted=!0}isDeletedAnnotationElement(I){return t(this,ct).has(I)}removeDeletedAnnotationElement(I){t(this,ct).delete(I.annotationElementId),I.deleted=!1}setActiveEditor(I){t(this,r)!==I&&(rt(this,r,I),I&&X(this,K,de).call(this,I.propertiesToUpdate))}toggleSelected(I){if(t(this,M).has(I)){t(this,M).delete(I),I.unselect(),X(this,K,Zt).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,M).add(I),I.select(),X(this,K,de).call(this,I.propertiesToUpdate),X(this,K,Zt).call(this,{hasSelectedEditor:!0})}setSelected(I){for(const mt of t(this,M))mt!==I&&mt.unselect();t(this,M).clear(),t(this,M).add(I),I.select(),X(this,K,de).call(this,I.propertiesToUpdate),X(this,K,Zt).call(this,{hasSelectedEditor:!0})}isSelected(I){return t(this,M).has(I)}unselect(I){I.unselect(),t(this,M).delete(I),X(this,K,Zt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,M).size!==0}undo(){t(this,$).undo(),X(this,K,Zt).call(this,{hasSomethingToUndo:t(this,$).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,K,ue).call(this)})}redo(){t(this,$).redo(),X(this,K,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,$).hasSomethingToRedo(),isEmpty:X(this,K,ue).call(this)})}addCommands(I){t(this,$).add(I),X(this,K,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,K,ue).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const I=[...t(this,M)],mt=()=>{for(const Dt of I)Dt.remove()},wt=()=>{for(const Dt of I)X(this,K,Ge).call(this,Dt)};this.addCommands({cmd:mt,undo:wt,mustExec:!0})}commitOrRemove(){var I;(I=t(this,r))==null||I.commitOrRemove()}hasSomethingToControl(){return t(this,r)||this.hasSelection}selectAll(){for(const I of t(this,M))I.commit();X(this,K,Xe).call(this,t(this,_).values())}unselectAll(){if(t(this,r)){t(this,r).commitOrRemove();return}if(this.hasSelection){for(const I of t(this,M))I.unselect();t(this,M).clear(),X(this,K,Zt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(I,mt,wt=!1){if(wt||this.commitOrRemove(),!this.hasSelection)return;t(this,Z)[0]+=I,t(this,Z)[1]+=mt;const[Dt,jt]=t(this,Z),Rt=[...t(this,M)],T=1e3;t(this,ft)&&clearTimeout(t(this,ft)),rt(this,ft,setTimeout(()=>{rt(this,ft,null),t(this,Z)[0]=t(this,Z)[1]=0,this.addCommands({cmd:()=>{for(const A of Rt)t(this,_).has(A.id)&&A.translateInPage(Dt,jt)},undo:()=>{for(const A of Rt)t(this,_).has(A.id)&&A.translateInPage(-Dt,-jt)},mustExec:!1})},T));for(const A of Rt)A.translateInPage(I,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rt(this,R,new Map);for(const I of t(this,M))t(this,R).set(I,{savedX:I.x,savedY:I.y,savedPageIndex:I.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,R))return!1;this.disableUserSelect(!1);const I=t(this,R);rt(this,R,null);let mt=!1;for(const[{x:Dt,y:jt,pageIndex:Rt},T]of I)T.newX=Dt,T.newY=jt,T.newPageIndex=Rt,mt||(mt=Dt!==T.savedX||jt!==T.savedY||Rt!==T.savedPageIndex);if(!mt)return!1;const wt=(Dt,jt,Rt,T)=>{if(t(this,_).has(Dt.id)){const A=t(this,F).get(T);A?Dt._setParentAndPosition(A,jt,Rt):(Dt.pageIndex=T,Dt.x=jt,Dt.y=Rt)}};return this.addCommands({cmd:()=>{for(const[Dt,{newX:jt,newY:Rt,newPageIndex:T}]of I)wt(Dt,jt,Rt,T)},undo:()=>{for(const[Dt,{savedX:jt,savedY:Rt,savedPageIndex:T}]of I)wt(Dt,jt,Rt,T)},mustExec:!0}),!0}dragSelectedEditors(I,mt){if(t(this,R))for(const wt of t(this,R).keys())wt.drag(I,mt)}rebuild(I){if(I.parent===null){const mt=this.getLayer(I.pageIndex);mt?(mt.changeParent(I),mt.addOrRebuild(I)):(this.addEditor(I),this.addToAnnotationStorage(I),I.rebuild())}else I.parent.addOrRebuild(I)}isActive(I){return t(this,r)===I}getActive(){return t(this,r)}getMode(){return t(this,k)}get imageManager(){return(0,a.shadow)(this,"imageManager",new O)}};r=new WeakMap,_=new WeakMap,F=new WeakMap,at=new WeakMap,H=new WeakMap,$=new WeakMap,U=new WeakMap,ct=new WeakMap,R=new WeakMap,B=new WeakMap,J=new WeakMap,S=new WeakMap,e=new WeakMap,s=new WeakMap,u=new WeakMap,P=new WeakMap,k=new WeakMap,M=new WeakMap,G=new WeakMap,ot=new WeakMap,ut=new WeakMap,pt=new WeakMap,gt=new WeakMap,vt=new WeakMap,yt=new WeakMap,Q=new WeakMap,st=new WeakMap,g=new WeakMap,D=new WeakMap,q=new WeakMap,Z=new WeakMap,ft=new WeakMap,At=new WeakMap,_t=new WeakMap,K=new WeakSet,ys=function(){window.addEventListener("focus",t(this,ut)),window.addEventListener("blur",t(this,ot))},Ue=function(){window.removeEventListener("focus",t(this,ut)),window.removeEventListener("blur",t(this,ot))},He=function(){window.addEventListener("keydown",t(this,yt),{capture:!0})},_e=function(){window.removeEventListener("keydown",t(this,yt),{capture:!0})},We=function(){document.addEventListener("copy",t(this,pt)),document.addEventListener("cut",t(this,gt)),document.addEventListener("paste",t(this,vt))},ze=function(){document.removeEventListener("copy",t(this,pt)),document.removeEventListener("cut",t(this,gt)),document.removeEventListener("paste",t(this,vt))},Zt=function(I){Object.entries(I).some(([wt,Dt])=>t(this,q)[wt]!==Dt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,q),I)})},de=function(I){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:I})},As=function(){if(!t(this,s)){rt(this,s,!0);for(const I of t(this,F).values())I.enable()}},Es=function(){if(this.unselectAll(),t(this,s)){rt(this,s,!1);for(const I of t(this,F).values())I.disable()}},Ge=function(I){const mt=t(this,F).get(I.pageIndex);mt?mt.addOrRebuild(I):this.addEditor(I)},ue=function(){if(t(this,_).size===0)return!0;if(t(this,_).size===1)for(const I of t(this,_).values())return I.isEmpty();return!1},Xe=function(I){t(this,M).clear();for(const mt of I)mt.isEmpty()||(t(this,M).add(mt),mt.select());X(this,K,Zt).call(this,{hasSelectedEditor:!0})},$t(Xt,"TRANSLATE_SMALL",1),$t(Xt,"TRANSLATE_BIG",10);let j=Xt;o.AnnotationEditorUIManager=j}),((et,o,V)=>{var U,ct,R,B,J,S,e,s,u,P,k,M,ae,oe,Ve,ye,Ae,pe,fe;Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=i,o.getColorValues=_,o.getCurrentTransform=F,o.getCurrentTransformInverse=at,o.getFilenameFromUrl=d,o.getPdfFilenameFromUrl=x,o.getRGB=r,o.getXfaPageViewport=L,o.isDataScheme=E,o.isPdfFile=p,o.isValidFetchUrl=b,o.loadScript=h,o.noContextMenu=n,o.setLayerDimensions=H;var a=V(7),y=V(1);const Y="http://www.w3.org/2000/svg",$=class ${};$t($,"CSS",96),$t($,"PDF",72),$t($,"PDF_TO_CSS_UNITS",$.CSS/$.PDF);let z=$;o.PixelsPerInch=z;class nt extends a.BaseFilterFactory{constructor({docId:g,ownerDocument:D=globalThis.document}={}){super();tt(this,M);tt(this,U);tt(this,ct);tt(this,R);tt(this,B);tt(this,J);tt(this,S);tt(this,e);tt(this,s);tt(this,u);tt(this,P);tt(this,k,0);rt(this,R,g),rt(this,B,D)}addFilter(g){if(!g)return"none";let D=t(this,M,ae).get(g);if(D)return D;let q,Z,ft,At;if(g.length===1){const St=g[0],Ut=new Array(256);for(let Ot=0;Ot<256;Ot++)Ut[Ot]=St[Ot]/255;At=q=Z=ft=Ut.join(",")}else{const[St,Ut,Ot]=g,qt=new Array(256),Mt=new Array(256),Nt=new Array(256);for(let Wt=0;Wt<256;Wt++)qt[Wt]=St[Wt]/255,Mt[Wt]=Ut[Wt]/255,Nt[Wt]=Ot[Wt]/255;q=qt.join(","),Z=Mt.join(","),ft=Nt.join(","),At="".concat(q).concat(Z).concat(ft)}if(D=t(this,M,ae).get(At),D)return t(this,M,ae).set(g,D),D;const _t="g_".concat(t(this,R),"_transfer_map_").concat(he(this,k)._++),K="url(#".concat(_t,")");t(this,M,ae).set(g,K),t(this,M,ae).set(At,K);const Ct=X(this,M,ye).call(this,_t);return X(this,M,pe).call(this,q,Z,ft,Ct),K}addHCMFilter(g,D){var Ut;const q="".concat(g,"-").concat(D);if(t(this,S)===q)return t(this,e);if(rt(this,S,q),rt(this,e,"none"),(Ut=t(this,J))==null||Ut.remove(),!g||!D)return t(this,e);const Z=X(this,M,fe).call(this,g);g=y.Util.makeHexColor(...Z);const ft=X(this,M,fe).call(this,D);if(D=y.Util.makeHexColor(...ft),t(this,M,oe).style.color="",g==="#000000"&&D==="#ffffff"||g===D)return t(this,e);const At=new Array(256);for(let Ot=0;Ot<=255;Ot++){const qt=Ot/255;At[Ot]=qt<=.03928?qt/12.92:((qt+.055)/1.055)**2.4}const _t=At.join(","),K="g_".concat(t(this,R),"_hcm_filter"),Ct=rt(this,s,X(this,M,ye).call(this,K));X(this,M,pe).call(this,_t,_t,_t,Ct),X(this,M,Ve).call(this,Ct);const St=(Ot,qt)=>{const Mt=Z[Ot]/255,Nt=ft[Ot]/255,Wt=new Array(qt+1);for(let Vt=0;Vt<=qt;Vt++)Wt[Vt]=Mt+Vt/qt*(Nt-Mt);return Wt.join(",")};return X(this,M,pe).call(this,St(0,5),St(1,5),St(2,5),Ct),rt(this,e,"url(#".concat(K,")")),t(this,e)}addHighlightHCMFilter(g,D,q,Z){var Nt;const ft="".concat(g,"-").concat(D,"-").concat(q,"-").concat(Z);if(t(this,u)===ft)return t(this,P);if(rt(this,u,ft),rt(this,P,"none"),(Nt=t(this,s))==null||Nt.remove(),!g||!D)return t(this,P);const[At,_t]=[g,D].map(X(this,M,fe).bind(this));let K=Math.round(.2126*At[0]+.7152*At[1]+.0722*At[2]),Ct=Math.round(.2126*_t[0]+.7152*_t[1]+.0722*_t[2]),[St,Ut]=[q,Z].map(X(this,M,fe).bind(this));Ct<K&&([K,Ct,St,Ut]=[Ct,K,Ut,St]),t(this,M,oe).style.color="";const Ot=(Wt,Vt,xt)=>{const it=new Array(256),lt=(Ct-K)/xt,Pt=Wt/255,Xt=(Vt-Wt)/(255*xt);let Gt=0;for(let I=0;I<=xt;I++){const mt=Math.round(K+I*lt),wt=Pt+I*Xt;for(let Dt=Gt;Dt<=mt;Dt++)it[Dt]=wt;Gt=mt+1}for(let I=Gt;I<256;I++)it[I]=it[Gt-1];return it.join(",")},qt="g_".concat(t(this,R),"_hcm_highlight_filter"),Mt=rt(this,s,X(this,M,ye).call(this,qt));return X(this,M,Ve).call(this,Mt),X(this,M,pe).call(this,Ot(St[0],Ut[0],5),Ot(St[1],Ut[1],5),Ot(St[2],Ut[2],5),Mt),rt(this,P,"url(#".concat(qt,")")),t(this,P)}destroy(g=!1){g&&(t(this,e)||t(this,P))||(t(this,ct)&&(t(this,ct).parentNode.parentNode.remove(),rt(this,ct,null)),t(this,U)&&(t(this,U).clear(),rt(this,U,null)),rt(this,k,0))}}U=new WeakMap,ct=new WeakMap,R=new WeakMap,B=new WeakMap,J=new WeakMap,S=new WeakMap,e=new WeakMap,s=new WeakMap,u=new WeakMap,P=new WeakMap,k=new WeakMap,M=new WeakSet,ae=function(){return t(this,U)||rt(this,U,new Map)},oe=function(){if(!t(this,ct)){const g=t(this,B).createElement("div"),{style:D}=g;D.visibility="hidden",D.contain="strict",D.width=D.height=0,D.position="absolute",D.top=D.left=0,D.zIndex=-1;const q=t(this,B).createElementNS(Y,"svg");q.setAttribute("width",0),q.setAttribute("height",0),rt(this,ct,t(this,B).createElementNS(Y,"defs")),g.append(q),q.append(t(this,ct)),t(this,B).body.append(g)}return t(this,ct)},Ve=function(g){const D=t(this,B).createElementNS(Y,"feColorMatrix");D.setAttribute("type","matrix"),D.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),g.append(D)},ye=function(g){const D=t(this,B).createElementNS(Y,"filter");return D.setAttribute("color-interpolation-filters","sRGB"),D.setAttribute("id",g),t(this,M,oe).append(D),D},Ae=function(g,D,q){const Z=t(this,B).createElementNS(Y,D);Z.setAttribute("type","discrete"),Z.setAttribute("tableValues",q),g.append(Z)},pe=function(g,D,q,Z){const ft=t(this,B).createElementNS(Y,"feComponentTransfer");Z.append(ft),X(this,M,Ae).call(this,ft,"feFuncR",g),X(this,M,Ae).call(this,ft,"feFuncG",D),X(this,M,Ae).call(this,ft,"feFuncB",q)},fe=function(g){return t(this,M,oe).style.color=g,r(getComputedStyle(t(this,M,oe)).getPropertyValue("color"))},o.DOMFilterFactory=nt;class O extends a.BaseCanvasFactory{constructor({ownerDocument:st=globalThis.document}={}){super(),this._document=st}_createCanvas(st,g){const D=this._document.createElement("canvas");return D.width=st,D.height=g,D}}o.DOMCanvasFactory=O;async function C(Q,st=!1){if(b(Q,document.baseURI)){const g=await fetch(Q);if(!g.ok)throw new Error(g.statusText);return st?new Uint8Array(await g.arrayBuffer()):(0,y.stringToBytes)(await g.text())}return new Promise((g,D)=>{const q=new XMLHttpRequest;q.open("GET",Q,!0),st&&(q.responseType="arraybuffer"),q.onreadystatechange=()=>{if(q.readyState===XMLHttpRequest.DONE){if(q.status===200||q.status===0){let Z;if(st&&q.response?Z=new Uint8Array(q.response):!st&&q.responseText&&(Z=(0,y.stringToBytes)(q.responseText)),Z){g(Z);return}}D(new Error(q.statusText))}},q.send(null)})}class f extends a.BaseCMapReaderFactory{_fetchData(st,g){return C(st,this.isCompressed).then(D=>({cMapData:D,compressionType:g}))}}o.DOMCMapReaderFactory=f;class N extends a.BaseStandardFontDataFactory{_fetchData(st){return C(st,!0)}}o.DOMStandardFontDataFactory=N;class j extends a.BaseSVGFactory{_createSVG(st){return document.createElementNS(Y,st)}}o.DOMSVGFactory=j;class v{constructor({viewBox:st,scale:g,rotation:D,offsetX:q=0,offsetY:Z=0,dontFlip:ft=!1}){this.viewBox=st,this.scale=g,this.rotation=D,this.offsetX=q,this.offsetY=Z;const At=(st[2]+st[0])/2,_t=(st[3]+st[1])/2;let K,Ct,St,Ut;switch(D%=360,D<0&&(D+=360),D){case 180:K=-1,Ct=0,St=0,Ut=1;break;case 90:K=0,Ct=1,St=1,Ut=0;break;case 270:K=0,Ct=-1,St=-1,Ut=0;break;case 0:K=1,Ct=0,St=0,Ut=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(St=-St,Ut=-Ut);let Ot,qt,Mt,Nt;K===0?(Ot=Math.abs(_t-st[1])*g+q,qt=Math.abs(At-st[0])*g+Z,Mt=(st[3]-st[1])*g,Nt=(st[2]-st[0])*g):(Ot=Math.abs(At-st[0])*g+q,qt=Math.abs(_t-st[1])*g+Z,Mt=(st[2]-st[0])*g,Nt=(st[3]-st[1])*g),this.transform=[K*g,Ct*g,St*g,Ut*g,Ot-K*g*At-St*g*_t,qt-Ct*g*At-Ut*g*_t],this.width=Mt,this.height=Nt}get rawDims(){const{viewBox:st}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:st[2]-st[0],pageHeight:st[3]-st[1],pageX:st[0],pageY:st[1]})}clone({scale:st=this.scale,rotation:g=this.rotation,offsetX:D=this.offsetX,offsetY:q=this.offsetY,dontFlip:Z=!1}={}){return new v({viewBox:this.viewBox.slice(),scale:st,rotation:g,offsetX:D,offsetY:q,dontFlip:Z})}convertToViewportPoint(st,g){return y.Util.applyTransform([st,g],this.transform)}convertToViewportRectangle(st){const g=y.Util.applyTransform([st[0],st[1]],this.transform),D=y.Util.applyTransform([st[2],st[3]],this.transform);return[g[0],g[1],D[0],D[1]]}convertToPdfPoint(st,g){return y.Util.applyInverseTransform([st,g],this.transform)}}o.PageViewport=v;class m extends y.BaseException{constructor(st,g=0){super(st,"RenderingCancelledException"),this.extraDelay=g}}o.RenderingCancelledException=m;function E(Q){const st=Q.length;let g=0;for(;g<st&&Q[g].trim()==="";)g++;return Q.substring(g,g+5).toLowerCase()==="data:"}function p(Q){return typeof Q=="string"&&/\.pdf$/i.test(Q)}function d(Q,st=!1){return st||([Q]=Q.split(/[#?]/,1)),Q.substring(Q.lastIndexOf("/")+1)}function x(Q,st="document.pdf"){if(typeof Q!="string")return st;if(E(Q))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),st;const g=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,D=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,q=g.exec(Q);let Z=D.exec(q[1])||D.exec(q[2])||D.exec(q[3]);if(Z&&(Z=Z[0],Z.includes("%")))try{Z=D.exec(decodeURIComponent(Z))[0]}catch(ft){}return Z||st}class w{constructor(){$t(this,"started",Object.create(null));$t(this,"times",[])}time(st){st in this.started&&(0,y.warn)("Timer is already running for ".concat(st)),this.started[st]=Date.now()}timeEnd(st){st in this.started||(0,y.warn)("Timer has not been started for ".concat(st)),this.times.push({name:st,start:this.started[st],end:Date.now()}),delete this.started[st]}toString(){const st=[];let g=0;for(const{name:D}of this.times)g=Math.max(D.length,g);for(const{name:D,start:q,end:Z}of this.times)st.push("".concat(D.padEnd(g)," ").concat(Z-q,"ms\n"));return st.join("")}}o.StatTimer=w;function b(Q,st){try{const{protocol:g}=st?new URL(Q,st):new URL(Q);return g==="http:"||g==="https:"}catch(g){return!1}}function n(Q){Q.preventDefault()}function h(Q,st=!1){return new Promise((g,D)=>{const q=document.createElement("script");q.src=Q,q.onload=function(Z){st&&q.remove(),g(Z)},q.onerror=function(){D(new Error("Cannot load script at: ".concat(q.src)))},(document.head||document.documentElement).append(q)})}function i(Q){console.log("Deprecated API usage: "+Q)}let l;class c{static toDateObject(st){if(!st||typeof st!="string")return null;l||(l=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const g=l.exec(st);if(!g)return null;const D=parseInt(g[1],10);let q=parseInt(g[2],10);q=q>=1&&q<=12?q-1:0;let Z=parseInt(g[3],10);Z=Z>=1&&Z<=31?Z:1;let ft=parseInt(g[4],10);ft=ft>=0&&ft<=23?ft:0;let At=parseInt(g[5],10);At=At>=0&&At<=59?At:0;let _t=parseInt(g[6],10);_t=_t>=0&&_t<=59?_t:0;const K=g[7]||"Z";let Ct=parseInt(g[8],10);Ct=Ct>=0&&Ct<=23?Ct:0;let St=parseInt(g[9],10)||0;return St=St>=0&&St<=59?St:0,K==="-"?(ft+=Ct,At+=St):K==="+"&&(ft-=Ct,At-=St),new Date(Date.UTC(D,q,Z,ft,At,_t))}}o.PDFDateString=c;function L(Q,{scale:st=1,rotation:g=0}){const{width:D,height:q}=Q.attributes.style,Z=[0,0,parseInt(D),parseInt(q)];return new v({viewBox:Z,scale:st,rotation:g})}function r(Q){if(Q.startsWith("#")){const st=parseInt(Q.slice(1),16);return[(st&16711680)>>16,(st&65280)>>8,st&255]}return Q.startsWith("rgb(")?Q.slice(4,-1).split(",").map(st=>parseInt(st)):Q.startsWith("rgba(")?Q.slice(5,-1).split(",").map(st=>parseInt(st)).slice(0,3):((0,y.warn)('Not a valid color format: "'.concat(Q,'"')),[0,0,0])}function _(Q){const st=document.createElement("span");st.style.visibility="hidden",document.body.append(st);for(const g of Q.keys()){st.style.color=g;const D=window.getComputedStyle(st).color;Q.set(g,r(D))}st.remove()}function F(Q){const{a:st,b:g,c:D,d:q,e:Z,f:ft}=Q.getTransform();return[st,g,D,q,Z,ft]}function at(Q){const{a:st,b:g,c:D,d:q,e:Z,f:ft}=Q.getTransform().invertSelf();return[st,g,D,q,Z,ft]}function H(Q,st,g=!1,D=!0){if(st instanceof v){const{pageWidth:q,pageHeight:Z}=st.rawDims,{style:ft}=Q,At=y.FeatureTest.isCSSRoundSupported,_t="var(--scale-factor) * ".concat(q,"px"),K="var(--scale-factor) * ".concat(Z,"px"),Ct=At?"round(".concat(_t,", 1px)"):"calc(".concat(_t,")"),St=At?"round(".concat(K,", 1px)"):"calc(".concat(K,")");!g||st.rotation%180===0?(ft.width=Ct,ft.height=St):(ft.width=St,ft.height=Ct)}D&&Q.setAttribute("data-main-rotation",st.rotation)}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var a=V(1);class y{constructor(){this.constructor===y&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,N){return"none"}addHighlightHCMFilter(f,N,j,v){return"none"}destroy(f=!1){}}o.BaseFilterFactory=y;class Y{constructor(){this.constructor===Y&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,N){if(f<=0||N<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(f,N);return{canvas:j,context:j.getContext("2d")}}reset(f,N,j){if(!f.canvas)throw new Error("Canvas is not specified");if(N<=0||j<=0)throw new Error("Invalid canvas size");f.canvas.width=N,f.canvas.height=j}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,N){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=Y;class z{constructor({baseUrl:f=null,isCompressed:N=!0}){this.constructor===z&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=N}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const N=this.baseUrl+f+(this.isCompressed?".bcmap":""),j=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(N,j).catch(v=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(N))})}_fetchData(f,N){(0,a.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=z;class nt{constructor({baseUrl:f=null}){this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const N="".concat(this.baseUrl).concat(f);return this._fetchData(N).catch(j=>{throw new Error("Unable to load font data at: ".concat(N))})}_fetchData(f){(0,a.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=nt;class O{constructor(){this.constructor===O&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,N,j=!1){if(f<=0||N<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),j||(v.setAttribute("width","".concat(f,"px")),v.setAttribute("height","".concat(N,"px"))),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox","0 0 ".concat(f," ").concat(N)),v}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,a.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=O}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var a=V(1);const y=3285377520,Y=4294901760,z=65535;class nt{constructor(C){this.h1=C?C&4294967295:y,this.h2=C?C&4294967295:y}update(C){let f,N;if(typeof C=="string"){f=new Uint8Array(C.length*2),N=0;for(let i=0,l=C.length;i<l;i++){const c=C.charCodeAt(i);c<=255?f[N++]=c:(f[N++]=c>>>8,f[N++]=c&255)}}else if((0,a.isArrayBuffer)(C))f=C.slice(),N=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const j=N>>2,v=N-j*4,m=new Uint32Array(f.buffer,0,j);let E=0,p=0,d=this.h1,x=this.h2;const w=3432918353,b=461845907,n=w&z,h=b&z;for(let i=0;i<j;i++)i&1?(E=m[i],E=E*w&Y|E*n&z,E=E<<15|E>>>17,E=E*b&Y|E*h&z,d^=E,d=d<<13|d>>>19,d=d*5+3864292196):(p=m[i],p=p*w&Y|p*n&z,p=p<<15|p>>>17,p=p*b&Y|p*h&z,x^=p,x=x<<13|x>>>19,x=x*5+3864292196);switch(E=0,v){case 3:E^=f[j*4+2]<<16;case 2:E^=f[j*4+1]<<8;case 1:E^=f[j*4],E=E*w&Y|E*n&z,E=E<<15|E>>>17,E=E*b&Y|E*h&z,j&1?d^=E:x^=E}this.h1=d,this.h2=x}hexdigest(){let C=this.h1,f=this.h2;return C^=f>>>1,C=C*3981806797&Y|C*36045&z,f=f*4283543511&Y|((f<<16|C>>>16)*2950163797&Y)>>>16,C^=f>>>1,C=C*444984403&Y|C*60499&z,f=f*3301882366&Y|((f<<16|C>>>16)*3120437893&Y)>>>16,C^=f>>>1,(C>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=nt}),((et,o,V)=>{var z;Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var a=V(1);class y{constructor({ownerDocument:O=globalThis.document,styleElement:C=null}){tt(this,z,new Set);this._document=O,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(O){this.nativeFontFaces.add(O),this._document.fonts.add(O)}removeNativeFontFace(O){this.nativeFontFaces.delete(O),this._document.fonts.delete(O)}insertRule(O){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const C=this.styleElement.sheet;C.insertRule(O,C.cssRules.length)}clear(){for(const O of this.nativeFontFaces)this._document.fonts.delete(O);this.nativeFontFaces.clear(),t(this,z).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(O){if(!(!O||t(this,z).has(O.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:f,style:N}=O,j=new FontFace(C,f,N);this.addNativeFontFace(j);try{await j.load(),t(this,z).add(C)}catch(v){(0,a.warn)("Cannot load system font: ".concat(O.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(j)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(O){if(O.attached||O.missingFile&&!O.systemFontInfo)return;if(O.attached=!0,O.systemFontInfo){await this.loadSystemFont(O.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=O.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(N){throw(0,a.warn)("Failed to load font '".concat(f.family,"': '").concat(N,"'.")),O.disableFontFace=!0,N}}return}const C=O.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const N=this._queueLoadingCallback(f);this._prepareFontLoadEvent(O,N)})}}get isFontLoadingAPISupported(){var C;const O=!!((C=this._document)!=null&&C.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",O)}get isSyncFontLoadingSupported(){let O=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(O=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",O)}_queueLoadingCallback(O){function C(){for((0,a.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;f.length>0&&f[0].done;){const j=f.shift();setTimeout(j.callback,0)}}const{loadingRequests:f}=this,N={done:!1,complete:C,callback:O};return f.push(N),N}get _loadTestFont(){const O=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",O)}_prepareFontLoadEvent(O,C){function f(r,_){return r.charCodeAt(_)<<24|r.charCodeAt(_+1)<<16|r.charCodeAt(_+2)<<8|r.charCodeAt(_+3)&255}function N(r,_,F,at){const H=r.substring(0,_),$=r.substring(_+F);return H+at+$}let j,v;const m=this._document.createElement("canvas");m.width=1,m.height=1;const E=m.getContext("2d");let p=0;function d(r,_){if(++p>30){(0,a.warn)("Load test font never loaded."),_();return}if(E.font="30px "+r,E.fillText(".",0,20),E.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,r,_))}const x="lt".concat(Date.now()).concat(this.loadTestFontId++);let w=this._loadTestFont;w=N(w,976,x.length,x);const n=16,h=1482184792;let i=f(w,n);for(j=0,v=x.length-3;j<v;j+=4)i=i-h+f(x,j)|0;j<x.length&&(i=i-h+f(x+"XXX",j)|0),w=N(w,n,4,(0,a.string32)(i));const l="url(data:font/opentype;base64,".concat(btoa(w),");"),c='@font-face {font-family:"'.concat(x,'";src:').concat(l,"}");this.insertRule(c);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const r of[O.loadedName,x]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=r,L.append(_)}this._document.body.append(L),d(x,()=>{L.remove(),C.complete()})}}z=new WeakMap,o.FontLoader=y;class Y{constructor(O,{isEvalSupported:C=!0,disableFontFace:f=!1,ignoreErrors:N=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const v in O)this[v]=O[v];this.isEvalSupported=C!==!1,this.disableFontFace=f===!0,this.ignoreErrors=N===!0,this._inspectFont=j}createNativeFontFace(){var C;if(!this.data||this.disableFontFace)return null;let O;if(!this.cssFontInfo)O=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),O=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(C=this._inspectFont)==null||C.call(this,this),O}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const O=(0,a.bytesToString)(this.data),C="url(data:".concat(this.mimetype,";base64,").concat(btoa(O),");");let f;if(!this.cssFontInfo)f='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(C,"}");else{let j="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(j+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),f='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(j,"src:").concat(C,"}")}return(N=this._inspectFont)==null||N.call(this,this,C),f}getPathGenerator(O,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let f;try{f=O.get(this.loadedName+"_path_"+C)}catch(N){if(!this.ignoreErrors)throw N;return(0,a.warn)('getPathGenerator - ignoring character: "'.concat(N,'".')),this.compiledGlyphs[C]=function(j,v){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const N=[];for(const j of f){const v=j.args!==void 0?j.args.join(","):"";N.push("c.",j.cmd,"(",v,");\n")}return this.compiledGlyphs[C]=new Function("c","size",N.join(""))}return this.compiledGlyphs[C]=function(N,j){for(const v of f)v.cmd==="scale"&&(v.args=[j,-j]),N[v.cmd].apply(N,v.args)}}}o.FontFaceObject=Y}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var a=V(7);V(1);const y=function(C){return new Promise((f,N)=>{require$$5.readFile(C,(v,m)=>{if(v||!m){N(new Error(v));return}f(new Uint8Array(m))})})};class Y extends a.BaseFilterFactory{}o.NodeFilterFactory=Y;class z extends a.BaseCanvasFactory{_createCanvas(f,N){return require$$5.createCanvas(f,N)}}o.NodeCanvasFactory=z;class nt extends a.BaseCMapReaderFactory{_fetchData(f,N){return y(f).then(j=>({cMapData:j,compressionType:N}))}}o.NodeCMapReaderFactory=nt;class O extends a.BaseStandardFontDataFactory{_fetchData(f){return y(f)}}o.NodeStandardFontDataFactory=O}),((et,o,V)=>{var ct,qe,Ye;Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var a=V(1),y=V(6),Y=V(12),z=V(13);const nt=16,O=100,C=4096,f=15,N=10,j=1e3,v=16;function m(S,e){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){e.save(),this.__originalSave()},S.restore=function(){e.restore(),this.__originalRestore()},S.translate=function(u,P){e.translate(u,P),this.__originalTranslate(u,P)},S.scale=function(u,P){e.scale(u,P),this.__originalScale(u,P)},S.transform=function(u,P,k,M,G,ot){e.transform(u,P,k,M,G,ot),this.__originalTransform(u,P,k,M,G,ot)},S.setTransform=function(u,P,k,M,G,ot){e.setTransform(u,P,k,M,G,ot),this.__originalSetTransform(u,P,k,M,G,ot)},S.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},S.rotate=function(u){e.rotate(u),this.__originalRotate(u)},S.clip=function(u){e.clip(u),this.__originalClip(u)},S.moveTo=function(s,u){e.moveTo(s,u),this.__originalMoveTo(s,u)},S.lineTo=function(s,u){e.lineTo(s,u),this.__originalLineTo(s,u)},S.bezierCurveTo=function(s,u,P,k,M,G){e.bezierCurveTo(s,u,P,k,M,G),this.__originalBezierCurveTo(s,u,P,k,M,G)},S.rect=function(s,u,P,k){e.rect(s,u,P,k),this.__originalRect(s,u,P,k)},S.closePath=function(){e.closePath(),this.__originalClosePath()},S.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class E{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,s,u){let P;return this.cache[e]!==void 0?(P=this.cache[e],this.canvasFactory.reset(P,s,u)):(P=this.canvasFactory.create(s,u),this.cache[e]=P),P}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const s=this.cache[e];this.canvasFactory.destroy(s),delete this.cache[e]}}}function p(S,e,s,u,P,k,M,G,ot,ut){const[pt,gt,vt,yt,Q,st]=(0,y.getCurrentTransform)(S);if(gt===0&&vt===0){const q=M*pt+Q,Z=Math.round(q),ft=G*yt+st,At=Math.round(ft),_t=(M+ot)*pt+Q,K=Math.abs(Math.round(_t)-Z)||1,Ct=(G+ut)*yt+st,St=Math.abs(Math.round(Ct)-At)||1;return S.setTransform(Math.sign(pt),0,0,Math.sign(yt),Z,At),S.drawImage(e,s,u,P,k,0,0,K,St),S.setTransform(pt,gt,vt,yt,Q,st),[K,St]}if(pt===0&&yt===0){const q=G*vt+Q,Z=Math.round(q),ft=M*gt+st,At=Math.round(ft),_t=(G+ut)*vt+Q,K=Math.abs(Math.round(_t)-Z)||1,Ct=(M+ot)*gt+st,St=Math.abs(Math.round(Ct)-At)||1;return S.setTransform(0,Math.sign(gt),Math.sign(vt),0,Z,At),S.drawImage(e,s,u,P,k,0,0,St,K),S.setTransform(pt,gt,vt,yt,Q,st),[St,K]}S.drawImage(e,s,u,P,k,M,G,ot,ut);const g=Math.hypot(pt,gt),D=Math.hypot(vt,yt);return[g*ot,D*ut]}function d(S){const{width:e,height:s}=S;if(e>j||s>j)return null;const u=1e3,P=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=e+1;let M=new Uint8Array(k*(s+1)),G,ot,ut;const pt=e+7&-8;let gt=new Uint8Array(pt*s),vt=0;for(const D of S.data){let q=128;for(;q>0;)gt[vt++]=D&q?0:255,q>>=1}let yt=0;for(vt=0,gt[vt]!==0&&(M[0]=1,++yt),ot=1;ot<e;ot++)gt[vt]!==gt[vt+1]&&(M[ot]=gt[vt]?2:1,++yt),vt++;for(gt[vt]!==0&&(M[ot]=2,++yt),G=1;G<s;G++){vt=G*pt,ut=G*k,gt[vt-pt]!==gt[vt]&&(M[ut]=gt[vt]?1:8,++yt);let D=(gt[vt]?4:0)+(gt[vt-pt]?8:0);for(ot=1;ot<e;ot++)D=(D>>2)+(gt[vt+1]?4:0)+(gt[vt-pt+1]?8:0),P[D]&&(M[ut+ot]=P[D],++yt),vt++;if(gt[vt-pt]!==gt[vt]&&(M[ut+ot]=gt[vt]?2:4,++yt),yt>u)return null}for(vt=pt*(s-1),ut=G*k,gt[vt]!==0&&(M[ut]=8,++yt),ot=1;ot<e;ot++)gt[vt]!==gt[vt+1]&&(M[ut+ot]=gt[vt]?4:8,++yt),vt++;if(gt[vt]!==0&&(M[ut+ot]=4,++yt),yt>u)return null;const Q=new Int32Array([0,k,-1,0,-k,0,0,0,1]),st=new Path2D;for(G=0;yt&&G<=s;G++){let D=G*k;const q=D+e;for(;D<q&&!M[D];)D++;if(D===q)continue;st.moveTo(D%k,G);const Z=D;let ft=M[D];do{const At=Q[ft];do D+=At;while(!M[D]);const _t=M[D];_t!==5&&_t!==10?(ft=_t,M[D]=0):(ft=_t&51*ft>>4,M[D]&=ft>>2|ft<<2),st.lineTo(D%k,D/k|0),M[D]||--yt}while(Z!==D);--G}return gt=null,M=null,function(D){D.save(),D.scale(1/e,-1/s),D.translate(0,-s),D.fill(st),D.beginPath(),D.restore()}}class x{constructor(e,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,s])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,s){this.x=e,this.y=s}updatePathMinMax(e,s,u){[s,u]=a.Util.applyTransform([s,u],e),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(e,s){const u=a.Util.applyTransform(s,e),P=a.Util.applyTransform(s.slice(2),e);this.minX=Math.min(this.minX,u[0],P[0]),this.minY=Math.min(this.minY,u[1],P[1]),this.maxX=Math.max(this.maxX,u[0],P[0]),this.maxY=Math.max(this.maxY,u[1],P[1])}updateScalingPathMinMax(e,s){a.Util.scaleMinMax(e,s),this.minX=Math.min(this.minX,s[0]),this.maxX=Math.max(this.maxX,s[1]),this.minY=Math.min(this.minY,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(e,s,u,P,k,M,G,ot,ut,pt){const gt=a.Util.bezierBoundingBox(s,u,P,k,M,G,ot,ut);if(pt){pt[0]=Math.min(pt[0],gt[0],gt[2]),pt[1]=Math.max(pt[1],gt[0],gt[2]),pt[2]=Math.min(pt[2],gt[1],gt[3]),pt[3]=Math.max(pt[3],gt[1],gt[3]);return}this.updateRectMinMax(e,gt)}getPathBoundingBox(e=Y.PathType.FILL,s=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(e===Y.PathType.STROKE){s||(0,a.unreachable)("Stroke bounding box must include transform.");const P=a.Util.singularValueDecompose2dScale(s),k=P[0]*this.lineWidth/2,M=P[1]*this.lineWidth/2;u[0]-=k,u[1]-=M,u[2]+=k,u[3]+=M}return u}updateClipFromPath(){const e=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Y.PathType.FILL,s=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(e,s))}}function w(S,e){if(typeof ImageData<"u"&&e instanceof ImageData){S.putImageData(e,0,0);return}const s=e.height,u=e.width,P=s%v,k=(s-P)/v,M=P===0?k:k+1,G=S.createImageData(u,v);let ot=0,ut;const pt=e.data,gt=G.data;let vt,yt,Q,st;if(e.kind===a.ImageKind.GRAYSCALE_1BPP){const g=pt.byteLength,D=new Uint32Array(gt.buffer,0,gt.byteLength>>2),q=D.length,Z=u+7>>3,ft=4294967295,At=a.FeatureTest.isLittleEndian?4278190080:255;for(vt=0;vt<M;vt++){for(Q=vt<k?v:P,ut=0,yt=0;yt<Q;yt++){const _t=g-ot;let K=0;const Ct=_t>Z?u:_t*8-7,St=Ct&-8;let Ut=0,Ot=0;for(;K<St;K+=8)Ot=pt[ot++],D[ut++]=Ot&128?ft:At,D[ut++]=Ot&64?ft:At,D[ut++]=Ot&32?ft:At,D[ut++]=Ot&16?ft:At,D[ut++]=Ot&8?ft:At,D[ut++]=Ot&4?ft:At,D[ut++]=Ot&2?ft:At,D[ut++]=Ot&1?ft:At;for(;K<Ct;K++)Ut===0&&(Ot=pt[ot++],Ut=128),D[ut++]=Ot&Ut?ft:At,Ut>>=1}for(;ut<q;)D[ut++]=0;S.putImageData(G,0,vt*v)}}else if(e.kind===a.ImageKind.RGBA_32BPP){for(yt=0,st=u*v*4,vt=0;vt<k;vt++)gt.set(pt.subarray(ot,ot+st)),ot+=st,S.putImageData(G,0,yt),yt+=v;vt<M&&(st=u*P*4,gt.set(pt.subarray(ot,ot+st)),S.putImageData(G,0,yt))}else if(e.kind===a.ImageKind.RGB_24BPP)for(Q=v,st=u*Q,vt=0;vt<M;vt++){for(vt>=k&&(Q=P,st=u*Q),ut=0,yt=st;yt--;)gt[ut++]=pt[ot++],gt[ut++]=pt[ot++],gt[ut++]=pt[ot++],gt[ut++]=255;S.putImageData(G,0,vt*v)}else throw new Error("bad image kind: ".concat(e.kind))}function b(S,e){if(e.bitmap){S.drawImage(e.bitmap,0,0);return}const s=e.height,u=e.width,P=s%v,k=(s-P)/v,M=P===0?k:k+1,G=S.createImageData(u,v);let ot=0;const ut=e.data,pt=G.data;for(let gt=0;gt<M;gt++){const vt=gt<k?v:P;({srcPos:ot}=(0,z.convertBlackAndWhiteToRGBA)({src:ut,srcPos:ot,dest:pt,width:u,height:vt,nonBlackColor:0})),S.putImageData(G,0,gt*v)}}function n(S,e){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of s)S[u]!==void 0&&(e[u]=S[u]);S.setLineDash!==void 0&&(e.setLineDash(S.getLineDash()),e.lineDashOffset=S.lineDashOffset)}function h(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!a.isNodeJS){const{filter:e}=S;e!=="none"&&e!==""&&(S.filter="none")}}function i(S,e,s,u){const P=S.length;for(let k=3;k<P;k+=4){const M=S[k];if(M===0)S[k-3]=e,S[k-2]=s,S[k-1]=u;else if(M<255){const G=255-M;S[k-3]=S[k-3]*M+e*G>>8,S[k-2]=S[k-2]*M+s*G>>8,S[k-1]=S[k-1]*M+u*G>>8}}}function l(S,e,s){const u=S.length,P=1/255;for(let k=3;k<u;k+=4){const M=s?s[S[k]]:S[k];e[k]=e[k]*M*P|0}}function c(S,e,s){const u=S.length;for(let P=3;P<u;P+=4){const k=S[P-3]*77+S[P-2]*152+S[P-1]*28;e[P]=s?e[P]*s[k>>8]>>8:e[P]*k>>16}}function L(S,e,s,u,P,k,M,G,ot,ut,pt){const gt=!!k,vt=gt?k[0]:0,yt=gt?k[1]:0,Q=gt?k[2]:0,st=P==="Luminosity"?c:l,D=Math.min(u,Math.ceil(1048576/s));for(let q=0;q<u;q+=D){const Z=Math.min(D,u-q),ft=S.getImageData(G-ut,q+(ot-pt),s,Z),At=e.getImageData(G,q+ot,s,Z);gt&&i(ft.data,vt,yt,Q),st(ft.data,At.data,M),e.putImageData(At,G,q+ot)}}function r(S,e,s,u){const P=u[0],k=u[1],M=u[2]-P,G=u[3]-k;M===0||G===0||(L(e.context,s,M,G,e.subtype,e.backdrop,e.transferMap,P,k,e.offsetX,e.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(s.canvas,0,0),S.restore())}function _(S,e){const s=a.Util.singularValueDecompose2dScale(S);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return e!==void 0?e:s[0]<=u||s[1]<=u}const F=["butt","round","square"],at=["miter","round","bevel"],H={},$={},J=class J{constructor(e,s,u,P,k,{optionalContentConfig:M,markedContentStack:G=null},ot,ut){tt(this,ct);this.ctx=e,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=u,this.canvasFactory=P,this.filterFactory=k,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=G||[],this.optionalContentConfig=M,this.cachedCanvases=new E(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ot,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ut,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,s=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):s}beginDrawing({transform:e,viewport:s,transparency:u=!1,background:P=null}){const k=this.ctx.canvas.width,M=this.ctx.canvas.height,G=this.ctx.fillStyle;if(this.ctx.fillStyle=P||"#ffffff",this.ctx.fillRect(0,0,k,M),this.ctx.fillStyle=G,u){const ot=this.cachedCanvases.getCanvas("transparent",k,M);this.compositeCtx=this.ctx,this.transparentCanvas=ot.canvas,this.ctx=ot.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),h(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(e,s,u,P){const k=e.argsArray,M=e.fnArray;let G=s||0;const ot=k.length;if(ot===G)return G;const ut=ot-G>N&&typeof u=="function",pt=ut?Date.now()+f:0;let gt=0;const vt=this.commonObjs,yt=this.objs;let Q;for(;;){if(P!==void 0&&G===P.nextBreakPoint)return P.breakIt(G,u),G;if(Q=M[G],Q!==a.OPS.dependency)this[Q].apply(this,k[G]);else for(const st of k[G]){const g=st.startsWith("g_")?vt:yt;if(!g.has(st))return g.get(st,u),G}if(G++,G===ot)return G;if(ut&&++gt>N){if(Date.now()>pt)return u(),G;gt=0}}}endDrawing(){X(this,ct,qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const s of e.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);e.clear()}this._cachedBitmapsMap.clear(),X(this,ct,Ye).call(this)}_scaleImage(e,s){const u=e.width,P=e.height;let k=Math.max(Math.hypot(s[0],s[1]),1),M=Math.max(Math.hypot(s[2],s[3]),1),G=u,ot=P,ut="prescale1",pt,gt;for(;k>2&&G>1||M>2&&ot>1;){let vt=G,yt=ot;k>2&&G>1&&(vt=G>=16384?Math.floor(G/2)-1||1:Math.ceil(G/2),k/=G/vt),M>2&&ot>1&&(yt=ot>=16384?Math.floor(ot/2)-1||1:Math.ceil(ot)/2,M/=ot/yt),pt=this.cachedCanvases.getCanvas(ut,vt,yt),gt=pt.context,gt.clearRect(0,0,vt,yt),gt.drawImage(e,0,0,G,ot,0,0,vt,yt),e=pt.canvas,G=vt,ot=yt,ut=ut==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:G,paintHeight:ot}}_createMaskCanvas(e){const s=this.ctx,{width:u,height:P}=e,k=this.current.fillColor,M=this.current.patternFill,G=(0,y.getCurrentTransform)(s);let ot,ut,pt,gt;if((e.bitmap||e.data)&&e.count>1){const K=e.bitmap||e.data.buffer;ut=JSON.stringify(M?G:[G.slice(0,4),k]),ot=this._cachedBitmapsMap.get(K),ot||(ot=new Map,this._cachedBitmapsMap.set(K,ot));const Ct=ot.get(ut);if(Ct&&!M){const St=Math.round(Math.min(G[0],G[2])+G[4]),Ut=Math.round(Math.min(G[1],G[3])+G[5]);return{canvas:Ct,offsetX:St,offsetY:Ut}}pt=Ct}pt||(gt=this.cachedCanvases.getCanvas("maskCanvas",u,P),b(gt.context,e));let vt=a.Util.transform(G,[1/u,0,0,-1/P,0,0]);vt=a.Util.transform(vt,[1,0,0,1,0,-P]);const yt=a.Util.applyTransform([0,0],vt),Q=a.Util.applyTransform([u,P],vt),st=a.Util.normalizeRect([yt[0],yt[1],Q[0],Q[1]]),g=Math.round(st[2]-st[0])||1,D=Math.round(st[3]-st[1])||1,q=this.cachedCanvases.getCanvas("fillCanvas",g,D),Z=q.context,ft=Math.min(yt[0],Q[0]),At=Math.min(yt[1],Q[1]);Z.translate(-ft,-At),Z.transform(...vt),pt||(pt=this._scaleImage(gt.canvas,(0,y.getCurrentTransformInverse)(Z)),pt=pt.img,ot&&M&&ot.set(ut,pt)),Z.imageSmoothingEnabled=_((0,y.getCurrentTransform)(Z),e.interpolate),p(Z,pt,0,0,pt.width,pt.height,0,0,u,P),Z.globalCompositeOperation="source-in";const _t=a.Util.transform((0,y.getCurrentTransformInverse)(Z),[1,0,0,1,-ft,-At]);return Z.fillStyle=M?k.getPattern(s,this,_t,Y.PathType.FILL):k,Z.fillRect(0,0,u,P),ot&&!M&&(this.cachedCanvases.delete("fillCanvas"),ot.set(ut,q.canvas)),{canvas:q.canvas,offsetX:Math.round(ft),offsetY:Math.round(At)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=F[e]}setLineJoin(e){this.ctx.lineJoin=at[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,s){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(e),u.lineDashOffset=s)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[s,u]of e)switch(s){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,P=this.cachedCanvases.getCanvas(u,e,s);this.suspendedCtx=this.ctx,this.ctx=P.context;const k=this.ctx;k.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),n(this.suspendedCtx,k),m(k,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),n(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,u=this.suspendedCtx;r(u,s,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(n(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),n(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,s,u,P,k,M){this.ctx.transform(e,s,u,P,k,M),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,s,u){const P=this.ctx,k=this.current;let M=k.x,G=k.y,ot,ut;const pt=(0,y.getCurrentTransform)(P),gt=pt[0]===0&&pt[3]===0||pt[1]===0&&pt[2]===0,vt=gt?u.slice(0):null;for(let yt=0,Q=0,st=e.length;yt<st;yt++)switch(e[yt]|0){case a.OPS.rectangle:M=s[Q++],G=s[Q++];const g=s[Q++],D=s[Q++],q=M+g,Z=G+D;P.moveTo(M,G),g===0||D===0?P.lineTo(q,Z):(P.lineTo(q,G),P.lineTo(q,Z),P.lineTo(M,Z)),gt||k.updateRectMinMax(pt,[M,G,q,Z]),P.closePath();break;case a.OPS.moveTo:M=s[Q++],G=s[Q++],P.moveTo(M,G),gt||k.updatePathMinMax(pt,M,G);break;case a.OPS.lineTo:M=s[Q++],G=s[Q++],P.lineTo(M,G),gt||k.updatePathMinMax(pt,M,G);break;case a.OPS.curveTo:ot=M,ut=G,M=s[Q+4],G=s[Q+5],P.bezierCurveTo(s[Q],s[Q+1],s[Q+2],s[Q+3],M,G),k.updateCurvePathMinMax(pt,ot,ut,s[Q],s[Q+1],s[Q+2],s[Q+3],M,G,vt),Q+=6;break;case a.OPS.curveTo2:ot=M,ut=G,P.bezierCurveTo(M,G,s[Q],s[Q+1],s[Q+2],s[Q+3]),k.updateCurvePathMinMax(pt,ot,ut,M,G,s[Q],s[Q+1],s[Q+2],s[Q+3],vt),M=s[Q+2],G=s[Q+3],Q+=4;break;case a.OPS.curveTo3:ot=M,ut=G,M=s[Q+2],G=s[Q+3],P.bezierCurveTo(s[Q],s[Q+1],M,G,M,G),k.updateCurvePathMinMax(pt,ot,ut,s[Q],s[Q+1],M,G,M,G,vt),Q+=4;break;case a.OPS.closePath:P.closePath();break}gt&&k.updateScalingPathMinMax(pt,vt),k.setCurrentPoint(M,G)}closePath(){this.ctx.closePath()}stroke(e=!0){const s=this.ctx,u=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(s.save(),s.strokeStyle=u.getPattern(s,this,(0,y.getCurrentTransformInverse)(s),Y.PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const s=this.ctx,u=this.current.fillColor,P=this.current.patternFill;let k=!1;P&&(s.save(),s.fillStyle=u.getPattern(s,this,(0,y.getCurrentTransformInverse)(s),Y.PathType.FILL),k=!0);const M=this.current.getClippedPathBoundingBox();this.contentVisible&&M!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),k&&s.restore(),e&&this.consumePath(M)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=H}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,s=this.ctx;if(e===void 0){s.beginPath();return}s.save(),s.beginPath();for(const u of e)s.setTransform(...u.transform),s.translate(u.x,u.y),u.addToPath(s,u.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,s){var pt;const u=this.commonObjs.get(e),P=this.current;if(!u)throw new Error("Can't find font for ".concat(e));if(P.fontMatrix=u.fontMatrix||a.FONT_IDENTITY_MATRIX,(P.fontMatrix[0]===0||P.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+e),s<0?(s=-s,P.fontDirection=-1):P.fontDirection=1,this.current.font=u,this.current.fontSize=s,u.isType3Font)return;const k=u.loadedName||"sans-serif",M=((pt=u.systemFontInfo)==null?void 0:pt.css)||'"'.concat(k,'", ').concat(u.fallbackName);let G="normal";u.black?G="900":u.bold&&(G="bold");const ot=u.italic?"italic":"normal";let ut=s;s<nt?ut=nt:s>O&&(ut=O),this.current.fontSizeScale=s/ut,this.ctx.font="".concat(ot," ").concat(G," ").concat(ut,"px ").concat(M)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,s){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,s){this.setLeading(-s),this.moveText(e,s)}setTextMatrix(e,s,u,P,k,M){this.current.textMatrix=[e,s,u,P,k,M],this.current.textMatrixScale=Math.hypot(e,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,s,u,P){const k=this.ctx,M=this.current,G=M.font,ot=M.textRenderingMode,ut=M.fontSize/M.fontSizeScale,pt=ot&a.TextRenderingMode.FILL_STROKE_MASK,gt=!!(ot&a.TextRenderingMode.ADD_TO_PATH_FLAG),vt=M.patternFill&&!G.missingFile;let yt;(G.disableFontFace||gt||vt)&&(yt=G.getPathGenerator(this.commonObjs,e)),G.disableFontFace||vt?(k.save(),k.translate(s,u),k.beginPath(),yt(k,ut),P&&k.setTransform(...P),(pt===a.TextRenderingMode.FILL||pt===a.TextRenderingMode.FILL_STROKE)&&k.fill(),(pt===a.TextRenderingMode.STROKE||pt===a.TextRenderingMode.FILL_STROKE)&&k.stroke(),k.restore()):((pt===a.TextRenderingMode.FILL||pt===a.TextRenderingMode.FILL_STROKE)&&k.fillText(e,s,u),(pt===a.TextRenderingMode.STROKE||pt===a.TextRenderingMode.FILL_STROKE)&&k.strokeText(e,s,u)),gt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,y.getCurrentTransform)(k),x:s,y:u,fontSize:ut,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const s=e.getImageData(0,0,10,10).data;let u=!1;for(let P=3;P<s.length;P+=4)if(s[P]>0&&s[P]<255){u=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(e){const s=this.current,u=s.font;if(u.isType3Font)return this.showType3Text(e);const P=s.fontSize;if(P===0)return;const k=this.ctx,M=s.fontSizeScale,G=s.charSpacing,ot=s.wordSpacing,ut=s.fontDirection,pt=s.textHScale*ut,gt=e.length,vt=u.vertical,yt=vt?1:-1,Q=u.defaultVMetrics,st=P*s.fontMatrix[0],g=s.textRenderingMode===a.TextRenderingMode.FILL&&!u.disableFontFace&&!s.patternFill;k.save(),k.transform(...s.textMatrix),k.translate(s.x,s.y+s.textRise),ut>0?k.scale(pt,-1):k.scale(pt,1);let D;if(s.patternFill){k.save();const _t=s.fillColor.getPattern(k,this,(0,y.getCurrentTransformInverse)(k),Y.PathType.FILL);D=(0,y.getCurrentTransform)(k),k.restore(),k.fillStyle=_t}let q=s.lineWidth;const Z=s.textMatrixScale;if(Z===0||q===0){const _t=s.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(_t===a.TextRenderingMode.STROKE||_t===a.TextRenderingMode.FILL_STROKE)&&(q=this.getSinglePixelWidth())}else q/=Z;if(M!==1&&(k.scale(M,M),q/=M),k.lineWidth=q,u.isInvalidPDFjsFont){const _t=[];let K=0;for(const Ct of e)_t.push(Ct.unicode),K+=Ct.width;k.fillText(_t.join(""),0,0),s.x+=K*st*pt,k.restore(),this.compose();return}let ft=0,At;for(At=0;At<gt;++At){const _t=e[At];if(typeof _t=="number"){ft+=yt*_t*P/1e3;continue}let K=!1;const Ct=(_t.isSpace?ot:0)+G,St=_t.fontChar,Ut=_t.accent;let Ot,qt,Mt=_t.width;if(vt){const Wt=_t.vmetric||Q,Vt=-(_t.vmetric?Wt[1]:Mt*.5)*st,xt=Wt[2]*st;Mt=Wt?-Wt[0]:Mt,Ot=Vt/M,qt=(ft+xt)/M}else Ot=ft/M,qt=0;if(u.remeasure&&Mt>0){const Wt=k.measureText(St).width*1e3/P*M;if(Mt<Wt&&this.isFontSubpixelAAEnabled){const Vt=Mt/Wt;K=!0,k.save(),k.scale(Vt,1),Ot/=Vt}else Mt!==Wt&&(Ot+=(Mt-Wt)/2e3*P/M)}if(this.contentVisible&&(_t.isInFont||u.missingFile)){if(g&&!Ut)k.fillText(St,Ot,qt);else if(this.paintChar(St,Ot,qt,D),Ut){const Wt=Ot+P*Ut.offset.x/M,Vt=qt-P*Ut.offset.y/M;this.paintChar(Ut.fontChar,Wt,Vt,D)}}const Nt=vt?Mt*st-Ct*ut:Mt*st+Ct*ut;ft+=Nt,K&&k.restore()}vt?s.y-=ft:s.x+=ft*pt,k.restore(),this.compose()}showType3Text(e){const s=this.ctx,u=this.current,P=u.font,k=u.fontSize,M=u.fontDirection,G=P.vertical?1:-1,ot=u.charSpacing,ut=u.wordSpacing,pt=u.textHScale*M,gt=u.fontMatrix||a.FONT_IDENTITY_MATRIX,vt=e.length,yt=u.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Q,st,g,D;if(!(yt||k===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...u.textMatrix),s.translate(u.x,u.y),s.scale(pt,M),Q=0;Q<vt;++Q){if(st=e[Q],typeof st=="number"){D=G*st*k/1e3,this.ctx.translate(D,0),u.x+=D*pt;continue}const q=(st.isSpace?ut:0)+ot,Z=P.charProcOperatorList[st.operatorListId];if(!Z){(0,a.warn)('Type3 character "'.concat(st.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=st,this.save(),s.scale(k,k),s.transform(...gt),this.executeOperatorList(Z),this.restore()),g=a.Util.applyTransform([st.width,0],gt)[0]*k+q,s.translate(g,0),u.x+=g*pt}s.restore(),this.processingType3=null}}setCharWidth(e,s){}setCharWidthAndBounds(e,s,u,P,k,M){this.ctx.rect(u,P,k-u,M-P),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let s;if(e[0]==="TilingPattern"){const u=e[1],P=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),k={createCanvasGraphics:M=>new J(M,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new Y.TilingPattern(e,u,this.ctx,k,P)}else s=this._getPattern(e[1],e[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,s,u){const P=a.Util.makeHexColor(e,s,u);this.ctx.strokeStyle=P,this.current.strokeColor=P}setFillRGBColor(e,s,u){const P=a.Util.makeHexColor(e,s,u);this.ctx.fillStyle=P,this.current.fillColor=P,this.current.patternFill=!1}_getPattern(e,s=null){let u;return this.cachedPatterns.has(e)?u=this.cachedPatterns.get(e):(u=(0,Y.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,u)),s&&(u.matrix=s),u}shadingFill(e){if(!this.contentVisible)return;const s=this.ctx;this.save();const u=this._getPattern(e);s.fillStyle=u.getPattern(s,this,(0,y.getCurrentTransformInverse)(s),Y.PathType.SHADING);const P=(0,y.getCurrentTransformInverse)(s);if(P){const{width:k,height:M}=s.canvas,[G,ot,ut,pt]=a.Util.getAxialAlignedBoundingBox([0,0,k,M],P);this.ctx.fillRect(G,ot,ut-G,pt-ot)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&e.length===6&&this.transform(...e),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),s)){const u=s[2]-s[0],P=s[3]-s[1];this.ctx.rect(s[0],s[1],u,P),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||(0,a.info)("TODO: Support non-isolated groups."),e.knockout&&(0,a.warn)("Knockout groups not supported.");const u=(0,y.getCurrentTransform)(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let P=a.Util.getAxialAlignedBoundingBox(e.bbox,(0,y.getCurrentTransform)(s));const k=[0,0,s.canvas.width,s.canvas.height];P=a.Util.intersect(P,k)||[0,0,0,0];const M=Math.floor(P[0]),G=Math.floor(P[1]);let ot=Math.max(Math.ceil(P[2])-M,1),ut=Math.max(Math.ceil(P[3])-G,1),pt=1,gt=1;ot>C&&(pt=ot/C,ot=C),ut>C&&(gt=ut/C,ut=C),this.current.startNewPathAndClipBox([0,0,ot,ut]);let vt="groupAt"+this.groupLevel;e.smask&&(vt+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(vt,ot,ut),Q=yt.context;Q.scale(1/pt,1/gt),Q.translate(-M,-G),Q.transform(...u),e.smask?this.smaskStack.push({canvas:yt.canvas,context:Q,offsetX:M,offsetY:G,scaleX:pt,scaleY:gt,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(M,G),s.scale(pt,gt),s.save()),n(s,Q),this.ctx=Q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const P=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...P);const k=a.Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],P);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(k)}}beginAnnotation(e,s,u,P,k){if(X(this,ct,qe).call(this),h(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(s)&&s.length===4){const M=s[2]-s[0],G=s[3]-s[1];if(k&&this.annotationCanvasMap){u=u.slice(),u[4]-=s[0],u[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=M,s[3]=G;const[ot,ut]=a.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:pt}=this,gt=Math.ceil(M*this.outputScaleX*pt),vt=Math.ceil(G*this.outputScaleY*pt);this.annotationCanvas=this.canvasFactory.create(gt,vt);const{canvas:yt,context:Q}=this.annotationCanvas;this.annotationCanvasMap.set(e,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Q,this.ctx.save(),this.ctx.setTransform(ot,0,0,-ut,0,G*ut),h(this.ctx)}else h(this.ctx),this.ctx.rect(s[0],s[1],M,G),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...P)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,ct,Ye).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(e.data,e),e.count=s;const u=this.ctx,P=this.processingType3;if(P&&(P.compiled===void 0&&(P.compiled=d(e)),P.compiled)){P.compiled(u);return}const k=this._createMaskCanvas(e),M=k.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(M,k.offsetX,k.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(e,s,u=0,P=0,k,M){if(!this.contentVisible)return;e=this.getObject(e.data,e);const G=this.ctx;G.save();const ot=(0,y.getCurrentTransform)(G);G.transform(s,u,P,k,0,0);const ut=this._createMaskCanvas(e);G.setTransform(1,0,0,1,ut.offsetX-ot[4],ut.offsetY-ot[5]);for(let pt=0,gt=M.length;pt<gt;pt+=2){const vt=a.Util.transform(ot,[s,u,P,k,M[pt],M[pt+1]]),[yt,Q]=a.Util.applyTransform([0,0],vt);G.drawImage(ut.canvas,yt,Q)}G.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const s=this.ctx,u=this.current.fillColor,P=this.current.patternFill;for(const k of e){const{data:M,width:G,height:ot,transform:ut}=k,pt=this.cachedCanvases.getCanvas("maskCanvas",G,ot),gt=pt.context;gt.save();const vt=this.getObject(M,k);b(gt,vt),gt.globalCompositeOperation="source-in",gt.fillStyle=P?u.getPattern(gt,this,(0,y.getCurrentTransformInverse)(s),Y.PathType.FILL):u,gt.fillRect(0,0,G,ot),gt.restore(),s.save(),s.transform(...ut),s.scale(1,-1),p(s,pt.canvas,0,0,G,ot,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(e,s,u,P){if(!this.contentVisible)return;const k=this.getObject(e);if(!k){(0,a.warn)("Dependent image isn't ready yet");return}const M=k.width,G=k.height,ot=[];for(let ut=0,pt=P.length;ut<pt;ut+=2)ot.push({transform:[s,0,0,u,P[ut],P[ut+1]],x:0,y:0,w:M,h:G});this.paintInlineImageXObjectGroup(k,ot)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:s,width:u,height:P}=e,k=this.cachedCanvases.getCanvas("inlineImage",u,P),M=k.context;return M.filter=this.current.transferMaps,M.drawImage(s,0,0),M.filter="none",k.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const s=e.width,u=e.height,P=this.ctx;if(this.save(),!a.isNodeJS){const{filter:G}=P;G!=="none"&&G!==""&&(P.filter="none")}P.scale(1/s,-1/u);let k;if(e.bitmap)k=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)k=e;else{const ot=this.cachedCanvases.getCanvas("inlineImage",s,u).context;w(ot,e),k=this.applyTransferMapsToCanvas(ot)}const M=this._scaleImage(k,(0,y.getCurrentTransformInverse)(P));P.imageSmoothingEnabled=_((0,y.getCurrentTransform)(P),e.interpolate),p(P,M.img,0,0,M.paintWidth,M.paintHeight,0,-u,s,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,s){if(!this.contentVisible)return;const u=this.ctx;let P;if(e.bitmap)P=e.bitmap;else{const k=e.width,M=e.height,ot=this.cachedCanvases.getCanvas("inlineImage",k,M).context;w(ot,e),P=this.applyTransferMapsToCanvas(ot)}for(const k of s)u.save(),u.transform(...k.transform),u.scale(1,-1),p(u,P,k.x,k.y,k.w,k.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,s){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,s){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const u=this.ctx;this.pendingClip&&(s||(this.pendingClip===$?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,y.getCurrentTransform)(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const s=Math.abs(e[0]*e[3]-e[2]*e[1]),u=Math.hypot(e[0],e[2]),P=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(u,P)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:s,b:u,c:P,d:k}=this.ctx.getTransform();let M,G;if(u===0&&P===0){const ot=Math.abs(s),ut=Math.abs(k);if(ot===ut)if(e===0)M=G=1/ot;else{const pt=ot*e;M=G=pt<1?1/pt:1}else if(e===0)M=1/ot,G=1/ut;else{const pt=ot*e,gt=ut*e;M=pt<1?1/pt:1,G=gt<1?1/gt:1}}else{const ot=Math.abs(s*k-u*P),ut=Math.hypot(s,u),pt=Math.hypot(P,k);if(e===0)M=pt/ot,G=ut/ot;else{const gt=e*ot;M=pt>gt?pt/gt:1,G=ut>gt?ut/gt:1}}this._cachedScaleForStroking[0]=M,this._cachedScaleForStroking[1]=G}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:s}=this,{lineWidth:u}=this.current,[P,k]=this.getScaleForStroking();if(s.lineWidth=u||1,P===1&&k===1){s.stroke();return}const M=s.getLineDash();if(e&&s.save(),s.scale(P,k),M.length>0){const G=Math.max(P,k);s.setLineDash(M.map(ot=>ot/G)),s.lineDashOffset/=G}s.stroke(),e&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ct=new WeakSet,qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ye=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const s=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}};let U=J;o.CanvasGraphics=U;for(const S in a.OPS)U.prototype[S]!==void 0&&(U.prototype[a.OPS[S]]=U.prototype[S])}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=v;var a=V(1),y=V(6);const Y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=Y;function z(d,x){if(!x)return;const w=x[2]-x[0],b=x[3]-x[1],n=new Path2D;n.rect(x[0],x[1],w,b),d.clip(n)}class nt{constructor(){this.constructor===nt&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class O extends nt{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let w;this._type==="axial"?w=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)w.addColorStop(b[0],b[1]);return w}getPattern(x,w,b,n){let h;if(n===Y.STROKE||n===Y.FILL){const i=w.current.getClippedPathBoundingBox(n,(0,y.getCurrentTransform)(x))||[0,0,0,0],l=Math.ceil(i[2]-i[0])||1,c=Math.ceil(i[3]-i[1])||1,L=w.cachedCanvases.getCanvas("pattern",l,c,!0),r=L.context;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.beginPath(),r.rect(0,0,r.canvas.width,r.canvas.height),r.translate(-i[0],-i[1]),b=a.Util.transform(b,[1,0,0,1,i[0],i[1]]),r.transform(...w.baseTransform),this.matrix&&r.transform(...this.matrix),z(r,this._bbox),r.fillStyle=this._createGradient(r),r.fill(),h=x.createPattern(L.canvas,"no-repeat");const _=new DOMMatrix(b);h.setTransform(_)}else z(x,this._bbox),h=this._createGradient(x);return h}}function C(d,x,w,b,n,h,i,l){const c=x.coords,L=x.colors,r=d.data,_=d.width*4;let F;c[w+1]>c[b+1]&&(F=w,w=b,b=F,F=h,h=i,i=F),c[b+1]>c[n+1]&&(F=b,b=n,n=F,F=i,i=l,l=F),c[w+1]>c[b+1]&&(F=w,w=b,b=F,F=h,h=i,i=F);const at=(c[w]+x.offsetX)*x.scaleX,H=(c[w+1]+x.offsetY)*x.scaleY,$=(c[b]+x.offsetX)*x.scaleX,U=(c[b+1]+x.offsetY)*x.scaleY,ct=(c[n]+x.offsetX)*x.scaleX,R=(c[n+1]+x.offsetY)*x.scaleY;if(H>=R)return;const B=L[h],J=L[h+1],S=L[h+2],e=L[i],s=L[i+1],u=L[i+2],P=L[l],k=L[l+1],M=L[l+2],G=Math.round(H),ot=Math.round(R);let ut,pt,gt,vt,yt,Q,st,g;for(let D=G;D<=ot;D++){if(D<U){const _t=D<H?0:(H-D)/(H-U);ut=at-(at-$)*_t,pt=B-(B-e)*_t,gt=J-(J-s)*_t,vt=S-(S-u)*_t}else{let _t;D>R?_t=1:U===R?_t=0:_t=(U-D)/(U-R),ut=$-($-ct)*_t,pt=e-(e-P)*_t,gt=s-(s-k)*_t,vt=u-(u-M)*_t}let q;D<H?q=0:D>R?q=1:q=(H-D)/(H-R),yt=at-(at-ct)*q,Q=B-(B-P)*q,st=J-(J-k)*q,g=S-(S-M)*q;const Z=Math.round(Math.min(ut,yt)),ft=Math.round(Math.max(ut,yt));let At=_*D+Z*4;for(let _t=Z;_t<=ft;_t++)q=(ut-_t)/(ut-yt),q<0?q=0:q>1&&(q=1),r[At++]=pt-(pt-Q)*q|0,r[At++]=gt-(gt-st)*q|0,r[At++]=vt-(vt-g)*q|0,r[At++]=255}}function f(d,x,w){const b=x.coords,n=x.colors;let h,i;switch(x.type){case"lattice":const l=x.verticesPerRow,c=Math.floor(b.length/l)-1,L=l-1;for(h=0;h<c;h++){let r=h*l;for(let _=0;_<L;_++,r++)C(d,w,b[r],b[r+1],b[r+l],n[r],n[r+1],n[r+l]),C(d,w,b[r+l+1],b[r+1],b[r+l],n[r+l+1],n[r+1],n[r+l])}break;case"triangles":for(h=0,i=b.length;h<i;h+=3)C(d,w,b[h],b[h+1],b[h+2],n[h],n[h+1],n[h+2]);break;default:throw new Error("illegal figure")}}class N extends nt{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,w,b){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-l,r=Math.ceil(this._bounds[3])-c,_=Math.min(Math.ceil(Math.abs(L*x[0]*1.1)),3e3),F=Math.min(Math.ceil(Math.abs(r*x[1]*1.1)),3e3),at=L/_,H=r/F,$={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/at,scaleY:1/H},U=_+4,ct=F+4,R=b.getCanvas("mesh",U,ct,!1),B=R.context,J=B.createImageData(_,F);if(w){const e=J.data;for(let s=0,u=e.length;s<u;s+=4)e[s]=w[0],e[s+1]=w[1],e[s+2]=w[2],e[s+3]=255}for(const e of this._figures)f(J,e,$);return B.putImageData(J,2,2),{canvas:R.canvas,offsetX:l-2*at,offsetY:c-2*H,scaleX:at,scaleY:H}}getPattern(x,w,b,n){z(x,this._bbox);let h;if(n===Y.SHADING)h=a.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(x));else if(h=a.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const l=a.Util.singularValueDecompose2dScale(this.matrix);h=[h[0]*l[0],h[1]*l[1]]}const i=this._createMeshCanvas(h,n===Y.SHADING?null:this._background,w.cachedCanvases);return n!==Y.SHADING&&(x.setTransform(...w.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(i.offsetX,i.offsetY),x.scale(i.scaleX,i.scaleY),x.createPattern(i.canvas,"no-repeat")}}class j extends nt{getPattern(){return"hotpink"}}function v(d){switch(d[0]){case"RadialAxial":return new O(d);case"Mesh":return new N(d);case"Dummy":return new j}throw new Error("Unknown IR type: ".concat(d[0]))}const m={COLORED:1,UNCOLORED:2},p=class p{constructor(x,w,b,n,h){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=w,this.ctx=b,this.canvasGraphicsFactory=n,this.baseTransform=h}createPatternCanvas(x){const w=this.operatorList,b=this.bbox,n=this.xstep,h=this.ystep,i=this.paintType,l=this.tilingType,c=this.color,L=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+l);const r=b[0],_=b[1],F=b[2],at=b[3],H=a.Util.singularValueDecompose2dScale(this.matrix),$=a.Util.singularValueDecompose2dScale(this.baseTransform),U=[H[0]*$[0],H[1]*$[1]],ct=this.getSizeAndScale(n,this.ctx.canvas.width,U[0]),R=this.getSizeAndScale(h,this.ctx.canvas.height,U[1]),B=x.cachedCanvases.getCanvas("pattern",ct.size,R.size,!0),J=B.context,S=L.createCanvasGraphics(J);S.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(S,i,c);let e=r,s=_,u=F,P=at;return r<0&&(e=0,u+=Math.abs(r)),_<0&&(s=0,P+=Math.abs(_)),J.translate(-(ct.scale*e),-(R.scale*s)),S.transform(ct.scale,0,0,R.scale,0,0),J.save(),this.clipBbox(S,e,s,u,P),S.baseTransform=(0,y.getCurrentTransform)(S.ctx),S.executeOperatorList(w),S.endDrawing(),{canvas:B.canvas,scaleX:ct.scale,scaleY:R.scale,offsetX:e,offsetY:s}}getSizeAndScale(x,w,b){x=Math.abs(x);const n=Math.max(p.MAX_PATTERN_SIZE,w);let h=Math.ceil(x*b);return h>=n?h=n:b=h/x,{scale:b,size:h}}clipBbox(x,w,b,n,h){const i=n-w,l=h-b;x.ctx.rect(w,b,i,l),x.current.updateRectMinMax((0,y.getCurrentTransform)(x.ctx),[w,b,n,h]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,w,b){const n=x.ctx,h=x.current;switch(w){case m.COLORED:const i=this.ctx;n.fillStyle=i.fillStyle,n.strokeStyle=i.strokeStyle,h.fillColor=i.fillStyle,h.strokeColor=i.strokeStyle;break;case m.UNCOLORED:const l=a.Util.makeHexColor(b[0],b[1],b[2]);n.fillStyle=l,n.strokeStyle=l,h.fillColor=l,h.strokeColor=l;break;default:throw new a.FormatError("Unsupported paint type: ".concat(w))}}getPattern(x,w,b,n){let h=b;n!==Y.SHADING&&(h=a.Util.transform(h,w.baseTransform),this.matrix&&(h=a.Util.transform(h,this.matrix)));const i=this.createPatternCanvas(w);let l=new DOMMatrix(h);l=l.translate(i.offsetX,i.offsetY),l=l.scale(1/i.scaleX,1/i.scaleY);const c=x.createPattern(i.canvas,"repeat");return c.setTransform(l),c}};$t(p,"MAX_PATTERN_SIZE",3e3);let E=p;o.TilingPattern=E}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=Y,o.convertToRGBA=y,o.grayToRGBA=nt;var a=V(1);function y(O){switch(O.kind){case a.ImageKind.GRAYSCALE_1BPP:return Y(O);case a.ImageKind.RGB_24BPP:return z(O)}return null}function Y({src:O,srcPos:C=0,dest:f,width:N,height:j,nonBlackColor:v=4294967295,inverseDecode:m=!1}){const E=a.FeatureTest.isLittleEndian?4278190080:255,[p,d]=m?[v,E]:[E,v],x=N>>3,w=N&7,b=O.length;f=new Uint32Array(f.buffer);let n=0;for(let h=0;h<j;h++){for(const l=C+x;C<l;C++){const c=C<b?O[C]:255;f[n++]=c&128?d:p,f[n++]=c&64?d:p,f[n++]=c&32?d:p,f[n++]=c&16?d:p,f[n++]=c&8?d:p,f[n++]=c&4?d:p,f[n++]=c&2?d:p,f[n++]=c&1?d:p}if(w===0)continue;const i=C<b?O[C++]:255;for(let l=0;l<w;l++)f[n++]=i&1<<7-l?d:p}return{srcPos:C,destPos:n}}function z({src:O,srcPos:C=0,dest:f,destPos:N=0,width:j,height:v}){let m=0;const E=O.length>>2,p=new Uint32Array(O.buffer,C,E);if(a.FeatureTest.isLittleEndian){for(;m<E-2;m+=3,N+=4){const d=p[m],x=p[m+1],w=p[m+2];f[N]=d|4278190080,f[N+1]=d>>>24|x<<8|4278190080,f[N+2]=x>>>16|w<<16|4278190080,f[N+3]=w>>>8|4278190080}for(let d=m*4,x=O.length;d<x;d+=3)f[N++]=O[d]|O[d+1]<<8|O[d+2]<<16|4278190080}else{for(;m<E-2;m+=3,N+=4){const d=p[m],x=p[m+1],w=p[m+2];f[N]=d|255,f[N+1]=d<<24|x>>>8|255,f[N+2]=x<<16|w>>>16|255,f[N+3]=w<<8|255}for(let d=m*4,x=O.length;d<x;d+=3)f[N++]=O[d]<<24|O[d+1]<<16|O[d+2]<<8|255}return{srcPos:C,destPos:N}}function nt(O,C){if(a.FeatureTest.isLittleEndian)for(let f=0,N=O.length;f<N;f++)C[f]=O[f]*65793|4278190080;else for(let f=0,N=O.length;f<N;f++)C[f]=O[f]*16843008|255}}),((et,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const V=Object.create(null);o.GlobalWorkerOptions=V,V.workerPort=null,V.workerSrc=""}),((et,o,V)=>{var O,Ss,ws,Ee;Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var a=V(1);const y={DATA:1,ERROR:2},Y={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function z(j){switch(j instanceof Error||typeof j=="object"&&j!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),j.name){case"AbortException":return new a.AbortException(j.message);case"MissingPDFException":return new a.MissingPDFException(j.message);case"PasswordException":return new a.PasswordException(j.message,j.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(j.message,j.status);case"UnknownErrorException":return new a.UnknownErrorException(j.message,j.details);default:return new a.UnknownErrorException(j.message,j.toString())}}class nt{constructor(v,m,E){tt(this,O);this.sourceName=v,this.targetName=m,this.comObj=E,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=p=>{const d=p.data;if(d.targetName!==this.sourceName)return;if(d.stream){X(this,O,ws).call(this,d);return}if(d.callback){const w=d.callbackId,b=this.callbackCapabilities[w];if(!b)throw new Error("Cannot resolve callback ".concat(w));if(delete this.callbackCapabilities[w],d.callback===y.DATA)b.resolve(d.data);else if(d.callback===y.ERROR)b.reject(z(d.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[d.action];if(!x)throw new Error("Unknown action from worker: ".concat(d.action));if(d.callbackId){const w=this.sourceName,b=d.sourceName;new Promise(function(n){n(x(d.data))}).then(function(n){E.postMessage({sourceName:w,targetName:b,callback:y.DATA,callbackId:d.callbackId,data:n})},function(n){E.postMessage({sourceName:w,targetName:b,callback:y.ERROR,callbackId:d.callbackId,reason:z(n)})});return}if(d.streamId){X(this,O,Ss).call(this,d);return}x(d.data)},E.addEventListener("message",this._onComObjOnMessage)}on(v,m){const E=this.actionHandler;if(E[v])throw new Error('There is already an actionName called "'.concat(v,'"'));E[v]=m}send(v,m,E){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:m},E)}sendWithPromise(v,m,E){const p=this.callbackId++,d=new a.PromiseCapability;this.callbackCapabilities[p]=d;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:p,data:m},E)}catch(x){d.reject(x)}return d.promise}sendWithStream(v,m,E,p){const d=this.streamId++,x=this.sourceName,w=this.targetName,b=this.comObj;return new ReadableStream({start:n=>{const h=new a.PromiseCapability;return this.streamControllers[d]={controller:n,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:x,targetName:w,action:v,streamId:d,data:m,desiredSize:n.desiredSize},p),h.promise},pull:n=>{const h=new a.PromiseCapability;return this.streamControllers[d].pullCall=h,b.postMessage({sourceName:x,targetName:w,stream:Y.PULL,streamId:d,desiredSize:n.desiredSize}),h.promise},cancel:n=>{(0,a.assert)(n instanceof Error,"cancel must have a valid reason");const h=new a.PromiseCapability;return this.streamControllers[d].cancelCall=h,this.streamControllers[d].isClosed=!0,b.postMessage({sourceName:x,targetName:w,stream:Y.CANCEL,streamId:d,reason:z(n)}),h.promise}},E)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}O=new WeakSet,Ss=function(v){const m=v.streamId,E=this.sourceName,p=v.sourceName,d=this.comObj,x=this,w=this.actionHandler[v.action],b={enqueue(n,h=1,i){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=h,l>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),d.postMessage({sourceName:E,targetName:p,stream:Y.ENQUEUE,streamId:m,chunk:n},i)},close(){this.isCancelled||(this.isCancelled=!0,d.postMessage({sourceName:E,targetName:p,stream:Y.CLOSE,streamId:m}),delete x.streamSinks[m])},error(n){(0,a.assert)(n instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,d.postMessage({sourceName:E,targetName:p,stream:Y.ERROR,streamId:m,reason:z(n)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[m]=b,new Promise(function(n){n(w(v.data,b))}).then(function(){d.postMessage({sourceName:E,targetName:p,stream:Y.START_COMPLETE,streamId:m,success:!0})},function(n){d.postMessage({sourceName:E,targetName:p,stream:Y.START_COMPLETE,streamId:m,reason:z(n)})})},ws=function(v){const m=v.streamId,E=this.sourceName,p=v.sourceName,d=this.comObj,x=this.streamControllers[m],w=this.streamSinks[m];switch(v.stream){case Y.START_COMPLETE:v.success?x.startCall.resolve():x.startCall.reject(z(v.reason));break;case Y.PULL_COMPLETE:v.success?x.pullCall.resolve():x.pullCall.reject(z(v.reason));break;case Y.PULL:if(!w){d.postMessage({sourceName:E,targetName:p,stream:Y.PULL_COMPLETE,streamId:m,success:!0});break}w.desiredSize<=0&&v.desiredSize>0&&w.sinkCapability.resolve(),w.desiredSize=v.desiredSize,new Promise(function(b){var n;b((n=w.onPull)==null?void 0:n.call(w))}).then(function(){d.postMessage({sourceName:E,targetName:p,stream:Y.PULL_COMPLETE,streamId:m,success:!0})},function(b){d.postMessage({sourceName:E,targetName:p,stream:Y.PULL_COMPLETE,streamId:m,reason:z(b)})});break;case Y.ENQUEUE:if((0,a.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(v.chunk);break;case Y.CLOSE:if((0,a.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),X(this,O,Ee).call(this,x,m);break;case Y.ERROR:(0,a.assert)(x,"error should have stream controller"),x.controller.error(z(v.reason)),X(this,O,Ee).call(this,x,m);break;case Y.CANCEL_COMPLETE:v.success?x.cancelCall.resolve():x.cancelCall.reject(z(v.reason)),X(this,O,Ee).call(this,x,m);break;case Y.CANCEL:if(!w)break;new Promise(function(b){var n;b((n=w.onCancel)==null?void 0:n.call(w,z(v.reason)))}).then(function(){d.postMessage({sourceName:E,targetName:p,stream:Y.CANCEL_COMPLETE,streamId:m,success:!0})},function(b){d.postMessage({sourceName:E,targetName:p,stream:Y.CANCEL_COMPLETE,streamId:m,reason:z(b)})}),w.sinkCapability.reject(z(v.reason)),w.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},Ee=async function(v,m){var E,p,d;await Promise.allSettled([(E=v.startCall)==null?void 0:E.promise,(p=v.pullCall)==null?void 0:p.promise,(d=v.cancelCall)==null?void 0:d.promise]),delete this.streamControllers[m]},o.MessageHandler=nt}),((et,o,V)=>{var Y,z;Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var a=V(1);class y{constructor({parsedData:O,rawData:C}){tt(this,Y);tt(this,z);rt(this,Y,O),rt(this,z,C)}getRaw(){return t(this,z)}get(O){var C;return(C=t(this,Y).get(O))!=null?C:null}getAll(){return(0,a.objectFromMap)(t(this,Y))}has(O){return t(this,Y).has(O)}}Y=new WeakMap,z=new WeakMap,o.Metadata=y}),((et,o,V)=>{var O,C,f,N,j,v,Ke;Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var a=V(1),y=V(8);const Y=Symbol("INTERNAL");class z{constructor(p,d){tt(this,O,!0);this.name=p,this.intent=d}get visible(){return t(this,O)}_setVisible(p,d){p!==Y&&(0,a.unreachable)("Internal method `_setVisible` called."),rt(this,O,d)}}O=new WeakMap;class nt{constructor(p){tt(this,v);tt(this,C,null);tt(this,f,new Map);tt(this,N,null);tt(this,j,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,rt(this,j,p.order);for(const d of p.groups)t(this,f).set(d.id,new z(d.name,d.intent));if(p.baseState==="OFF")for(const d of t(this,f).values())d._setVisible(Y,!1);for(const d of p.on)t(this,f).get(d)._setVisible(Y,!0);for(const d of p.off)t(this,f).get(d)._setVisible(Y,!1);rt(this,N,this.getHash())}}isVisible(p){if(t(this,f).size===0)return!0;if(!p)return(0,a.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return t(this,f).has(p.id)?t(this,f).get(p.id).visible:((0,a.warn)("Optional content group not found: ".concat(p.id)),!0);if(p.type==="OCMD"){if(p.expression)return X(this,v,Ke).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const d of p.ids){if(!t(this,f).has(d))return(0,a.warn)("Optional content group not found: ".concat(d)),!0;if(t(this,f).get(d).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const d of p.ids){if(!t(this,f).has(d))return(0,a.warn)("Optional content group not found: ".concat(d)),!0;if(!t(this,f).get(d).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const d of p.ids){if(!t(this,f).has(d))return(0,a.warn)("Optional content group not found: ".concat(d)),!0;if(!t(this,f).get(d).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const d of p.ids){if(!t(this,f).has(d))return(0,a.warn)("Optional content group not found: ".concat(d)),!0;if(t(this,f).get(d).visible)return!1}return!0}return(0,a.warn)("Unknown optional content policy ".concat(p.policy,".")),!0}return(0,a.warn)("Unknown group type ".concat(p.type,".")),!0}setVisibility(p,d=!0){if(!t(this,f).has(p)){(0,a.warn)("Optional content group not found: ".concat(p));return}t(this,f).get(p)._setVisible(Y,!!d),rt(this,C,null)}get hasInitialVisibility(){return t(this,N)===null||this.getHash()===t(this,N)}getOrder(){return t(this,f).size?t(this,j)?t(this,j).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,a.objectFromMap)(t(this,f)):null}getGroup(p){return t(this,f).get(p)||null}getHash(){if(t(this,C)!==null)return t(this,C);const p=new y.MurmurHash3_64;for(const[d,x]of t(this,f))p.update("".concat(d,":").concat(x.visible));return rt(this,C,p.hexdigest())}}C=new WeakMap,f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakSet,Ke=function(p){const d=p.length;if(d<2)return!0;const x=p[0];for(let w=1;w<d;w++){const b=p[w];let n;if(Array.isArray(b))n=X(this,v,Ke).call(this,b);else if(t(this,f).has(b))n=t(this,f).get(b).visible;else return(0,a.warn)("Optional content group not found: ".concat(b)),!0;switch(x){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return x==="And"},o.OptionalContentConfig=nt}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var a=V(1),y=V(6);class Y{constructor({length:C,initialData:f,progressiveDone:N=!1,contentDispositionFilename:j=null,disableRange:v=!1,disableStream:m=!1},E){if((0,a.assert)(E,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=j,(f==null?void 0:f.length)>0){const p=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=E,this._isStreamingSupported=!m,this._isRangeSupported=!v,this._contentLength=C,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,d)=>{this._onReceiveData({begin:p,chunk:d})}),this._pdfDataRangeTransport.addProgressListener((p,d)=>{this._onProgress({loaded:p,total:d})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:C,chunk:f}){const N=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(C===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const j=this._rangeReaders.some(function(v){return v._begin!==C?!1:(v._enqueue(N),!0)});(0,a.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var C,f;return(f=(C=this._fullRequestReader)==null?void 0:C._loaded)!=null?f:0}_onProgress(C){var f,N,j,v;C.total===void 0?(N=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||N.call(f,{loaded:C.loaded}):(v=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||v.call(j,{loaded:C.loaded,total:C.total})}_onProgressiveDone(){var C;(C=this._fullRequestReader)==null||C.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const f=this._rangeReaders.indexOf(C);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new z(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,f){if(f<=this._progressiveDataLength)return null;const N=new nt(this,C,f);return this._pdfDataRangeTransport.requestDataRange(C,f),this._rangeReaders.push(N),N}cancelAllRequests(C){var f;(f=this._fullRequestReader)==null||f.cancel(C);for(const N of this._rangeReaders.slice(0))N.cancel(C);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=Y;class z{constructor(C,f,N=!1,j=null){this._stream=C,this._done=N||!1,this._filename=(0,y.isPdfFile)(j)?j:null,this._queuedChunks=f||[],this._loaded=0;for(const v of this._queuedChunks)this._loaded+=v.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new a.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nt{constructor(C,f,N){this._stream=C,this._begin=f,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(this._requests.length===0)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new a.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var a=V(1),y=V(20);function Y(N,j,v){return{method:"GET",headers:N,signal:v.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function z(N){const j=new Headers;for(const v in N){const m=N[v];m!==void 0&&j.append(v,m)}return j}function nt(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,a.warn)("getArrayBuffer - unexpected data format: ".concat(N)),new Uint8Array(N).buffer)}class O{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j,v;return(v=(j=this._fullRequestReader)==null?void 0:j._loaded)!=null?v:0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C(this),this._fullRequestReader}getRangeReader(j,v){if(v<=this._progressiveDataLength)return null;const m=new f(this,j,v);return this._rangeRequestReaders.push(m),m}cancelAllRequests(j){var v;(v=this._fullRequestReader)==null||v.cancel(j);for(const m of this._rangeRequestReaders.slice(0))m.cancel(j)}}o.PDFFetchStream=O;class C{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const v=j.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=new a.PromiseCapability,this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=z(this._stream.httpHeaders);const m=v.url;fetch(m,Y(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,y.validateResponseStatus)(E.status))throw(0,y.createResponseStatusError)(E.status,m);this._reader=E.body.getReader(),this._headersCapability.resolve();const p=w=>E.headers.get(w),{allowRangeRequests:d,suggestedLength:x}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=x||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:j,done:v}=await this._reader.read();return v?{value:j,done:v}:(this._loaded+=j.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nt(j),done:!1})}cancel(j){var v;(v=this._reader)==null||v.cancel(j),this._abortController.abort()}}class f{constructor(j,v,m){this._stream=j,this._reader=null,this._loaded=0;const E=j.source;this._withCredentials=E.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=z(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(v,"-").concat(m-1));const p=E.url;fetch(p,Y(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,y.validateResponseStatus)(d.status))throw(0,y.createResponseStatusError)(d.status,p);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:j,done:v}=await this._reader.read();return v?{value:j,done:v}:(this._loaded+=j.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:nt(j),done:!1})}cancel(j){var v;(v=this._reader)==null||v.cancel(j),this._abortController.abort()}}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=O,o.extractFilenameFromHeader=nt,o.validateRangeRequestCapabilities=z,o.validateResponseStatus=C;var a=V(1),y=V(21),Y=V(6);function z({getResponseHeader:f,isHttp:N,rangeChunkSize:j,disableRange:v}){const m={allowRangeRequests:!1,suggestedLength:void 0},E=parseInt(f("Content-Length"),10);return!Number.isInteger(E)||(m.suggestedLength=E,E<=2*j)||v||!N||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function nt(f){const N=f("Content-Disposition");if(N){let j=(0,y.getFilenameFromContentDispositionHeader)(N);if(j.includes("%"))try{j=decodeURIComponent(j)}catch(v){}if((0,Y.isPdfFile)(j))return j}return null}function O(f,N){return f===404||f===0&&N.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+N+'".'):new a.UnexpectedResponseException("Unexpected server response (".concat(f,') while retrieving PDF "').concat(N,'".'),f)}function C(f){return f===200||f===206}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=y;var a=V(1);function y(Y){let z=!0,nt=O("filename\\*","i").exec(Y);if(nt){nt=nt[1];let E=j(nt);return E=unescape(E),E=v(E),E=m(E),f(E)}if(nt=N(Y),nt){const E=m(nt);return f(E)}if(nt=O("filename","i").exec(Y),nt){nt=nt[1];let E=j(nt);return E=m(E),f(E)}function O(E,p){return new RegExp("(?:^|;)\\s*"+E+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function C(E,p){if(E){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const d=new TextDecoder(E,{fatal:!0}),x=(0,a.stringToBytes)(p);p=d.decode(x),z=!1}catch(d){}}return p}function f(E){return z&&/[\x80-\xff]/.test(E)&&(E=C("utf-8",E),z&&(E=C("iso-8859-1",E))),E}function N(E){const p=[];let d;const x=O("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=x.exec(E))!==null;){let[,b,n,h]=d;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[n,h]}const w=[];for(let b=0;b<p.length&&b in p;++b){let[n,h]=p[b];h=j(h),n&&(h=unescape(h),b===0&&(h=v(h))),w.push(h)}return w.join("")}function j(E){if(E.startsWith('"')){const p=E.slice(1).split('\\"');for(let d=0;d<p.length;++d){const x=p[d].indexOf('"');x!==-1&&(p[d]=p[d].slice(0,x),p.length=d+1),p[d]=p[d].replaceAll(/\\(.)/g,"$1")}E=p.join('"')}return E}function v(E){const p=E.indexOf("'");if(p===-1)return E;const d=E.slice(0,p),w=E.slice(p+1).replace(/^[^']*'/,"");return C(d,w)}function m(E){return!E.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(E)?E:E.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,d,x,w){if(x==="q"||x==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,n){return String.fromCharCode(parseInt(n,16))}),C(d,w);try{w=atob(w)}catch(b){}return C(d,w)})}return""}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var a=V(1),y=V(20);const Y=200,z=206;function nt(j){const v=j.response;return typeof v!="string"?v:(0,a.stringToBytes)(v).buffer}class O{constructor(v,m={}){this.url=v,this.isHttp=/^https?:/i.test(v),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(v,m,E){const p={begin:v,end:m};for(const d in E)p[d]=E[d];return this.request(p)}requestFull(v){return this.request(v)}request(v){const m=new XMLHttpRequest,E=this.currXhrId++,p=this.pendingRequests[E]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const d in this.httpHeaders){const x=this.httpHeaders[d];x!==void 0&&m.setRequestHeader(d,x)}return this.isHttp&&"begin"in v&&"end"in v?(m.setRequestHeader("Range","bytes=".concat(v.begin,"-").concat(v.end-1)),p.expectedStatus=z):p.expectedStatus=Y,m.responseType="arraybuffer",v.onError&&(m.onerror=function(d){v.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,E),m.onprogress=this.onProgress.bind(this,E),p.onHeadersReceived=v.onHeadersReceived,p.onDone=v.onDone,p.onError=v.onError,p.onProgress=v.onProgress,m.send(null),E}onProgress(v,m){var p;const E=this.pendingRequests[v];E&&((p=E.onProgress)==null||p.call(E,m))}onStateChange(v,m){var b,n,h;const E=this.pendingRequests[v];if(!E)return;const p=E.xhr;if(p.readyState>=2&&E.onHeadersReceived&&(E.onHeadersReceived(),delete E.onHeadersReceived),p.readyState!==4||!(v in this.pendingRequests))return;if(delete this.pendingRequests[v],p.status===0&&this.isHttp){(b=E.onError)==null||b.call(E,p.status);return}const d=p.status||Y;if(!(d===Y&&E.expectedStatus===z)&&d!==E.expectedStatus){(n=E.onError)==null||n.call(E,p.status);return}const w=nt(p);if(d===z){const i=p.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(i);E.onDone({begin:parseInt(l[1],10),chunk:w})}else w?E.onDone({begin:0,chunk:w}):(h=E.onError)==null||h.call(E,p.status)}getRequestXhr(v){return this.pendingRequests[v].xhr}isPendingRequest(v){return v in this.pendingRequests}abortRequest(v){const m=this.pendingRequests[v].xhr;delete this.pendingRequests[v],m.abort()}}class C{constructor(v){this._source=v,this._manager=new O(v.url,{httpHeaders:v.httpHeaders,withCredentials:v.withCredentials}),this._rangeChunkSize=v.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(v){const m=this._rangeRequestReaders.indexOf(v);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(v,m){const E=new N(this._manager,v,m);return E.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(E),E}cancelAllRequests(v){var m;(m=this._fullRequestReader)==null||m.cancel(v);for(const E of this._rangeRequestReaders.slice(0))E.cancel(v)}}o.PDFNetworkStream=C;class f{constructor(v,m){this._manager=v;const E={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=v.requestFull(E),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const v=this._fullRequestId,m=this._manager.getRequestXhr(v),E=x=>m.getResponseHeader(x),{allowRangeRequests:p,suggestedLength:d}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(E),this._isRangeSupported&&this._manager.abortRequest(v),this._headersReceivedCapability.resolve()}_onDone(v){if(v&&(this._requests.length>0?this._requests.shift().resolve({value:v.chunk,done:!1}):this._cachedChunks.push(v.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(v){this._storedError=(0,y.createResponseStatusError)(v,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(v){var m;(m=this.onProgress)==null||m.call(this,{loaded:v.loaded,total:v.lengthComputable?v.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new a.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._headersReceivedCapability.reject(v);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(v,m,E){this._manager=v;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._requestId=v.requestRange(m,E,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var v;(v=this.onClosed)==null||v.call(this,this)}_onDone(v){const m=v.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(v){this._storedError=(0,y.createResponseStatusError)(v,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(v){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:v.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new a.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var a=V(1),y=V(20);const Y=/^file:\/\/\/[a-zA-Z]:\//;function z(E){const p=require$$5,d=p.parse(E);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(E)?p.parse("file:///".concat(E)):(d.host||(d.protocol="file:"),d)}class nt{constructor(p){this.source=p,this.url=z(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p,d;return(d=(p=this._fullRequestReader)==null?void 0:p._loaded)!=null?d:0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v(this):new N(this),this._fullRequestReader}getRangeReader(p,d){if(d<=this._progressiveDataLength)return null;const x=this.isFsUrl?new m(this,p,d):new j(this,p,d);return this._rangeRequestReaders.push(x),x}cancelAllRequests(p){var d;(d=this._fullRequestReader)==null||d.cancel(p);for(const x of this._rangeRequestReaders.slice(0))x.cancel(p)}}o.PDFNodeStream=nt;class O{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const d=p.source;this._contentLength=d.length,this._loaded=0,this._filename=null,this._disableRange=d.disableRange||!1,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=p.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",d=>{this._error(d)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const d=p.source;this._isStreamingSupported=!d.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=p.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",d=>{this._error(d)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(E,p){return{protocol:E.protocol,auth:E.auth,host:E.hostname,port:E.port,path:E.path,method:"GET",headers:p}}class N extends O{constructor(p){super(p);const d=x=>{if(x.statusCode===404){const h=new a.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(x);const w=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:b,suggestedLength:n}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=n||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(w)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(f(this._url,p.httpHeaders),d)}else{const x=require$$5;this._request=x.request(f(this._url,p.httpHeaders),d)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class j extends C{constructor(p,d,x){super(p),this._httpHeaders={};for(const b in p.httpHeaders){const n=p.httpHeaders[b];n!==void 0&&(this._httpHeaders[b]=n)}this._httpHeaders.Range="bytes=".concat(d,"-").concat(x-1);const w=b=>{if(b.statusCode===404){const n=new a.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=n;return}this._setReadableStream(b)};if(this._request=null,this._url.protocol==="http:"){const b=require$$5;this._request=b.request(f(this._url,this._httpHeaders),w)}else{const b=require$$5;this._request=b.request(f(this._url,this._httpHeaders),w)}this._request.on("error",b=>{this._storedError=b}),this._request.end()}}class v extends O{constructor(p){super(p);let d=decodeURIComponent(this._url.path);Y.test(this._url.href)&&(d=d.replace(/^\//,""));const x=require$$5;x.lstat(d,(w,b)=>{if(w){w.code==="ENOENT"&&(w=new a.MissingPDFException('Missing PDF "'.concat(d,'".'))),this._storedError=w,this._headersCapability.reject(w);return}this._contentLength=b.size,this._setReadableStream(x.createReadStream(d)),this._headersCapability.resolve()})}}class m extends C{constructor(p,d,x){super(p);let w=decodeURIComponent(this._url.path);Y.test(this._url.href)&&(w=w.replace(/^\//,""));const b=require$$5;this._setReadableStream(b.createReadStream(w,{start:d,end:x-1}))}}}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var a=V(6),y=V(1);const Y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},z="http://www.w3.org/XML/1998/namespace",nt="http://www.w3.org/1999/xlink",O=["butt","round","square"],C=["miter","round","bevel"],f=function(b,n="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([b],{type:n}));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l="data:".concat(n,";base64,");for(let c=0,L=b.length;c<L;c+=3){const r=b[c]&255,_=b[c+1]&255,F=b[c+2]&255,at=r>>2,H=(r&3)<<4|_>>4,$=c+1<L?(_&15)<<2|F>>6:64,U=c+2<L?F&63:64;l+=i[at]+i[H]+i[$]+i[U]}return l},N=(function(){const b=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,h=new Int32Array(256);for(let F=0;F<256;F++){let at=F;for(let H=0;H<8;H++)at=at&1?3988292384^at>>1&2147483647:at>>1&2147483647;h[F]=at}function i(F,at,H){let $=-1;for(let U=at;U<H;U++){const ct=($^F[U])&255,R=h[ct];$=$>>>8^R}return $^-1}function l(F,at,H,$){let U=$;const ct=at.length;H[U]=ct>>24&255,H[U+1]=ct>>16&255,H[U+2]=ct>>8&255,H[U+3]=ct&255,U+=4,H[U]=F.charCodeAt(0)&255,H[U+1]=F.charCodeAt(1)&255,H[U+2]=F.charCodeAt(2)&255,H[U+3]=F.charCodeAt(3)&255,U+=4,H.set(at,U),U+=at.length;const R=i(H,$+4,U);H[U]=R>>24&255,H[U+1]=R>>16&255,H[U+2]=R>>8&255,H[U+3]=R&255}function c(F,at,H){let $=1,U=0;for(let ct=at;ct<H;++ct)$=($+(F[ct]&255))%65521,U=(U+$)%65521;return U<<16|$}function L(F){if(!y.isNodeJS)return r(F);try{const at=parseInt(process.versions.node)>=8?F:Buffer.from(F),H=require$$5.deflateSync(at,{level:9});return H instanceof Uint8Array?H:new Uint8Array(H)}catch(at){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return r(F)}function r(F){let at=F.length;const H=65535,$=Math.ceil(at/H),U=new Uint8Array(2+at+$*5+4);let ct=0;U[ct++]=120,U[ct++]=156;let R=0;for(;at>H;)U[ct++]=0,U[ct++]=255,U[ct++]=255,U[ct++]=0,U[ct++]=0,U.set(F.subarray(R,R+H),ct),ct+=H,R+=H,at-=H;U[ct++]=1,U[ct++]=at&255,U[ct++]=at>>8&255,U[ct++]=~at&65535&255,U[ct++]=(~at&65535)>>8&255,U.set(F.subarray(R),ct),ct+=F.length-R;const B=c(F,0,F.length);return U[ct++]=B>>24&255,U[ct++]=B>>16&255,U[ct++]=B>>8&255,U[ct++]=B&255,U}function _(F,at,H,$){const U=F.width,ct=F.height;let R,B,J;const S=F.data;switch(at){case y.ImageKind.GRAYSCALE_1BPP:B=0,R=1,J=U+7>>3;break;case y.ImageKind.RGB_24BPP:B=2,R=8,J=U*3;break;case y.ImageKind.RGBA_32BPP:B=6,R=8,J=U*4;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+J)*ct);let s=0,u=0;for(let ut=0;ut<ct;++ut)e[s++]=0,e.set(S.subarray(u,u+J),s),u+=J,s+=J;if(at===y.ImageKind.GRAYSCALE_1BPP&&$){s=0;for(let ut=0;ut<ct;ut++){s++;for(let pt=0;pt<J;pt++)e[s++]^=255}}const P=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,U&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,R,B,0,0,0]),k=L(e),M=b.length+n*3+P.length+k.length,G=new Uint8Array(M);let ot=0;return G.set(b,ot),ot+=b.length,l("IHDR",P,G,ot),ot+=n+P.length,l("IDATA",k,G,ot),ot+=n+k.length,l("IEND",new Uint8Array(0),G,ot),f(G,"image/png",H)}return function(at,H,$){const U=at.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:at.kind;return _(at,U,H,$)}})();class j{constructor(){this.fontSizeScale=1,this.fontWeight=Y.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(n,h){this.x=n,this.y=h}}function v(b){let n=[];const h=[];for(const i of b){if(i.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),h.push(n),n=n.at(-1).items;continue}i.fn==="restore"?n=h.pop():n.push(i)}return n}function m(b){if(Number.isInteger(b))return b.toString();const n=b.toFixed(10);let h=n.length-1;if(n[h]!=="0")return n;do h--;while(n[h]==="0");return n.substring(0,n[h]==="."?h:h+1)}function E(b){if(b[4]===0&&b[5]===0){if(b[1]===0&&b[2]===0)return b[0]===1&&b[3]===1?"":"scale(".concat(m(b[0])," ").concat(m(b[3]),")");if(b[0]===b[3]&&b[1]===-b[2]){const n=Math.acos(b[0])*180/Math.PI;return"rotate(".concat(m(n),")")}}else if(b[0]===1&&b[1]===0&&b[2]===0&&b[3]===1)return"translate(".concat(m(b[4])," ").concat(m(b[5]),")");return"matrix(".concat(m(b[0])," ").concat(m(b[1])," ").concat(m(b[2])," ").concat(m(b[3])," ").concat(m(b[4])," ")+"".concat(m(b[5]),")")}let p=0,d=0,x=0;class w{constructor(n,h,i=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new j,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const l in y.OPS)this._operatorIdMapping[y.OPS[l]]=l}getObject(n,h=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):h}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const h=n.fnArray,i=n.argsArray;for(let l=0,c=h.length;l<c;l++)if(h[l]===y.OPS.dependency)for(const L of i[l]){const r=L.startsWith("g_")?this.commonObjs:this.objs,_=new Promise(F=>{r.get(L,F)});this.current.dependencies.push(_)}return Promise.all(this.current.dependencies)}transform(n,h,i,l,c,L){const r=[n,h,i,l,c,L];this.transformMatrix=y.Util.transform(this.transformMatrix,r),this.tgrp=null}getSVG(n,h){this.viewport=h;const i=this._initialize(h);return this.loadDependencies(n).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),i))}convertOpList(n){const h=this._operatorIdMapping,i=n.argsArray,l=n.fnArray,c=[];for(let L=0,r=l.length;L<r;L++){const _=l[L];c.push({fnId:_,fn:h[_],args:i[L]})}return v(c)}executeOpTree(n){for(const h of n){const i=h.fn,l=h.fnId,c=h.args;switch(l|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(c);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case y.OPS.setFont:this.setFont(c);break;case y.OPS.showText:this.showText(c[0]);break;case y.OPS.showSpacedText:this.showText(c[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(c[0],c[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case y.OPS.setHScale:this.setHScale(c[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case y.OPS.setTextRise:this.setTextRise(c[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case y.OPS.setLineWidth:this.setLineWidth(c[0]);break;case y.OPS.setLineJoin:this.setLineJoin(c[0]);break;case y.OPS.setLineCap:this.setLineCap(c[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case y.OPS.setFillColorN:this.setFillColorN(c);break;case y.OPS.shadingFill:this.shadingFill(c[0]);break;case y.OPS.setDash:this.setDash(c[0],c[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case y.OPS.setFlatness:this.setFlatness(c[0]);break;case y.OPS.setGState:this.setGState(c[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case y.OPS.constructPath:this.constructPath(c[0],c[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,y.warn)("Unimplemented operator ".concat(i));break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,h,i,l,c,L){const r=this.current;r.textMatrix=r.lineMatrix=[n,h,i,l,c,L],r.textMatrixScale=Math.hypot(n,h),r.x=r.lineX=0,r.y=r.lineY=0,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(m(r.fontSize),"px")),r.tspan.setAttributeNS(null,"y",m(-r.y)),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtElement.append(r.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=y.IDENTITY_MATRIX,n.lineMatrix=y.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,h){const i=this.current;i.x=i.lineX+=n,i.y=i.lineY+=h,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size","".concat(m(i.fontSize),"px")),i.tspan.setAttributeNS(null,"y",m(-i.y))}showText(n){const h=this.current,i=h.font,l=h.fontSize;if(l===0)return;const c=h.fontSizeScale,L=h.charSpacing,r=h.wordSpacing,_=h.fontDirection,F=h.textHScale*_,at=i.vertical,H=at?1:-1,$=i.defaultVMetrics,U=l*h.fontMatrix[0];let ct=0;for(const J of n){if(J===null){ct+=_*r;continue}else if(typeof J=="number"){ct+=H*J*l/1e3;continue}const S=(J.isSpace?r:0)+L,e=J.fontChar;let s,u,P=J.width;if(at){let M;const G=J.vmetric||$;M=J.vmetric?G[1]:P*.5,M=-M*U;const ot=G[2]*U;P=G?-G[0]:P,s=M/c,u=(ct+ot)/c}else s=ct/c,u=0;(J.isInFont||i.missingFile)&&(h.xcoords.push(h.x+s),at&&h.ycoords.push(-h.y+u),h.tspan.textContent+=e);const k=at?P*U-S*_:P*U+S*_;ct+=k}h.tspan.setAttributeNS(null,"x",h.xcoords.map(m).join(" ")),at?h.tspan.setAttributeNS(null,"y",h.ycoords.map(m).join(" ")):h.tspan.setAttributeNS(null,"y",m(-h.y)),at?h.y-=ct:h.x+=ct*F,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size","".concat(m(h.fontSize),"px")),h.fontStyle!==Y.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==Y.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const R=h.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(R===y.TextRenderingMode.FILL||R===y.TextRenderingMode.FILL_STROKE?(h.fillColor!==Y.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),R===y.TextRenderingMode.STROKE||R===y.TextRenderingMode.FILL_STROKE){const J=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,J)}let B=h.textMatrix;h.textRise!==0&&(B=B.slice(),B[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform","".concat(E(B)," scale(").concat(m(F),", -1)")),h.txtElement.setAttributeNS(z,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(n,h){this.setLeading(-h),this.moveText(n,h)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=f(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(n.loadedName,'";')+" src: url(".concat(h,"); }\n")}setFont(n){const h=this.current,i=this.commonObjs.get(n[0]);let l=n[1];h.font=i,this.embedFonts&&!i.missingFile&&!this.embeddedFonts[i.loadedName]&&(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),h.fontMatrix=i.fontMatrix||y.FONT_IDENTITY_MATRIX;let c="normal";i.black?c="900":i.bold&&(c="bold");const L=i.italic?"italic":"normal";l<0?(l=-l,h.fontDirection=-1):h.fontDirection=1,h.fontSize=l,h.fontFamily=i.loadedName,h.fontWeight=c,h.fontStyle=L,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",m(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const n=this.current;n.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=n.txtElement)!=null&&h.hasChildNodes())&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=O[n]}setLineJoin(n){this.current.lineJoin=C[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,h,i){this.current.strokeColor=y.Util.makeHexColor(n,h,i)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,h,i){this.current.fillColor=y.Util.makeHexColor(n,h,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const{width:h,height:i}=this.viewport,l=y.Util.inverseTransform(this.transformMatrix),[c,L,r,_]=y.Util.getAxialAlignedBoundingBox([0,0,h,i],l),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",c),F.setAttributeNS(null,"y",L),F.setAttributeNS(null,"width",r-c),F.setAttributeNS(null,"height",_-L),F.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&F.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(F)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const h=n[1],i=n[2],l=n[3]||y.IDENTITY_MATRIX,[c,L,r,_]=n[4],F=n[5],at=n[6],H=n[7],$="shading".concat(x++),[U,ct,R,B]=y.Util.normalizeRect([...y.Util.applyTransform([c,L],l),...y.Util.applyTransform([r,_],l)]),[J,S]=y.Util.singularValueDecompose2dScale(l),e=F*J,s=at*S,u=this.svgFactory.createElement("svg:pattern");u.setAttributeNS(null,"id",$),u.setAttributeNS(null,"patternUnits","userSpaceOnUse"),u.setAttributeNS(null,"width",e),u.setAttributeNS(null,"height",s),u.setAttributeNS(null,"x","".concat(U)),u.setAttributeNS(null,"y","".concat(ct));const P=this.svg,k=this.transformMatrix,M=this.current.fillColor,G=this.current.strokeColor,ot=this.svgFactory.create(R-U,B-ct);if(this.svg=ot,this.transformMatrix=l,H===2){const ut=y.Util.makeHexColor(...h);this.current.fillColor=ut,this.current.strokeColor=ut}return this.executeOpTree(this.convertOpList(i)),this.svg=P,this.transformMatrix=k,this.current.fillColor=M,this.current.strokeColor=G,u.append(ot.childNodes[0]),this.defs.append(u),"url(#".concat($,")")}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const h="shading".concat(x++),i=n[3];let l;switch(n[1]){case"axial":const c=n[4],L=n[5];l=this.svgFactory.createElement("svg:linearGradient"),l.setAttributeNS(null,"id",h),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"x1",c[0]),l.setAttributeNS(null,"y1",c[1]),l.setAttributeNS(null,"x2",L[0]),l.setAttributeNS(null,"y2",L[1]);break;case"radial":const r=n[4],_=n[5],F=n[6],at=n[7];l=this.svgFactory.createElement("svg:radialGradient"),l.setAttributeNS(null,"id",h),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"cx",_[0]),l.setAttributeNS(null,"cy",_[1]),l.setAttributeNS(null,"r",at),l.setAttributeNS(null,"fx",r[0]),l.setAttributeNS(null,"fy",r[1]),l.setAttributeNS(null,"fr",F);break;default:throw new Error("Unknown RadialAxial type: ".concat(n[1]))}for(const c of i){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",c[0]),L.setAttributeNS(null,"stop-color",c[1]),l.append(L)}return this.defs.append(l),"url(#".concat(h,")");case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(n[0]))}}setDash(n,h){this.current.dashArray=n,this.current.dashPhase=h}constructPath(n,h){const i=this.current;let l=i.x,c=i.y,L=[],r=0;for(const _ of n)switch(_|0){case y.OPS.rectangle:l=h[r++],c=h[r++];const F=h[r++],at=h[r++],H=l+F,$=c+at;L.push("M",m(l),m(c),"L",m(H),m(c),"L",m(H),m($),"L",m(l),m($),"Z");break;case y.OPS.moveTo:l=h[r++],c=h[r++],L.push("M",m(l),m(c));break;case y.OPS.lineTo:l=h[r++],c=h[r++],L.push("L",m(l),m(c));break;case y.OPS.curveTo:l=h[r+4],c=h[r+5],L.push("C",m(h[r]),m(h[r+1]),m(h[r+2]),m(h[r+3]),m(l),m(c)),r+=6;break;case y.OPS.curveTo2:L.push("C",m(l),m(c),m(h[r]),m(h[r+1]),m(h[r+2]),m(h[r+3])),l=h[r+2],c=h[r+3],r+=4;break;case y.OPS.curveTo3:l=h[r+2],c=h[r+3],L.push("C",m(h[r]),m(h[r+1]),m(l),m(c),m(l),m(c)),r+=4;break;case y.OPS.closePath:L.push("Z");break}L=L.join(" "),i.path&&n.length>0&&n[0]!==y.OPS.rectangle&&n[0]!==y.OPS.moveTo?L=i.path.getAttributeNS(null,"d")+L:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(i.path)),i.path.setAttributeNS(null,"d",L),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(l,c)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const h="clippath".concat(p++),i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",h),i.setAttributeNS(null,"transform",E(this.transformMatrix));const l=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?l.setAttributeNS(null,"clip-rule","evenodd"):l.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.append(l),this.defs.append(i),n.activeClipUrl){n.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;i.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl="url(#".concat(h,")"),this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const h="".concat(n.path.getAttributeNS(null,"d"),"Z");n.path.setAttributeNS(null,"d",h)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[h,i]of n)switch(h){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,y.warn)("Unimplemented graphic state operator ".concat(h));break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,h=1){const i=this.current;let l=i.dashArray;h!==1&&l.length>0&&(l=l.map(function(c){return h*c})),n.setAttributeNS(null,"stroke",i.strokeColor),n.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",m(i.miterLimit)),n.setAttributeNS(null,"stroke-linecap",i.lineCap),n.setAttributeNS(null,"stroke-linejoin",i.lineJoin),n.setAttributeNS(null,"stroke-width",m(h*i.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",l.map(m).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",m(h*i.dashPhase)+"px")}eoFill(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const h=this.getObject(n);if(!h){(0,y.warn)("Dependent image with object ID ".concat(n," is not ready yet"));return}this.paintInlineImageXObject(h)}paintInlineImageXObject(n,h){const i=n.width,l=n.height,c=N(n,this.forceDataSchema,!!h),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",m(i)),L.setAttributeNS(null,"height",m(l)),this.current.element=L,this.clip("nonzero");const r=this.svgFactory.createElement("svg:image");r.setAttributeNS(nt,"xlink:href",c),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y",m(-l)),r.setAttributeNS(null,"width",m(i)+"px"),r.setAttributeNS(null,"height",m(l)+"px"),r.setAttributeNS(null,"transform","scale(".concat(m(1/i)," ").concat(m(-1/l),")")),h?h.append(r):this._ensureTransformGroup().append(r)}paintImageMaskXObject(n){const h=this.getObject(n.data,n);if(h.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const i=this.current,l=h.width,c=h.height,L=i.fillColor;i.maskId="mask".concat(d++);const r=this.svgFactory.createElement("svg:mask");r.setAttributeNS(null,"id",i.maskId);const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width",m(l)),_.setAttributeNS(null,"height",m(c)),_.setAttributeNS(null,"fill",L),_.setAttributeNS(null,"mask","url(#".concat(i.maskId,")")),this.defs.append(r),this._ensureTransformGroup().append(_),this.paintInlineImageXObject(h,r)}paintFormXObjectBegin(n,h){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),h){const i=h[2]-h[0],l=h[3]-h[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",h[0]),c.setAttributeNS(null,"y",h[1]),c.setAttributeNS(null,"width",m(i)),c.setAttributeNS(null,"height",m(l)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const h=this.svgFactory.create(n.width,n.height),i=this.svgFactory.createElement("svg:defs");h.append(i),this.defs=i;const l=this.svgFactory.createElement("svg:g");return l.setAttributeNS(null,"transform",E(n.transform)),h.append(l),this.svg=l,h}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",E(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}o.SVGGraphics=w}),((et,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class V{static textContent(y){const Y=[],z={items:Y,styles:Object.create(null)};function nt(O){var N;if(!O)return;let C=null;const f=O.name;if(f==="#text")C=O.value;else if(V.shouldBuildText(f))(N=O==null?void 0:O.attributes)!=null&&N.textContent?C=O.attributes.textContent:O.value&&(C=O.value);else return;if(C!==null&&Y.push({str:C}),!!O.children)for(const j of O.children)nt(j)}return nt(y),z}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}o.XfaText=V}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=E,o.updateTextLayer=p;var a=V(1),y=V(6);const Y=1e5,z=30,nt=.8,O=new Map;function C(d,x){let w;if(x&&a.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(d,d).getContext("2d",{alpha:!1});else{const b=document.createElement("canvas");b.width=b.height=d,w=b.getContext("2d",{alpha:!1})}return w}function f(d,x){const w=O.get(d);if(w)return w;const b=C(z,x);b.font="".concat(z,"px ").concat(d);const n=b.measureText("");let h=n.fontBoundingBoxAscent,i=Math.abs(n.fontBoundingBoxDescent);if(h){const c=h/(h+i);return O.set(d,c),b.canvas.width=b.canvas.height=0,c}b.strokeStyle="red",b.clearRect(0,0,z,z),b.strokeText("g",0,0);let l=b.getImageData(0,0,z,z).data;i=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){i=Math.ceil(c/4/z);break}b.clearRect(0,0,z,z),b.strokeText("A",0,z),l=b.getImageData(0,0,z,z).data,h=0;for(let c=0,L=l.length;c<L;c+=4)if(l[c]>0){h=z-Math.floor(c/4/z);break}if(b.canvas.width=b.canvas.height=0,h){const c=h/(h+i);return O.set(d,c),c}return O.set(d,nt),nt}function N(d,x,w){const b=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};d._textDivs.push(b);const h=a.Util.transform(d._transform,x.transform);let i=Math.atan2(h[1],h[0]);const l=w[x.fontName];l.vertical&&(i+=Math.PI/2);const c=Math.hypot(h[2],h[3]),L=c*f(l.fontFamily,d._isOffscreenCanvasSupported);let r,_;i===0?(r=h[4],_=h[5]-L):(r=h[4]+L*Math.sin(i),_=h[5]-L*Math.cos(i));const F="calc(var(--scale-factor)*",at=b.style;d._container===d._rootContainer?(at.left="".concat((100*r/d._pageWidth).toFixed(2),"%"),at.top="".concat((100*_/d._pageHeight).toFixed(2),"%")):(at.left="".concat(F).concat(r.toFixed(2),"px)"),at.top="".concat(F).concat(_.toFixed(2),"px)")),at.fontSize="".concat(F).concat(c.toFixed(2),"px)"),at.fontFamily=l.fontFamily,n.fontSize=c,b.setAttribute("role","presentation"),b.textContent=x.str,b.dir=x.dir,d._fontInspectorEnabled&&(b.dataset.fontName=x.fontName),i!==0&&(n.angle=i*(180/Math.PI));let H=!1;if(x.str.length>1)H=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const $=Math.abs(x.transform[0]),U=Math.abs(x.transform[3]);$!==U&&Math.max($,U)/Math.min($,U)>1.5&&(H=!0)}H&&(n.canvasWidth=l.vertical?x.height:x.width),d._textDivProperties.set(b,n),d._isReadableStream&&d._layoutText(b)}function j(d){const{div:x,scale:w,properties:b,ctx:n,prevFontSize:h,prevFontFamily:i}=d,{style:l}=x;let c="";if(b.canvasWidth!==0&&b.hasText){const{fontFamily:L}=l,{canvasWidth:r,fontSize:_}=b;(h!==_||i!==L)&&(n.font="".concat(_*w,"px ").concat(L),d.prevFontSize=_,d.prevFontFamily=L);const{width:F}=n.measureText(x.textContent);F>0&&(c="scaleX(".concat(r*w/F,")"))}b.angle!==0&&(c="rotate(".concat(b.angle,"deg) ").concat(c)),c.length>0&&(l.transform=c)}function v(d){if(d._canceled)return;const x=d._textDivs,w=d._capability;if(x.length>Y){w.resolve();return}if(!d._isReadableStream)for(const n of x)d._layoutText(n);w.resolve()}class m{constructor({textContentSource:x,container:w,viewport:b,textDivs:n,textDivProperties:h,textContentItemsStr:i,isOffscreenCanvasSupported:l}){var F;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=w,this._textDivs=n||[],this._textContentItemsStr=i||[],this._isOffscreenCanvasSupported=l,this._fontInspectorEnabled=!!((F=globalThis.FontInspector)!=null&&F.enabled),this._reader=null,this._textDivProperties=h||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:C(0,l)};const{pageWidth:c,pageHeight:L,pageX:r,pageY:_}=b.rawDims;this._transform=[1,0,0,-1,-r,_+L],this._pageWidth=c,this._pageHeight=L,(0,y.setLayerDimensions)(w,b),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(x,w){for(const b of x){if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const n=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b.id!==null&&this._container.setAttribute("id","".concat(b.id)),n.append(this._container)}else b.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b.str),N(this,b,w)}}_layoutText(x){const w=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,j(this._layoutTextParams),w.hasText&&this._container.append(x),w.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(){const x=new a.PromiseCapability;let w=Object.create(null);if(this._isReadableStream){const b=()=>{this._reader.read().then(({value:n,done:h})=>{if(h){x.resolve();return}Object.assign(w,n.styles),this._processItems(n.items,w),b()},x.reject)};this._reader=this._textContentSource.getReader(),b()}else if(this._textContentSource){const{items:b,styles:n}=this._textContentSource;this._processItems(b,n),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{w=null,v(this)},this._capability.reject)}}o.TextLayerRenderTask=m;function E(d){!d.textContentSource&&(d.textContent||d.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),d.textContentSource=d.textContent||d.textContentStream);const{container:x,viewport:w}=d,b=getComputedStyle(x),n=b.getPropertyValue("visibility"),h=parseFloat(b.getPropertyValue("--scale-factor"));n==="visible"&&(!h||Math.abs(h-w.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const i=new m(d);return i._render(),i}function p({container:d,viewport:x,textDivs:w,textDivProperties:b,isOffscreenCanvasSupported:n,mustRotate:h=!0,mustRescale:i=!0}){if(h&&(0,y.setLayerDimensions)(d,{rotation:x.rotation}),i){const l=C(0,n),L={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l};for(const r of w)L.properties=b.get(r),L.div=r,j(L)}}}),((et,o,V)=>{var f,N,j,v,m,E,p,d,x,w,b,$e,Se,Je,Qe;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var a=V(1),y=V(4),Y=V(28),z=V(33),nt=V(6),O=V(34);const c=class c{constructor({uiManager:r,pageIndex:_,div:F,accessibilityManager:at,annotationLayer:H,viewport:$,l10n:U}){tt(this,b);tt(this,f);tt(this,N,!1);tt(this,j,null);tt(this,v,this.pointerup.bind(this));tt(this,m,this.pointerdown.bind(this));tt(this,E,new Map);tt(this,p,!1);tt(this,d,!1);tt(this,x,!1);tt(this,w);const ct=[Y.FreeTextEditor,z.InkEditor,O.StampEditor];if(!c._initialized){c._initialized=!0;for(const R of ct)R.initialize(U)}r.registerEditorTypes(ct),rt(this,w,r),this.pageIndex=_,this.div=F,rt(this,f,at),rt(this,j,H),this.viewport=$,t(this,w).addLayer(this)}get isEmpty(){return t(this,E).size===0}updateToolbar(r){t(this,w).updateToolbar(r)}updateMode(r=t(this,w).getMode()){X(this,b,Qe).call(this),r===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),r!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",r===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",r===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",r===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(r){if(!r&&t(this,w).getMode()!==a.AnnotationEditorType.INK)return;if(!r){for(const F of t(this,E).values())if(F.isEmpty()){F.setInBackground();return}}X(this,b,Se).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(r){t(this,w).setEditingState(r)}addCommands(r){t(this,w).addCommands(r)}enable(){this.div.style.pointerEvents="auto";const r=new Set;for(const F of t(this,E).values())F.enableEditing(),F.annotationElementId&&r.add(F.annotationElementId);if(!t(this,j))return;const _=t(this,j).getEditableAnnotations();for(const F of _){if(F.hide(),t(this,w).isDeletedAnnotationElement(F.data.id)||r.has(F.data.id))continue;const at=this.deserialize(F);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var _;rt(this,x,!0),this.div.style.pointerEvents="none";const r=new Set;for(const F of t(this,E).values()){if(F.disableEditing(),!F.annotationElementId||F.serialize()!==null){r.add(F.annotationElementId);continue}(_=this.getEditableAnnotation(F.annotationElementId))==null||_.show(),F.remove()}if(t(this,j)){const F=t(this,j).getEditableAnnotations();for(const at of F){const{id:H}=at.data;r.has(H)||t(this,w).isDeletedAnnotationElement(H)||at.show()}}X(this,b,Qe).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,x,!1)}getEditableAnnotation(r){var _;return((_=t(this,j))==null?void 0:_.getEditableAnnotation(r))||null}setActiveEditor(r){t(this,w).getActive()!==r&&t(this,w).setActiveEditor(r)}enableClick(){this.div.addEventListener("pointerdown",t(this,m)),this.div.addEventListener("pointerup",t(this,v))}disableClick(){this.div.removeEventListener("pointerdown",t(this,m)),this.div.removeEventListener("pointerup",t(this,v))}attach(r){t(this,E).set(r.id,r);const{annotationElementId:_}=r;_&&t(this,w).isDeletedAnnotationElement(_)&&t(this,w).removeDeletedAnnotationElement(r)}detach(r){var _;t(this,E).delete(r.id),(_=t(this,f))==null||_.removePointerInTextLayer(r.contentDiv),!t(this,x)&&r.annotationElementId&&t(this,w).addDeletedAnnotationElement(r)}remove(r){this.detach(r),t(this,w).removeEditor(r),r.div.contains(document.activeElement)&&setTimeout(()=>{t(this,w).focusMainContainer()},0),r.div.remove(),r.isAttachedToDOM=!1,t(this,d)||this.addInkEditorIfNeeded(!1)}changeParent(r){var _;r.parent!==this&&(r.annotationElementId&&(t(this,w).addDeletedAnnotationElement(r.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(r),r.annotationElementId=null),this.attach(r),(_=r.parent)==null||_.detach(r),r.setParent(this),r.div&&r.isAttachedToDOM&&(r.div.remove(),this.div.append(r.div)))}add(r){if(this.changeParent(r),t(this,w).addEditor(r),this.attach(r),!r.isAttachedToDOM){const _=r.render();this.div.append(_),r.isAttachedToDOM=!0}r.fixAndSetPosition(),r.onceAdded(),t(this,w).addToAnnotationStorage(r)}moveEditorInDOM(r){var F;if(!r.isAttachedToDOM)return;const{activeElement:_}=document;r.div.contains(_)&&(r._focusEventsAllowed=!1,setTimeout(()=>{r.div.contains(document.activeElement)?r._focusEventsAllowed=!0:(r.div.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),_.focus())},0)),r._structTreeParentId=(F=t(this,f))==null?void 0:F.moveElementInDOM(this.div,r.div,r.contentDiv,!0)}addOrRebuild(r){r.needsToBeRebuilt()?r.rebuild():this.add(r)}addUndoableEditor(r){const _=()=>r._uiManager.rebuild(r),F=()=>{r.remove()};this.addCommands({cmd:_,undo:F,mustExec:!1})}getNextId(){return t(this,w).getId()}pasteEditor(r,_){t(this,w).updateToolbar(r),t(this,w).updateMode(r);const{offsetX:F,offsetY:at}=X(this,b,Je).call(this),H=this.getNextId(),$=X(this,b,$e).call(this,{parent:this,id:H,x:F,y:at,uiManager:t(this,w),isCentered:!0,..._});$&&this.add($)}deserialize(r){var _;switch((_=r.annotationType)!=null?_:r.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return Y.FreeTextEditor.deserialize(r,this,t(this,w));case a.AnnotationEditorType.INK:return z.InkEditor.deserialize(r,this,t(this,w));case a.AnnotationEditorType.STAMP:return O.StampEditor.deserialize(r,this,t(this,w))}return null}addNewEditor(){X(this,b,Se).call(this,X(this,b,Je).call(this),!0)}setSelected(r){t(this,w).setSelected(r)}toggleSelected(r){t(this,w).toggleSelected(r)}isSelected(r){return t(this,w).isSelected(r)}unselect(r){t(this,w).unselect(r)}pointerup(r){const{isMac:_}=a.FeatureTest.platform;if(!(r.button!==0||r.ctrlKey&&_)&&r.target===this.div&&t(this,p)){if(rt(this,p,!1),!t(this,N)){rt(this,N,!0);return}if(t(this,w).getMode()===a.AnnotationEditorType.STAMP){t(this,w).unselectAll();return}X(this,b,Se).call(this,r,!1)}}pointerdown(r){if(t(this,p)){rt(this,p,!1);return}const{isMac:_}=a.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&_||r.target!==this.div)return;rt(this,p,!0);const F=t(this,w).getActive();rt(this,N,!F||F.isEmpty())}findNewParent(r,_,F){const at=t(this,w).findParent(_,F);return at===null||at===this?!1:(at.changeParent(r),!0)}destroy(){var r,_;((r=t(this,w).getActive())==null?void 0:r.parent)===this&&(t(this,w).commitOrRemove(),t(this,w).setActiveEditor(null));for(const F of t(this,E).values())(_=t(this,f))==null||_.removePointerInTextLayer(F.contentDiv),F.setParent(null),F.isAttachedToDOM=!1,F.div.remove();this.div=null,t(this,E).clear(),t(this,w).removeLayer(this)}render({viewport:r}){this.viewport=r,(0,nt.setLayerDimensions)(this.div,r);for(const _ of t(this,w).getEditors(this.pageIndex))this.add(_);this.updateMode()}update({viewport:r}){t(this,w).commitOrRemove(),this.viewport=r,(0,nt.setLayerDimensions)(this.div,{rotation:r.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:r,pageHeight:_}=this.viewport.rawDims;return[r,_]}};f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakMap,x=new WeakMap,w=new WeakMap,b=new WeakSet,$e=function(r){switch(t(this,w).getMode()){case a.AnnotationEditorType.FREETEXT:return new Y.FreeTextEditor(r);case a.AnnotationEditorType.INK:return new z.InkEditor(r);case a.AnnotationEditorType.STAMP:return new O.StampEditor(r)}return null},Se=function(r,_){const F=this.getNextId(),at=X(this,b,$e).call(this,{parent:this,id:F,x:r.offsetX,y:r.offsetY,uiManager:t(this,w),isCentered:_});return at&&this.add(at),at},Je=function(){const{x:r,y:_,width:F,height:at}=this.div.getBoundingClientRect(),H=Math.max(0,r),$=Math.max(0,_),U=Math.min(window.innerWidth,r+F),ct=Math.min(window.innerHeight,_+at),R=(H+U)/2-r,B=($+ct)/2-_,[J,S]=this.viewport.rotation%180===0?[R,B]:[B,R];return{offsetX:J,offsetY:S}},Qe=function(){rt(this,d,!0);for(const r of t(this,E).values())r.isEmpty()&&r.remove();rt(this,d,!1)},$t(c,"_initialized",!1);let C=c;o.AnnotationEditorLayer=C}),((et,o,V)=>{var O,C,f,N,j,v,m,E,p,d,Cs,Ts,Rs,me,Ze,Ps,ts;Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var a=V(1),y=V(5),Y=V(4),z=V(29);const c=class c extends Y.AnnotationEditor{constructor(_){super({..._,name:"freeTextEditor"});tt(this,d);tt(this,O,this.editorDivBlur.bind(this));tt(this,C,this.editorDivFocus.bind(this));tt(this,f,this.editorDivInput.bind(this));tt(this,N,this.editorDivKeydown.bind(this));tt(this,j);tt(this,v,"");tt(this,m,"".concat(this.id,"-editor"));tt(this,E);tt(this,p,null);rt(this,j,_.color||c._defaultColor||Y.AnnotationEditor._defaultLineColor),rt(this,E,_.fontSize||c._defaultFontSize)}static get _keyboardManager(){const _=c.prototype,F=$=>$.isEmpty(),at=y.AnnotationEditorUIManager.TRANSLATE_SMALL,H=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],_.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],_.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],_._translateEmpty,{args:[-at,0],checker:F}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],_._translateEmpty,{args:[-H,0],checker:F}],[["ArrowRight","mac+ArrowRight"],_._translateEmpty,{args:[at,0],checker:F}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],_._translateEmpty,{args:[H,0],checker:F}],[["ArrowUp","mac+ArrowUp"],_._translateEmpty,{args:[0,-at],checker:F}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],_._translateEmpty,{args:[0,-H],checker:F}],[["ArrowDown","mac+ArrowDown"],_._translateEmpty,{args:[0,at],checker:F}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],_._translateEmpty,{args:[0,H],checker:F}]]))}static initialize(_){Y.AnnotationEditor.initialize(_,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const F=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(F.getPropertyValue("--freetext-padding"))}static updateDefaultParams(_,F){switch(_){case a.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=F;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=F;break}}updateParams(_,F){switch(_){case a.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,d,Cs).call(this,F);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,d,Ts).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||Y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,E)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,j)]]}_translateEmpty(_,F){this._uiManager.translateSelectedEditors(_,F,!0)}getInitialTranslation(){const _=this.parentScale;return[-c._internalPadding*_,-(c._internalPadding+t(this,E))*_]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,N)),this.editorDiv.addEventListener("focus",t(this,C)),this.editorDiv.addEventListener("blur",t(this,O)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,m)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,N)),this.editorDiv.removeEventListener("focus",t(this,C)),this.editorDiv.removeEventListener("blur",t(this,O)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(_){this._focusEventsAllowed&&(super.focusin(_),_.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var _;if(this.width){X(this,d,ts).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(_=this._initialOptions)!=null&&_.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const _=t(this,v),F=rt(this,v,X(this,d,Rs).call(this).trimEnd());if(_===F)return;const at=H=>{if(rt(this,v,H),!H){this.remove();return}X(this,d,Ze).call(this),this._uiManager.rebuild(this),X(this,d,me).call(this)};this.addCommands({cmd:()=>{at(F)},undo:()=>{at(_)},mustExec:!1}),X(this,d,me).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(_){this.enterInEditMode()}keydown(_){_.target===this.div&&_.key==="Enter"&&(this.enterInEditMode(),_.preventDefault())}editorDivKeydown(_){c._keyboardManager.exec(this,_)}editorDivFocus(_){this.isEditing=!0}editorDivBlur(_){this.isEditing=!1}editorDivInput(_){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let _,F;this.width&&(_=this.x,F=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,m)),this.enableEditing(),Y.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(H=>{var $;return($=this.editorDiv)==null?void 0:$.setAttribute("aria-label",H)}),Y.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(H=>{var $;return($=this.editorDiv)==null?void 0:$.setAttribute("default-content",H)}),this.editorDiv.contentEditable=!0;const{style:at}=this.editorDiv;if(at.fontSize="calc(".concat(t(this,E),"px * var(--scale-factor))"),at.color=t(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[H,$]=this.parentDimensions;if(this.annotationElementId){const{position:U}=t(this,p);let[ct,R]=this.getInitialTranslation();[ct,R]=this.pageTranslationToScreen(ct,R);const[B,J]=this.pageDimensions,[S,e]=this.pageTranslation;let s,u;switch(this.rotation){case 0:s=_+(U[0]-S)/B,u=F+this.height-(U[1]-e)/J;break;case 90:s=_+(U[0]-S)/B,u=F-(U[1]-e)/J,[ct,R]=[R,-ct];break;case 180:s=_-this.width+(U[0]-S)/B,u=F-(U[1]-e)/J,[ct,R]=[-ct,-R];break;case 270:s=_+(U[0]-S-this.height*J)/B,u=F+(U[1]-e-this.width*B)/J,[ct,R]=[-R,ct];break}this.setAt(s*H,u*$,ct,R)}else this.setAt(_*H,F*$,this.width*H,this.height*$);X(this,d,Ze).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(_,F,at){let H=null;if(_ instanceof z.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:U,fontColor:ct},rect:R,rotation:B,id:J},textContent:S,textPosition:e,parent:{page:{pageNumber:s}}}=_;if(!S||S.length===0)return null;H=_={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(ct),fontSize:U,value:S.join("\n"),position:e,pageIndex:s-1,rect:R,rotation:B,id:J,deleted:!1}}const $=super.deserialize(_,F,at);return rt($,E,_.fontSize),rt($,j,a.Util.makeHexColor(..._.color)),rt($,v,_.value),$.annotationElementId=_.id||null,rt($,p,H),$}serialize(_=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const F=c._internalPadding*this.parentScale,at=this.getRect(F,F),H=Y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,j)),$={annotationType:a.AnnotationEditorType.FREETEXT,color:H,fontSize:t(this,E),value:t(this,v),pageIndex:this.pageIndex,rect:at,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return _?$:this.annotationElementId&&!X(this,d,Ps).call(this,$)?null:($.id=this.annotationElementId,$)}};O=new WeakMap,C=new WeakMap,f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakSet,Cs=function(_){const F=H=>{this.editorDiv.style.fontSize="calc(".concat(H,"px * var(--scale-factor))"),this.translate(0,-(H-t(this,E))*this.parentScale),rt(this,E,H),X(this,d,me).call(this)},at=t(this,E);this.addCommands({cmd:()=>{F(_)},undo:()=>{F(at)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ts=function(_){const F=t(this,j);this.addCommands({cmd:()=>{rt(this,j,this.editorDiv.style.color=_)},undo:()=>{rt(this,j,this.editorDiv.style.color=F)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Rs=function(){const _=this.editorDiv.getElementsByTagName("div");if(_.length===0)return this.editorDiv.innerText;const F=[];for(const at of _)F.push(at.innerText.replace(/\r\n?|\n/,""));return F.join("\n")},me=function(){const[_,F]=this.parentDimensions;let at;if(this.isAttachedToDOM)at=this.div.getBoundingClientRect();else{const{currentLayer:H,div:$}=this,U=$.style.display;$.style.display="hidden",H.div.append(this.div),at=$.getBoundingClientRect(),$.remove(),$.style.display=U}this.rotation%180===this.parentRotation%180?(this.width=at.width/_,this.height=at.height/F):(this.width=at.height/_,this.height=at.width/F),this.fixAndSetPosition()},Ze=function(){if(this.editorDiv.replaceChildren(),!!t(this,v))for(const _ of t(this,v).split("\n")){const F=document.createElement("div");F.append(_?document.createTextNode(_):document.createElement("br")),this.editorDiv.append(F)}},Ps=function(_){const{value:F,fontSize:at,color:H,rect:$,pageIndex:U}=t(this,p);return _.value!==F||_.fontSize!==at||_.rect.some((ct,R)=>Math.abs(ct-$[R])>=1)||_.color.some((ct,R)=>ct!==H[R])||_.pageIndex!==U},ts=function(_=!1){if(!this.annotationElementId)return;if(X(this,d,me).call(this),!_&&(this.width===0||this.height===0)){setTimeout(()=>X(this,d,ts).call(this,!0),0);return}const F=c._internalPadding*this.parentScale;t(this,p).rect=this.getRect(F,F)},$t(c,"_freeTextDefaultContent",""),$t(c,"_internalPadding",0),$t(c,"_defaultColor",null),$t(c,"_defaultFontSize",10),$t(c,"_type","freetext");let nt=c;o.FreeTextEditor=nt}),((et,o,V)=>{var u,k,ne,ks,ot,ut,pt,gt,vt,yt,Q,st,g,D,q,Z,ft,At,_t,K,Ct,St,Ms,we,es,ss,Nt,Wt,Vt,xt,it,lt,Pt,is,Gt,I,mt,wt,Fs,ns;Object.defineProperty(o,"__esModule",{value:!0}),o.StampAnnotationElement=o.InkAnnotationElement=o.FreeTextAnnotationElement=o.AnnotationLayer=void 0;var a=V(1),y=V(6),Y=V(3),z=V(30),nt=V(31),O=V(32);const C=1e3,f=9,N=new WeakSet;function j(Rt){return{width:Rt[2]-Rt[0],height:Rt[3]-Rt[1]}}class v{static create(T){switch(T.data.annotationType){case a.AnnotationType.LINK:return new E(T);case a.AnnotationType.TEXT:return new p(T);case a.AnnotationType.WIDGET:switch(T.data.fieldType){case"Tx":return new x(T);case"Btn":return T.data.radioButton?new n(T):T.data.checkBox?new b(T):new h(T);case"Ch":return new i(T);case"Sig":return new w(T)}return new d(T);case a.AnnotationType.POPUP:return new l(T);case a.AnnotationType.FREETEXT:return new L(T);case a.AnnotationType.LINE:return new r(T);case a.AnnotationType.SQUARE:return new _(T);case a.AnnotationType.CIRCLE:return new F(T);case a.AnnotationType.POLYLINE:return new at(T);case a.AnnotationType.CARET:return new $(T);case a.AnnotationType.INK:return new U(T);case a.AnnotationType.POLYGON:return new H(T);case a.AnnotationType.HIGHLIGHT:return new ct(T);case a.AnnotationType.UNDERLINE:return new R(T);case a.AnnotationType.SQUIGGLY:return new B(T);case a.AnnotationType.STRIKEOUT:return new J(T);case a.AnnotationType.STAMP:return new S(T);case a.AnnotationType.FILEATTACHMENT:return new e(T);default:return new m(T)}}}const P=class P{constructor(T,{isRenderable:A=!1,ignoreBorder:W=!1,createQuadrilaterals:ht=!1}={}){tt(this,u,!1);this.isRenderable=A,this.data=T.data,this.layer=T.layer,this.linkService=T.linkService,this.downloadManager=T.downloadManager,this.imageResourcesPath=T.imageResourcesPath,this.renderForms=T.renderForms,this.svgFactory=T.svgFactory,this.annotationStorage=T.annotationStorage,this.enableScripting=T.enableScripting,this.hasJSActions=T.hasJSActions,this._fieldObjects=T.fieldObjects,this.parent=T.parent,A&&(this.container=this._createContainer(W)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:T,contentsObj:A,richText:W}){return!!(T!=null&&T.str||A!=null&&A.str||W!=null&&W.str)}get hasPopupData(){return P._hasPopupData(this.data)}_createContainer(T){const{data:A,parent:{page:W,viewport:ht}}=this,dt=document.createElement("section");dt.setAttribute("data-annotation-id",A.id),this instanceof d||(dt.tabIndex=C),dt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&dt.setAttribute("aria-haspopup","dialog"),A.noRotate&&dt.classList.add("norotate");const{pageWidth:bt,pageHeight:Et,pageX:It,pageY:kt}=ht.rawDims;if(!A.rect||this instanceof l){const{rotation:Bt}=A;return!A.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,dt),dt}const{width:Tt,height:Ht}=j(A.rect),Ft=a.Util.normalizeRect([A.rect[0],W.view[3]-A.rect[1]+W.view[1],A.rect[2],W.view[3]-A.rect[3]+W.view[1]]);if(!T&&A.borderStyle.width>0){dt.style.borderWidth="".concat(A.borderStyle.width,"px");const Bt=A.borderStyle.horizontalCornerRadius,zt=A.borderStyle.verticalCornerRadius;if(Bt>0||zt>0){const Kt="calc(".concat(Bt,"px * var(--scale-factor)) / calc(").concat(zt,"px * var(--scale-factor))");dt.style.borderRadius=Kt}else if(this instanceof n){const Kt="calc(".concat(Tt,"px * var(--scale-factor)) / calc(").concat(Ht,"px * var(--scale-factor))");dt.style.borderRadius=Kt}switch(A.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:dt.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:dt.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:dt.style.borderBottomStyle="solid";break}const Yt=A.borderColor||null;Yt?(rt(this,u,!0),dt.style.borderColor=a.Util.makeHexColor(Yt[0]|0,Yt[1]|0,Yt[2]|0)):dt.style.borderWidth=0}dt.style.left="".concat(100*(Ft[0]-It)/bt,"%"),dt.style.top="".concat(100*(Ft[1]-kt)/Et,"%");const{rotation:Lt}=A;return A.hasOwnCanvas||Lt===0?(dt.style.width="".concat(100*Tt/bt,"%"),dt.style.height="".concat(100*Ht/Et,"%")):this.setRotation(Lt,dt),dt}setRotation(T,A=this.container){if(!this.data.rect)return;const{pageWidth:W,pageHeight:ht}=this.parent.viewport.rawDims,{width:dt,height:bt}=j(this.data.rect);let Et,It;T%180===0?(Et=100*dt/W,It=100*bt/ht):(Et=100*bt/W,It=100*dt/ht),A.style.width="".concat(Et,"%"),A.style.height="".concat(It,"%"),A.setAttribute("data-main-rotation",(360-T)%360)}get _commonActions(){const T=(A,W,ht)=>{const dt=ht.detail[A],bt=dt[0],Et=dt.slice(1);ht.target.style[W]=z.ColorConverters["".concat(bt,"_HTML")](Et),this.annotationStorage.setValue(this.data.id,{[W]:z.ColorConverters["".concat(bt,"_rgb")](Et)})};return(0,a.shadow)(this,"_commonActions",{display:A=>{const{display:W}=A.detail,ht=W%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:W===1||W===2})},print:A=>{this.annotationStorage.setValue(this.data.id,{noPrint:!A.detail.print})},hidden:A=>{const{hidden:W}=A.detail;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:W,noView:W})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.target.disabled=A.detail.readonly},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{T("bgColor","backgroundColor",A)},fillColor:A=>{T("fillColor","backgroundColor",A)},fgColor:A=>{T("fgColor","color",A)},textColor:A=>{T("textColor","color",A)},borderColor:A=>{T("borderColor","borderColor",A)},strokeColor:A=>{T("strokeColor","borderColor",A)},rotation:A=>{const W=A.detail.rotation;this.setRotation(W),this.annotationStorage.setValue(this.data.id,{rotation:W})}})}_dispatchEventFromSandbox(T,A){const W=this._commonActions;for(const ht of Object.keys(A.detail)){const dt=T[ht]||W[ht];dt==null||dt(A)}}_setDefaultPropertiesFromJS(T){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const W=this._commonActions;for(const[ht,dt]of Object.entries(A)){const bt=W[ht];if(bt){const Et={detail:{[ht]:dt},target:T};bt(Et),delete A[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:T}=this.data;if(!T)return;const[A,W,ht,dt]=this.data.rect;if(T.length===1){const[,{x:zt,y:Yt},{x:Kt,y:Qt}]=T[0];if(ht===zt&&dt===Yt&&A===Kt&&W===Qt)return}const{style:bt}=this.container;let Et;if(t(this,u)){const{borderColor:zt,borderWidth:Yt}=bt;bt.borderWidth=0,Et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(zt,'" stroke-width="').concat(Yt,'">')],this.container.classList.add("hasBorder")}const It=ht-A,kt=dt-W,{svgFactory:Tt}=this,Ht=Tt.createElement("svg");Ht.classList.add("quadrilateralsContainer"),Ht.setAttribute("width",0),Ht.setAttribute("height",0);const Ft=Tt.createElement("defs");Ht.append(Ft);const Lt=Tt.createElement("clipPath"),Bt="clippath_".concat(this.data.id);Lt.setAttribute("id",Bt),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Lt);for(const[,{x:zt,y:Yt},{x:Kt,y:Qt}]of T){const Jt=Tt.createElement("rect"),te=(Kt-A)/It,se=(dt-Yt)/kt,ie=(zt-Kt)/It,ps=(Yt-Qt)/kt;Jt.setAttribute("x",te),Jt.setAttribute("y",se),Jt.setAttribute("width",ie),Jt.setAttribute("height",ps),Lt.append(Jt),Et==null||Et.push('<rect vector-effect="non-scaling-stroke" x="'.concat(te,'" y="').concat(se,'" width="').concat(ie,'" height="').concat(ps,'"/>'))}t(this,u)&&(Et.push("</g></svg>')"),bt.backgroundImage=Et.join("")),this.container.append(Ht),this.container.style.clipPath="url(#".concat(Bt,")")}_createPopup(){const{container:T,data:A}=this;T.setAttribute("aria-haspopup","dialog");const W=new l({data:{color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,parentRect:A.rect,borderStyle:0,id:"popup_".concat(A.id),rotation:A.rotation},parent:this.parent,elements:[this]});this.parent.div.append(W.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(T,A=null){const W=[];if(this._fieldObjects){const ht=this._fieldObjects[T];if(ht)for(const{page:dt,id:bt,exportValues:Et}of ht){if(dt===-1||bt===A)continue;const It=typeof Et=="string"?Et:null,kt=document.querySelector('[data-element-id="'.concat(bt,'"]'));if(kt&&!N.has(kt)){(0,a.warn)("_getElementsByName - element not allowed: ".concat(bt));continue}W.push({id:bt,exportValue:It,domElement:kt})}return W}for(const ht of document.getElementsByName(T)){const{exportValue:dt}=ht,bt=ht.getAttribute("data-element-id");bt!==A&&N.has(ht)&&W.push({id:bt,exportValue:dt,domElement:ht})}return W}show(){var T;this.container&&(this.container.hidden=!1),(T=this.popup)==null||T.maybeShow()}hide(){var T;this.container&&(this.container.hidden=!0),(T=this.popup)==null||T.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const T=this.getElementsToTriggerPopup();if(Array.isArray(T))for(const A of T)A.classList.add("highlightArea");else T.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:T,data:{id:A}}=this;this.container.addEventListener("dblclick",()=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("switchannotationeditormode",{source:this,mode:T,editId:A})})}};u=new WeakMap;let m=P;class E extends m{constructor(A,W=null){super(A,{isRenderable:!0,ignoreBorder:!!(W!=null&&W.ignoreBorder),createQuadrilaterals:!0});tt(this,k);this.isTooltipOnly=A.data.isTooltipOnly}render(){const{data:A,linkService:W}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",A.id);let dt=!1;return A.url?(W.addLinkAttributes(ht,A.url,A.newWindow),dt=!0):A.action?(this._bindNamedAction(ht,A.action),dt=!0):A.attachment?(this._bindAttachment(ht,A.attachment),dt=!0):A.setOCGState?(X(this,k,ks).call(this,ht,A.setOCGState),dt=!0):A.dest?(this._bindLink(ht,A.dest),dt=!0):(A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,A),dt=!0),A.resetForm?(this._bindResetFormAction(ht,A.resetForm),dt=!0):this.isTooltipOnly&&!dt&&(this._bindLink(ht,""),dt=!0)),this.container.classList.add("linkAnnotation"),dt&&this.container.append(ht),this.container}_bindLink(A,W){A.href=this.linkService.getDestinationHash(W),A.onclick=()=>(W&&this.linkService.goToDestination(W),!1),(W||W==="")&&X(this,k,ne).call(this)}_bindNamedAction(A,W){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(W),!1),X(this,k,ne).call(this)}_bindAttachment(A,W){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,W.content,W.filename),!1},X(this,k,ne).call(this)}_bindJSAction(A,W){A.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const dt of Object.keys(W.actions)){const bt=ht.get(dt);bt&&(A[bt]=()=>{var Et;return(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:W.id,name:dt}}),!1})}A.onclick||(A.onclick=()=>!1),X(this,k,ne).call(this)}_bindResetFormAction(A,W){const ht=A.onclick;if(ht||(A.href=this.linkService.getAnchorUrl("")),X(this,k,ne).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(A.onclick=()=>!1);return}A.onclick=()=>{var Ht;ht==null||ht();const{fields:dt,refs:bt,include:Et}=W,It=[];if(dt.length!==0||bt.length!==0){const Ft=new Set(bt);for(const Lt of dt){const Bt=this._fieldObjects[Lt]||[];for(const{id:zt}of Bt)Ft.add(zt)}for(const Lt of Object.values(this._fieldObjects))for(const Bt of Lt)Ft.has(Bt.id)===Et&&It.push(Bt)}else for(const Ft of Object.values(this._fieldObjects))It.push(...Ft);const kt=this.annotationStorage,Tt=[];for(const Ft of It){const{id:Lt}=Ft;switch(Tt.push(Lt),Ft.type){case"text":{const zt=Ft.defaultValue||"";kt.setValue(Lt,{value:zt});break}case"checkbox":case"radiobutton":{const zt=Ft.defaultValue===Ft.exportValues;kt.setValue(Lt,{value:zt});break}case"combobox":case"listbox":{const zt=Ft.defaultValue||"";kt.setValue(Lt,{value:zt});break}default:continue}const Bt=document.querySelector('[data-element-id="'.concat(Lt,'"]'));if(Bt){if(!N.has(Bt)){(0,a.warn)("_bindResetFormAction - element not allowed: ".concat(Lt));continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}k=new WeakSet,ne=function(){this.container.setAttribute("data-internal-link","")},ks=function(A,W){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeSetOCGState(W),!1),X(this,k,ne).call(this)};class p extends m{constructor(T){super(T,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const T=document.createElement("img");return T.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",T.alt="[{{type}} Annotation]",T.dataset.l10nId="text_annotation_type",T.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(T),this.container}}class d extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(T){var A;this.data.hasOwnCanvas&&(((A=T.previousSibling)==null?void 0:A.nodeName)==="CANVAS"&&(T.previousSibling.hidden=!0),T.hidden=!1)}_getKeyModifier(T){const{isWin:A,isMac:W}=a.FeatureTest.platform;return A&&T.ctrlKey||W&&T.metaKey}_setEventListener(T,A,W,ht,dt){W.includes("mouse")?T.addEventListener(W,bt=>{var Et;(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:dt(bt),shift:bt.shiftKey,modifier:this._getKeyModifier(bt)}})}):T.addEventListener(W,bt=>{var Et;if(W==="blur"){if(!A.focused||!bt.relatedTarget)return;A.focused=!1}else if(W==="focus"){if(A.focused)return;A.focused=!0}dt&&((Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:dt(bt)}}))})}_setEventListeners(T,A,W,ht){var dt,bt,Et;for(const[It,kt]of W)(kt==="Action"||(dt=this.data.actions)!=null&&dt[kt])&&((kt==="Focus"||kt==="Blur")&&(A||(A={focused:!1})),this._setEventListener(T,A,It,kt,ht),kt==="Focus"&&!((bt=this.data.actions)!=null&&bt.Blur)?this._setEventListener(T,A,"blur","Blur",null):kt==="Blur"&&!((Et=this.data.actions)!=null&&Et.Focus)&&this._setEventListener(T,A,"focus","Focus",null))}_setBackgroundColor(T){const A=this.data.backgroundColor||null;T.style.backgroundColor=A===null?"transparent":a.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(T){const A=["left","center","right"],{fontColor:W}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||f,dt=T.style;let bt;const Et=2,It=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et),Tt=Math.round(kt/(a.LINE_FACTOR*ht))||1,Ht=kt/Tt;bt=Math.min(ht,It(Ht/a.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et);bt=Math.min(ht,It(kt/a.LINE_FACTOR))}dt.fontSize="calc(".concat(bt,"px * var(--scale-factor))"),dt.color=a.Util.makeHexColor(W[0],W[1],W[2]),this.data.textAlignment!==null&&(dt.textAlign=A[this.data.textAlignment])}_setRequired(T,A){A?T.setAttribute("required",!0):T.removeAttribute("required"),T.setAttribute("aria-required",A)}}class x extends d{constructor(T){const A=T.renderForms||!T.data.hasAppearance&&!!T.data.fieldValue;super(T,{isRenderable:A})}setPropertyOnSiblings(T,A,W,ht){const dt=this.annotationStorage;for(const bt of this._getElementsByName(T.name,T.id))bt.domElement&&(bt.domElement[A]=W),dt.setValue(bt.id,{[ht]:W})}render(){var ht,dt;const T=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let W=null;if(this.renderForms){const bt=T.getValue(A,{value:this.data.fieldValue});let Et=bt.value||"";const It=T.getValue(A,{charLimit:this.data.maxLen}).charLimit;It&&Et.length>It&&(Et=Et.slice(0,It));let kt=bt.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join("\n"))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:Et,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(W=document.createElement("textarea"),W.textContent=kt!=null?kt:Et,this.data.doNotScroll&&(W.style.overflowY="hidden")):(W=document.createElement("input"),W.type="text",W.setAttribute("value",kt!=null?kt:Et),this.data.doNotScroll&&(W.style.overflowX="hidden")),this.data.hasOwnCanvas&&(W.hidden=!0),N.add(W),W.setAttribute("data-element-id",A),W.disabled=this.data.readOnly,W.name=this.data.fieldName,W.tabIndex=C,this._setRequired(W,this.data.required),It&&(W.maxLength=It),W.addEventListener("input",Ft=>{T.setValue(A,{value:Ft.target.value}),this.setPropertyOnSiblings(W,"value",Ft.target.value,"value"),Tt.formattedValue=null}),W.addEventListener("resetform",Ft=>{var Bt;const Lt=(Bt=this.data.defaultFieldValue)!=null?Bt:"";W.value=Tt.userValue=Lt,Tt.formattedValue=null});let Ht=Ft=>{const{formattedValue:Lt}=Tt;Lt!=null&&(Ft.target.value=Lt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){W.addEventListener("focus",Lt=>{if(Tt.focused)return;const{target:Bt}=Lt;Tt.userValue&&(Bt.value=Tt.userValue),Tt.lastCommittedValue=Bt.value,Tt.commitKey=1,Tt.focused=!0}),W.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const Bt={value(zt){var Yt;Tt.userValue=(Yt=zt.detail.value)!=null?Yt:"",T.setValue(A,{value:Tt.userValue.toString()}),zt.target.value=Tt.userValue},formattedValue(zt){const{formattedValue:Yt}=zt.detail;Tt.formattedValue=Yt,Yt!=null&&zt.target!==document.activeElement&&(zt.target.value=Yt),T.setValue(A,{formattedValue:Yt})},selRange(zt){zt.target.setSelectionRange(...zt.detail.selRange)},charLimit:zt=>{var Jt;const{charLimit:Yt}=zt.detail,{target:Kt}=zt;if(Yt===0){Kt.removeAttribute("maxLength");return}Kt.setAttribute("maxLength",Yt);let Qt=Tt.userValue;!Qt||Qt.length<=Yt||(Qt=Qt.slice(0,Yt),Kt.value=Tt.userValue=Qt,T.setValue(A,{value:Qt}),(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Qt,willCommit:!0,commitKey:1,selStart:Kt.selectionStart,selEnd:Kt.selectionEnd}}))}};this._dispatchEventFromSandbox(Bt,Lt)}),W.addEventListener("keydown",Lt=>{var Yt;Tt.commitKey=1;let Bt=-1;if(Lt.key==="Escape"?Bt=0:Lt.key==="Enter"&&!this.data.multiLine?Bt=2:Lt.key==="Tab"&&(Tt.commitKey=3),Bt===-1)return;const{value:zt}=Lt.target;Tt.lastCommittedValue!==zt&&(Tt.lastCommittedValue=zt,Tt.userValue=zt,(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:zt,willCommit:!0,commitKey:Bt,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const Ft=Ht;Ht=null,W.addEventListener("blur",Lt=>{var zt;if(!Tt.focused||!Lt.relatedTarget)return;Tt.focused=!1;const{value:Bt}=Lt.target;Tt.userValue=Bt,Tt.lastCommittedValue!==Bt&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Tt.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),Ft(Lt)}),(dt=this.data.actions)!=null&&dt.Keystroke&&W.addEventListener("beforeinput",Lt=>{var se;Tt.lastCommittedValue=null;const{data:Bt,target:zt}=Lt,{value:Yt,selectionStart:Kt,selectionEnd:Qt}=zt;let Jt=Kt,te=Qt;switch(Lt.inputType){case"deleteWordBackward":{const ie=Yt.substring(0,Kt).match(/\w*[^\w]*$/);ie&&(Jt-=ie[0].length);break}case"deleteWordForward":{const ie=Yt.substring(Kt).match(/^[^\w]*\w*/);ie&&(te+=ie[0].length);break}case"deleteContentBackward":Kt===Qt&&(Jt-=1);break;case"deleteContentForward":Kt===Qt&&(te+=1);break}Lt.preventDefault(),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Yt,change:Bt||"",willCommit:!1,selStart:Jt,selEnd:te}})}),this._setEventListeners(W,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Ht&&W.addEventListener("blur",Ht),this.data.comb){const Lt=(this.data.rect[2]-this.data.rect[0])/It;W.classList.add("comb"),W.style.letterSpacing="calc(".concat(Lt,"px * var(--scale-factor) - 1ch)")}}else W=document.createElement("div"),W.textContent=this.data.fieldValue,W.style.verticalAlign="middle",W.style.display="table-cell";return this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class w extends d{constructor(T){super(T,{isRenderable:!!T.data.hasOwnCanvas})}}class b extends d{constructor(T){super(T,{isRenderable:T.renderForms})}render(){const T=this.annotationStorage,A=this.data,W=A.id;let ht=T.getValue(W,{value:A.exportValue===A.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",T.setValue(W,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const dt=document.createElement("input");return N.add(dt),dt.setAttribute("data-element-id",W),dt.disabled=A.readOnly,this._setRequired(dt,this.data.required),dt.type="checkbox",dt.name=A.fieldName,ht&&dt.setAttribute("checked",!0),dt.setAttribute("exportValue",A.exportValue),dt.tabIndex=C,dt.addEventListener("change",bt=>{const{name:Et,checked:It}=bt.target;for(const kt of this._getElementsByName(Et,W)){const Tt=It&&kt.exportValue===A.exportValue;kt.domElement&&(kt.domElement.checked=Tt),T.setValue(kt.id,{value:Tt})}T.setValue(W,{value:It})}),dt.addEventListener("resetform",bt=>{const Et=A.defaultFieldValue||"Off";bt.target.checked=Et===A.exportValue}),this.enableScripting&&this.hasJSActions&&(dt.addEventListener("updatefromsandbox",bt=>{const Et={value(It){It.target.checked=It.detail.value!=="Off",T.setValue(W,{value:It.target.checked})}};this._dispatchEventFromSandbox(Et,bt)}),this._setEventListeners(dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bt=>bt.target.checked)),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class n extends d{constructor(T){super(T,{isRenderable:T.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const T=this.annotationStorage,A=this.data,W=A.id;let ht=T.getValue(W,{value:A.fieldValue===A.buttonValue}).value;typeof ht=="string"&&(ht=ht!==A.buttonValue,T.setValue(W,{value:ht}));const dt=document.createElement("input");if(N.add(dt),dt.setAttribute("data-element-id",W),dt.disabled=A.readOnly,this._setRequired(dt,this.data.required),dt.type="radio",dt.name=A.fieldName,ht&&dt.setAttribute("checked",!0),dt.tabIndex=C,dt.addEventListener("change",bt=>{const{name:Et,checked:It}=bt.target;for(const kt of this._getElementsByName(Et,W))T.setValue(kt.id,{value:!1});T.setValue(W,{value:It})}),dt.addEventListener("resetform",bt=>{const Et=A.defaultFieldValue;bt.target.checked=Et!=null&&Et===A.buttonValue}),this.enableScripting&&this.hasJSActions){const bt=A.buttonValue;dt.addEventListener("updatefromsandbox",Et=>{const It={value:kt=>{const Tt=bt===kt.detail.value;for(const Ht of this._getElementsByName(kt.target.name)){const Ft=Tt&&Ht.id===W;Ht.domElement&&(Ht.domElement.checked=Ft),T.setValue(Ht.id,{value:Ft})}}};this._dispatchEventFromSandbox(It,Et)}),this._setEventListeners(dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)}return this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class h extends E{constructor(T){super(T,{ignoreBorder:T.data.hasAppearance})}render(){const T=super.render();T.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(T.title=this.data.alternativeText);const A=T.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({},W)})),T}}class i extends d{constructor(T){super(T,{isRenderable:T.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const T=this.annotationStorage,A=this.data.id,W=T.getValue(A,{value:this.data.fieldValue}),ht=document.createElement("select");N.add(ht),ht.setAttribute("data-element-id",A),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=C;let dt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Tt=>{const Ht=this.data.defaultFieldValue;for(const Ft of ht.options)Ft.selected=Ft.value===Ht});for(const Tt of this.data.options){const Ht=document.createElement("option");Ht.textContent=Tt.displayValue,Ht.value=Tt.exportValue,W.value.includes(Tt.exportValue)&&(Ht.setAttribute("selected",!0),dt=!1),ht.append(Ht)}let bt=null;if(dt){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ht.prepend(Tt),bt=()=>{Tt.remove(),ht.removeEventListener("input",bt),bt=null},ht.addEventListener("input",bt)}const Et=Tt=>{const Ht=Tt?"value":"textContent",{options:Ft,multiple:Lt}=ht;return Lt?Array.prototype.filter.call(Ft,Bt=>Bt.selected).map(Bt=>Bt[Ht]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][Ht]};let It=Et(!1);const kt=Tt=>{const Ht=Tt.target.options;return Array.prototype.map.call(Ht,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Tt=>{const Ht={value(Ft){bt==null||bt();const Lt=Ft.detail.value,Bt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const zt of ht.options)zt.selected=Bt.has(zt.value);T.setValue(A,{value:Et(!0)}),It=Et(!1)},multipleSelection(Ft){ht.multiple=!0},remove(Ft){const Lt=ht.options,Bt=Ft.detail.remove;Lt[Bt].selected=!1,ht.remove(Bt),Lt.length>0&&Array.prototype.findIndex.call(Lt,Yt=>Yt.selected)===-1&&(Lt[0].selected=!0),T.setValue(A,{value:Et(!0),items:kt(Ft)}),It=Et(!1)},clear(Ft){for(;ht.length!==0;)ht.remove(0);T.setValue(A,{value:null,items:[]}),It=Et(!1)},insert(Ft){const{index:Lt,displayValue:Bt,exportValue:zt}=Ft.detail.insert,Yt=ht.children[Lt],Kt=document.createElement("option");Kt.textContent=Bt,Kt.value=zt,Yt?Yt.before(Kt):ht.append(Kt),T.setValue(A,{value:Et(!0),items:kt(Ft)}),It=Et(!1)},items(Ft){const{items:Lt}=Ft.detail;for(;ht.length!==0;)ht.remove(0);for(const Bt of Lt){const{displayValue:zt,exportValue:Yt}=Bt,Kt=document.createElement("option");Kt.textContent=zt,Kt.value=Yt,ht.append(Kt)}ht.options.length>0&&(ht.options[0].selected=!0),T.setValue(A,{value:Et(!0),items:kt(Ft)}),It=Et(!1)},indices(Ft){const Lt=new Set(Ft.detail.indices);for(const Bt of Ft.target.options)Bt.selected=Lt.has(Bt.index);T.setValue(A,{value:Et(!0)}),It=Et(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(Ht,Tt)}),ht.addEventListener("input",Tt=>{var Ft;const Ht=Et(!0);T.setValue(A,{value:Ht}),Tt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:It,changeEx:Ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ht.addEventListener("input",function(Tt){T.setValue(A,{value:Et(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class l extends m{constructor(T){const{data:A,elements:W}=T;super(T,{isRenderable:m._hasPopupData(A)}),this.elements=W}render(){this.container.classList.add("popupAnnotation");const T=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),A=[];for(const W of this.elements)W.popup=T,A.push(W.data.id),W.addHighlightArea();return this.container.setAttribute("aria-controls",A.map(W=>"".concat(a.AnnotationPrefix).concat(W)).join(",")),this.container}}class c{constructor({container:T,color:A,elements:W,titleObj:ht,modificationDate:dt,contentsObj:bt,richText:Et,parent:It,rect:kt,parentRect:Tt,open:Ht}){tt(this,St);tt(this,ot,null);tt(this,ut,X(this,St,Ms).bind(this));tt(this,pt,X(this,St,ss).bind(this));tt(this,gt,X(this,St,es).bind(this));tt(this,vt,X(this,St,we).bind(this));tt(this,yt,null);tt(this,Q,null);tt(this,st,null);tt(this,g,null);tt(this,D,null);tt(this,q,null);tt(this,Z,!1);tt(this,ft,null);tt(this,At,null);tt(this,_t,null);tt(this,K,null);tt(this,Ct,!1);var Lt;rt(this,Q,T),rt(this,K,ht),rt(this,st,bt),rt(this,_t,Et),rt(this,D,It),rt(this,yt,A),rt(this,At,kt),rt(this,q,Tt),rt(this,g,W);const Ft=y.PDFDateString.toDateObject(dt);Ft&&rt(this,ot,It.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=W.flatMap(Bt=>Bt.getElementsToTriggerPopup());for(const Bt of this.trigger)Bt.addEventListener("click",t(this,vt)),Bt.addEventListener("mouseenter",t(this,gt)),Bt.addEventListener("mouseleave",t(this,pt)),Bt.classList.add("popupTriggerArea");for(const Bt of W)(Lt=Bt.container)==null||Lt.addEventListener("keydown",t(this,ut));t(this,Q).hidden=!0,Ht&&X(this,St,we).call(this)}render(){if(t(this,ft))return;const{page:{view:T},viewport:{rawDims:{pageWidth:A,pageHeight:W,pageX:ht,pageY:dt}}}=t(this,D),bt=rt(this,ft,document.createElement("div"));if(bt.className="popup",t(this,yt)){const Jt=bt.style.outlineColor=a.Util.makeHexColor(...t(this,yt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?bt.style.backgroundColor="color-mix(in srgb, ".concat(Jt," 30%, white)"):bt.style.backgroundColor=a.Util.makeHexColor(...t(this,yt).map(se=>Math.floor(.7*(255-se)+se)))}const Et=document.createElement("span");Et.className="header";const It=document.createElement("h1");if(Et.append(It),{dir:It.dir,str:It.textContent}=t(this,K),bt.append(Et),t(this,ot)){const Jt=document.createElement("span");Jt.classList.add("popupDate"),t(this,ot).then(te=>{Jt.textContent=te}),Et.append(Jt)}const kt=t(this,st),Tt=t(this,_t);if(Tt!=null&&Tt.str&&(!(kt!=null&&kt.str)||kt.str===Tt.str))O.XfaLayer.render({xfaHtml:Tt.html,intent:"richText",div:bt}),bt.lastChild.classList.add("richText","popupContent");else{const Jt=this._formatContents(kt);bt.append(Jt)}let Ht=!!t(this,q),Ft=Ht?t(this,q):t(this,At);for(const Jt of t(this,g))if(!Ft||a.Util.intersect(Jt.data.rect,Ft)!==null){Ft=Jt.data.rect,Ht=!0;break}const Lt=a.Util.normalizeRect([Ft[0],T[3]-Ft[1]+T[1],Ft[2],T[3]-Ft[3]+T[1]]),zt=Ht?Ft[2]-Ft[0]+5:0,Yt=Lt[0]+zt,Kt=Lt[1],{style:Qt}=t(this,Q);Qt.left="".concat(100*(Yt-ht)/A,"%"),Qt.top="".concat(100*(Kt-dt)/W,"%"),t(this,Q).append(bt)}_formatContents({str:T,dir:A}){const W=document.createElement("p");W.classList.add("popupContent"),W.dir=A;const ht=T.split(/(?:\r\n?|\n)/);for(let dt=0,bt=ht.length;dt<bt;++dt){const Et=ht[dt];W.append(document.createTextNode(Et)),dt<bt-1&&W.append(document.createElement("br"))}return W}forceHide(){rt(this,Ct,this.isVisible),t(this,Ct)&&(t(this,Q).hidden=!0)}maybeShow(){t(this,Ct)&&(rt(this,Ct,!1),t(this,Q).hidden=!1)}get isVisible(){return t(this,Q).hidden===!1}}ot=new WeakMap,ut=new WeakMap,pt=new WeakMap,gt=new WeakMap,vt=new WeakMap,yt=new WeakMap,Q=new WeakMap,st=new WeakMap,g=new WeakMap,D=new WeakMap,q=new WeakMap,Z=new WeakMap,ft=new WeakMap,At=new WeakMap,_t=new WeakMap,K=new WeakMap,Ct=new WeakMap,St=new WeakSet,Ms=function(T){T.altKey||T.shiftKey||T.ctrlKey||T.metaKey||(T.key==="Enter"||T.key==="Escape"&&t(this,Z))&&X(this,St,we).call(this)},we=function(){rt(this,Z,!t(this,Z)),t(this,Z)?(X(this,St,es).call(this),t(this,Q).addEventListener("click",t(this,vt)),t(this,Q).addEventListener("keydown",t(this,ut))):(X(this,St,ss).call(this),t(this,Q).removeEventListener("click",t(this,vt)),t(this,Q).removeEventListener("keydown",t(this,ut)))},es=function(){t(this,ft)||this.render(),this.isVisible?t(this,Z)&&t(this,Q).classList.add("focused"):(t(this,Q).hidden=!1,t(this,Q).style.zIndex=parseInt(t(this,Q).style.zIndex)+1e3)},ss=function(){t(this,Q).classList.remove("focused"),!(t(this,Z)||!this.isVisible)&&(t(this,Q).hidden=!0,t(this,Q).style.zIndex=parseInt(t(this,Q).style.zIndex)-1e3)};class L extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0}),this.textContent=T.data.textContent,this.textPosition=T.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const T=document.createElement("div");T.classList.add("annotationTextContent"),T.setAttribute("role","comment");for(const A of this.textContent){const W=document.createElement("span");W.textContent=A,T.append(W)}this.container.append(T)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}o.FreeTextAnnotationElement=L;class r extends m{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});tt(this,Nt,null)}render(){this.container.classList.add("lineAnnotation");const A=this.data,{width:W,height:ht}=j(A.rect),dt=this.svgFactory.create(W,ht,!0),bt=rt(this,Nt,this.svgFactory.createElement("svg:line"));return bt.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),bt.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),bt.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),bt.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),bt.setAttribute("stroke-width",A.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),dt.append(bt),this.container.append(dt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nt=new WeakMap;class _ extends m{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});tt(this,Wt,null)}render(){this.container.classList.add("squareAnnotation");const A=this.data,{width:W,height:ht}=j(A.rect),dt=this.svgFactory.create(W,ht,!0),bt=A.borderStyle.width,Et=rt(this,Wt,this.svgFactory.createElement("svg:rect"));return Et.setAttribute("x",bt/2),Et.setAttribute("y",bt/2),Et.setAttribute("width",W-bt),Et.setAttribute("height",ht-bt),Et.setAttribute("stroke-width",bt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Wt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wt=new WeakMap;class F extends m{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});tt(this,Vt,null)}render(){this.container.classList.add("circleAnnotation");const A=this.data,{width:W,height:ht}=j(A.rect),dt=this.svgFactory.create(W,ht,!0),bt=A.borderStyle.width,Et=rt(this,Vt,this.svgFactory.createElement("svg:ellipse"));return Et.setAttribute("cx",W/2),Et.setAttribute("cy",ht/2),Et.setAttribute("rx",W/2-bt/2),Et.setAttribute("ry",ht/2-bt/2),Et.setAttribute("stroke-width",bt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vt=new WeakMap;class at extends m{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});tt(this,xt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:W,height:ht}=j(A.rect),dt=this.svgFactory.create(W,ht,!0);let bt=[];for(const It of A.vertices){const kt=It.x-A.rect[0],Tt=A.rect[3]-It.y;bt.push(kt+","+Tt)}bt=bt.join(" ");const Et=rt(this,xt,this.svgFactory.createElement(this.svgElementName));return Et.setAttribute("points",bt),Et.setAttribute("stroke-width",A.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!A.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class H extends at{constructor(T){super(T),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $ extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class U extends m{constructor(A){super(A,{isRenderable:!0,ignoreBorder:!0});tt(this,it,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:W,height:ht}=j(A.rect),dt=this.svgFactory.create(W,ht,!0);for(const bt of A.inkLists){let Et=[];for(const kt of bt){const Tt=kt.x-A.rect[0],Ht=A.rect[3]-kt.y;Et.push("".concat(Tt,",").concat(Ht))}Et=Et.join(" ");const It=this.svgFactory.createElement(this.svgElementName);t(this,it).push(It),It.setAttribute("points",Et),It.setAttribute("stroke-width",A.borderStyle.width||1),It.setAttribute("stroke","transparent"),It.setAttribute("fill","transparent"),!A.popupRef&&this.hasPopupData&&this._createPopup(),dt.append(It)}return this.container.append(dt),this.container}getElementsToTriggerPopup(){return t(this,it)}addHighlightArea(){this.container.classList.add("highlightArea")}}it=new WeakMap,o.InkAnnotationElement=U;class ct extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class R extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class B extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class J extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class S extends m{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}o.StampAnnotationElement=S;class e extends m{constructor(A){var dt;super(A,{isRenderable:!0});tt(this,Pt);tt(this,lt,null);const{filename:W,content:ht}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(W,!0),this.content=ht,(dt=this.linkService.eventBus)==null||dt.dispatch("fileattachmentannotation",{source:this,filename:W,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:A,data:W}=this;let ht;W.hasAppearance||W.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(W.name)?"paperclip":"pushpin",".svg"),W.fillAlpha&&W.fillAlpha<1&&(ht.style="filter: opacity(".concat(Math.round(W.fillAlpha*100),"%);"))),ht.addEventListener("dblclick",X(this,Pt,is).bind(this)),rt(this,lt,ht);const{isMac:dt}=a.FeatureTest.platform;return A.addEventListener("keydown",bt=>{bt.key==="Enter"&&(dt?bt.metaKey:bt.ctrlKey)&&X(this,Pt,is).call(this)}),!W.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),A.append(ht),A}getElementsToTriggerPopup(){return t(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap,Pt=new WeakSet,is=function(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)};class s{constructor({div:T,accessibilityManager:A,annotationCanvasMap:W,l10n:ht,page:dt,viewport:bt}){tt(this,wt);tt(this,Gt,null);tt(this,I,null);tt(this,mt,new Map);this.div=T,rt(this,Gt,A),rt(this,I,W),this.l10n=ht,this.page=dt,this.viewport=bt,this.zIndex=0,this.l10n||(this.l10n=nt.NullL10n)}async render(T){const{annotations:A}=T,W=this.div;(0,y.setLayerDimensions)(W,this.viewport);const ht=new Map,dt={data:null,layer:W,linkService:T.linkService,downloadManager:T.downloadManager,imageResourcesPath:T.imageResourcesPath||"",renderForms:T.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:T.annotationStorage||new Y.AnnotationStorage,enableScripting:T.enableScripting===!0,hasJSActions:T.hasJSActions,fieldObjects:T.fieldObjects,parent:this,elements:null};for(const bt of A){if(bt.noHTML)continue;const Et=bt.annotationType===a.AnnotationType.POPUP;if(Et){const Tt=ht.get(bt.id);if(!Tt)continue;dt.elements=Tt}else{const{width:Tt,height:Ht}=j(bt.rect);if(Tt<=0||Ht<=0)continue}dt.data=bt;const It=v.create(dt);if(!It.isRenderable)continue;if(!Et&&bt.popupRef){const Tt=ht.get(bt.popupRef);Tt?Tt.push(It):ht.set(bt.popupRef,[It])}It.annotationEditorType>0&&t(this,mt).set(It.data.id,It);const kt=It.render();bt.hidden&&(kt.style.visibility="hidden"),X(this,wt,Fs).call(this,kt,bt.id)}X(this,wt,ns).call(this),await this.l10n.translate(W)}update({viewport:T}){const A=this.div;this.viewport=T,(0,y.setLayerDimensions)(A,{rotation:T.rotation}),X(this,wt,ns).call(this),A.hidden=!1}getEditableAnnotations(){return Array.from(t(this,mt).values())}getEditableAnnotation(T){return t(this,mt).get(T)}}Gt=new WeakMap,I=new WeakMap,mt=new WeakMap,wt=new WeakSet,Fs=function(T,A){var ht;const W=T.firstChild||T;W.id="".concat(a.AnnotationPrefix).concat(A),this.div.append(T),(ht=t(this,Gt))==null||ht.moveElementInDOM(this.div,T,W,!1)},ns=function(){if(!t(this,I))return;const T=this.div;for(const[A,W]of t(this,I)){const ht=T.querySelector('[data-annotation-id="'.concat(A,'"]'));if(!ht)continue;const{firstChild:dt}=ht;dt?dt.nodeName==="CANVAS"?dt.replaceWith(W):dt.before(W):ht.append(W)}t(this,I).clear()},o.AnnotationLayer=s}),((et,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function V(Y){return Math.floor(Math.max(0,Math.min(1,Y))*255).toString(16).padStart(2,"0")}function a(Y){return Math.max(0,Math.min(255,255*Y))}class y{static CMYK_G([z,nt,O,C]){return["G",1-Math.min(1,.3*z+.59*O+.11*nt+C)]}static G_CMYK([z]){return["CMYK",0,0,0,1-z]}static G_RGB([z]){return["RGB",z,z,z]}static G_rgb([z]){return z=a(z),[z,z,z]}static G_HTML([z]){const nt=V(z);return"#".concat(nt).concat(nt).concat(nt)}static RGB_G([z,nt,O]){return["G",.3*z+.59*nt+.11*O]}static RGB_rgb(z){return z.map(a)}static RGB_HTML(z){return"#".concat(z.map(V).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([z,nt,O,C]){return["RGB",1-Math.min(1,z+C),1-Math.min(1,O+C),1-Math.min(1,nt+C)]}static CMYK_rgb([z,nt,O,C]){return[a(1-Math.min(1,z+C)),a(1-Math.min(1,O+C)),a(1-Math.min(1,nt+C))]}static CMYK_HTML(z){const nt=this.CMYK_RGB(z).slice(1);return this.RGB_HTML(nt)}static RGB_CMYK([z,nt,O]){const C=1-z,f=1-nt,N=1-O,j=Math.min(C,f,N);return["CMYK",C,f,N,j]}}o.ColorConverters=y}),((et,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.getL10nFallback=a;const V={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};V.print_progress_percent="{{progress}}%";function a(z,nt){switch(z){case"find_match_count":z="find_match_count[".concat(nt.total===1?"one":"other","]");break;case"find_match_count_limit":z="find_match_count_limit[".concat(nt.limit===1?"one":"other","]");break}return V[z]||""}function y(z,nt){return nt?z.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(O,C)=>C in nt?nt[C]:"{{"+C+"}}"):z}const Y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(z,nt=null,O=a(z,nt)){return y(O,nt)},async translate(z){}};o.NullL10n=Y}),((et,o,V)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var a=V(25);class y{static setupStorage(z,nt,O,C,f){const N=C.getValue(nt,{value:null});switch(O.name){case"textarea":if(N.value!==null&&(z.textContent=N.value),f==="print")break;z.addEventListener("input",j=>{C.setValue(nt,{value:j.target.value})});break;case"input":if(O.attributes.type==="radio"||O.attributes.type==="checkbox"){if(N.value===O.attributes.xfaOn?z.setAttribute("checked",!0):N.value===O.attributes.xfaOff&&z.removeAttribute("checked"),f==="print")break;z.addEventListener("change",j=>{C.setValue(nt,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&z.setAttribute("value",N.value),f==="print")break;z.addEventListener("input",j=>{C.setValue(nt,{value:j.target.value})})}break;case"select":if(N.value!==null){z.setAttribute("value",N.value);for(const j of O.children)j.attributes.value===N.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}z.addEventListener("input",j=>{const v=j.target.options,m=v.selectedIndex===-1?"":v[v.selectedIndex].value;C.setValue(nt,{value:m})});break}}static setAttributes({html:z,element:nt,storage:O=null,intent:C,linkService:f}){const{attributes:N}=nt,j=z instanceof HTMLAnchorElement;N.type==="radio"&&(N.name="".concat(N.name,"-").concat(C));for(const[v,m]of Object.entries(N))if(m!=null)switch(v){case"class":m.length&&z.setAttribute(v,m.join(" "));break;case"dataId":break;case"id":z.setAttribute("data-element-id",m);break;case"style":Object.assign(z.style,m);break;case"textContent":z.textContent=m;break;default:(!j||v!=="href"&&v!=="newWindow")&&z.setAttribute(v,m)}j&&f.addLinkAttributes(z,N.href,N.newWindow),O&&N.dataId&&this.setupStorage(z,N.dataId,nt,O)}static render(z){var E;const nt=z.annotationStorage,O=z.linkService,C=z.xfaHtml,f=z.intent||"display",N=document.createElement(C.name);C.attributes&&this.setAttributes({html:N,element:C,intent:f,linkService:O});const j=[[C,-1,N]],v=z.div;if(v.append(N),z.viewport){const p="matrix(".concat(z.viewport.transform.join(","),")");v.style.transform=p}f!=="richText"&&v.setAttribute("class","xfaLayer xfaFont");const m=[];for(;j.length>0;){const[p,d,x]=j.at(-1);if(d+1===p.children.length){j.pop();continue}const w=p.children[++j.at(-1)[1]];if(w===null)continue;const{name:b}=w;if(b==="#text"){const h=document.createTextNode(w.value);m.push(h),x.append(h);continue}const n=(E=w==null?void 0:w.attributes)!=null&&E.xmlns?document.createElementNS(w.attributes.xmlns,b):document.createElement(b);if(x.append(n),w.attributes&&this.setAttributes({html:n,element:w,storage:nt,intent:f,linkService:O}),w.children&&w.children.length>0)j.push([w,-1,n]);else if(w.value){const h=document.createTextNode(w.value);a.XfaText.shouldBuildText(b)&&m.push(h),n.append(h)}}for(const p of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:m}}static update(z){const nt="matrix(".concat(z.viewport.transform.join(","),")");z.div.style.transform=nt,z.div.hidden=!1}}o.XfaLayer=y}),((et,o,V)=>{var C,f,N,j,v,m,E,p,d,x,w,b,n,h,i,Ds,Is,Ls,js,rs,Ns,as,Os,Bs,Us,Hs,Ws,ee,os,Ce,Te,le,ls,Re,k,zs,cs,Gs,Xs,hs,Pe,ce;Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0;var a=V(1),y=V(4),Y=V(29),z=V(6),nt=V(5);const yt=class yt extends y.AnnotationEditor{constructor(g){super({...g,name:"inkEditor"});tt(this,i);tt(this,C,0);tt(this,f,0);tt(this,N,this.canvasPointermove.bind(this));tt(this,j,this.canvasPointerleave.bind(this));tt(this,v,this.canvasPointerup.bind(this));tt(this,m,this.canvasPointerdown.bind(this));tt(this,E,new Path2D);tt(this,p,!1);tt(this,d,!1);tt(this,x,!1);tt(this,w,null);tt(this,b,0);tt(this,n,0);tt(this,h,null);this.color=g.color||null,this.thickness=g.thickness||null,this.opacity=g.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(g){y.AnnotationEditor.initialize(g,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(g,D){switch(g){case a.AnnotationEditorParamsType.INK_THICKNESS:yt._defaultThickness=D;break;case a.AnnotationEditorParamsType.INK_COLOR:yt._defaultColor=D;break;case a.AnnotationEditorParamsType.INK_OPACITY:yt._defaultOpacity=D/100;break}}updateParams(g,D){switch(g){case a.AnnotationEditorParamsType.INK_THICKNESS:X(this,i,Ds).call(this,D);break;case a.AnnotationEditorParamsType.INK_COLOR:X(this,i,Is).call(this,D);break;case a.AnnotationEditorParamsType.INK_OPACITY:X(this,i,Ls).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,yt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,yt._defaultColor||y.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(yt._defaultOpacity*100)]]}get propertiesToUpdate(){var g;return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||yt._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||yt._defaultColor||y.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((g=this.opacity)!=null?g:yt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,i,Ce).call(this),X(this,i,Te).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,i,le).call(this)),X(this,i,ce).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,w).disconnect(),rt(this,w,null),super.remove())}setParent(g){!this.parent&&g?this._uiManager.removeShouldRescale(this):this.parent&&g===null&&this._uiManager.addShouldRescale(this),super.setParent(g)}onScaleChanging(){const[g,D]=this.parentDimensions,q=this.width*g,Z=this.height*D;this.setDimensions(q,Z)}enableEditMode(){t(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,m)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,p,!0),this.div.classList.add("disabled"),X(this,i,ce).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(g){this._focusEventsAllowed&&(super.focusin(g),this.enableEditMode())}canvasPointerdown(g){g.button!==0||!this.isInEditMode()||t(this,p)||(this.setInForeground(),g.preventDefault(),g.type!=="mouse"&&this.div.focus(),X(this,i,Ns).call(this,g.offsetX,g.offsetY))}canvasPointermove(g){g.preventDefault(),X(this,i,as).call(this,g.offsetX,g.offsetY)}canvasPointerup(g){g.preventDefault(),X(this,i,os).call(this,g)}canvasPointerleave(g){X(this,i,os).call(this,g)}get isResizable(){return!this.isEmpty()&&t(this,p)}render(){if(this.div)return this.div;let g,D;this.width&&(g=this.x,D=this.y),super.render(),y.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(_t=>{var K;return(K=this.div)==null?void 0:K.setAttribute("aria-label",_t)});const[q,Z,ft,At]=X(this,i,js).call(this);if(this.setAt(q,Z,0,0),this.setDims(ft,At),X(this,i,Ce).call(this),this.width){const[_t,K]=this.parentDimensions;this.setAspectRatio(this.width*_t,this.height*K),this.setAt(g*_t,D*K,this.width*_t,this.height*K),rt(this,x,!0),X(this,i,le).call(this),this.setDims(this.width*_t,this.height*K),X(this,i,ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,i,Te).call(this),this.div}setDimensions(g,D){const q=Math.round(g),Z=Math.round(D);if(t(this,b)===q&&t(this,n)===Z)return;rt(this,b,q),rt(this,n,Z),this.canvas.style.visibility="hidden";const[ft,At]=this.parentDimensions;this.width=g/ft,this.height=D/At,this.fixAndSetPosition(),t(this,p)&&X(this,i,ls).call(this,g,D),X(this,i,le).call(this),X(this,i,ee).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(g,D,q){var Nt,Wt,Vt;if(g instanceof Y.InkAnnotationElement)return null;const Z=super.deserialize(g,D,q);Z.thickness=g.thickness,Z.color=a.Util.makeHexColor(...g.color),Z.opacity=g.opacity;const[ft,At]=Z.pageDimensions,_t=Z.width*ft,K=Z.height*At,Ct=Z.parentScale,St=g.thickness/2;rt(Z,p,!0),rt(Z,b,Math.round(_t)),rt(Z,n,Math.round(K));const{paths:Ut,rect:Ot,rotation:qt}=g;for(let{bezier:xt}of Ut){xt=X(Nt=yt,k,Gs).call(Nt,xt,Ot,qt);const it=[];Z.paths.push(it);let lt=Ct*(xt[0]-St),Pt=Ct*(xt[1]-St);for(let Gt=2,I=xt.length;Gt<I;Gt+=6){const mt=Ct*(xt[Gt]-St),wt=Ct*(xt[Gt+1]-St),Dt=Ct*(xt[Gt+2]-St),jt=Ct*(xt[Gt+3]-St),Rt=Ct*(xt[Gt+4]-St),T=Ct*(xt[Gt+5]-St);it.push([[lt,Pt],[mt,wt],[Dt,jt],[Rt,T]]),lt=Rt,Pt=T}const Xt=X(this,k,zs).call(this,it);Z.bezierPath2D.push(Xt)}const Mt=X(Wt=Z,i,hs).call(Wt);return rt(Z,f,Math.max(y.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),rt(Z,C,Math.max(y.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1])),X(Vt=Z,i,ls).call(Vt,_t,K),Z}serialize(){if(this.isEmpty())return null;const g=this.getRect(0,0),D=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:D,thickness:this.thickness,opacity:this.opacity,paths:X(this,i,Xs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,g),pageIndex:this.pageIndex,rect:g,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};C=new WeakMap,f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakMap,x=new WeakMap,w=new WeakMap,b=new WeakMap,n=new WeakMap,h=new WeakMap,i=new WeakSet,Ds=function(g){const D=this.thickness;this.addCommands({cmd:()=>{this.thickness=g,X(this,i,ce).call(this)},undo:()=>{this.thickness=D,X(this,i,ce).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Is=function(g){const D=this.color;this.addCommands({cmd:()=>{this.color=g,X(this,i,ee).call(this)},undo:()=>{this.color=D,X(this,i,ee).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ls=function(g){g/=100;const D=this.opacity;this.addCommands({cmd:()=>{this.opacity=g,X(this,i,ee).call(this)},undo:()=>{this.opacity=D,X(this,i,ee).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},js=function(){const{parentRotation:g,parentDimensions:[D,q]}=this;switch(g){case 90:return[0,q,q,D];case 180:return[D,q,D,q];case 270:return[D,0,q,D];default:return[0,0,D,q]}},rs=function(){const{ctx:g,color:D,opacity:q,thickness:Z,parentScale:ft,scaleFactor:At}=this;g.lineWidth=Z*ft/At,g.lineCap="round",g.lineJoin="round",g.miterLimit=10,g.strokeStyle="".concat(D).concat((0,nt.opacityToHex)(q))},Ns=function(g,D){var q;this.canvas.addEventListener("contextmenu",z.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,j)),this.canvas.addEventListener("pointermove",t(this,N)),this.canvas.addEventListener("pointerup",t(this,v)),this.canvas.removeEventListener("pointerdown",t(this,m)),this.isEditing=!0,t(this,x)||(rt(this,x,!0),X(this,i,le).call(this),this.thickness||(this.thickness=yt._defaultThickness),this.color||(this.color=yt._defaultColor||y.AnnotationEditor._defaultLineColor),(q=this.opacity)!=null||(this.opacity=yt._defaultOpacity)),this.currentPath.push([g,D]),rt(this,d,!1),X(this,i,rs).call(this),rt(this,h,()=>{X(this,i,Us).call(this),t(this,h)&&window.requestAnimationFrame(t(this,h))}),window.requestAnimationFrame(t(this,h))},as=function(g,D){const[q,Z]=this.currentPath.at(-1);if(this.currentPath.length>1&&g===q&&D===Z)return;const ft=this.currentPath;let At=t(this,E);if(ft.push([g,D]),rt(this,d,!0),ft.length<=2){At.moveTo(...ft[0]),At.lineTo(g,D);return}ft.length===3&&(rt(this,E,At=new Path2D),At.moveTo(...ft[0])),X(this,i,Hs).call(this,At,...ft.at(-3),...ft.at(-2),g,D)},Os=function(){if(this.currentPath.length===0)return;const g=this.currentPath.at(-1);t(this,E).lineTo(...g)},Bs=function(g,D){rt(this,h,null),g=Math.min(Math.max(g,0),this.canvas.width),D=Math.min(Math.max(D,0),this.canvas.height),X(this,i,as).call(this,g,D),X(this,i,Os).call(this);let q;if(this.currentPath.length!==1)q=X(this,i,Ws).call(this);else{const K=[g,D];q=[[K,K.slice(),K.slice(),K]]}const Z=t(this,E),ft=this.currentPath;this.currentPath=[],rt(this,E,new Path2D);const At=()=>{this.allRawPaths.push(ft),this.paths.push(q),this.bezierPath2D.push(Z),this.rebuild()},_t=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,i,Ce).call(this),X(this,i,Te).call(this)),X(this,i,ce).call(this))};this.addCommands({cmd:At,undo:_t,mustExec:!0})},Us=function(){if(!t(this,d))return;rt(this,d,!1);const g=Math.ceil(this.thickness*this.parentScale),D=this.currentPath.slice(-3),q=D.map(At=>At[0]),Z=D.map(At=>At[1]);Math.min(...q)-g,Math.max(...q)+g,Math.min(...Z)-g,Math.max(...Z)+g;const{ctx:ft}=this;ft.save(),ft.clearRect(0,0,this.canvas.width,this.canvas.height);for(const At of this.bezierPath2D)ft.stroke(At);ft.stroke(t(this,E)),ft.restore()},Hs=function(g,D,q,Z,ft,At,_t){const K=(D+Z)/2,Ct=(q+ft)/2,St=(Z+At)/2,Ut=(ft+_t)/2;g.bezierCurveTo(K+2*(Z-K)/3,Ct+2*(ft-Ct)/3,St+2*(Z-St)/3,Ut+2*(ft-Ut)/3,St,Ut)},Ws=function(){const g=this.currentPath;if(g.length<=2)return[[g[0],g[0],g.at(-1),g.at(-1)]];const D=[];let q,[Z,ft]=g[0];for(q=1;q<g.length-2;q++){const[Ot,qt]=g[q],[Mt,Nt]=g[q+1],Wt=(Ot+Mt)/2,Vt=(qt+Nt)/2,xt=[Z+2*(Ot-Z)/3,ft+2*(qt-ft)/3],it=[Wt+2*(Ot-Wt)/3,Vt+2*(qt-Vt)/3];D.push([[Z,ft],xt,it,[Wt,Vt]]),[Z,ft]=[Wt,Vt]}const[At,_t]=g[q],[K,Ct]=g[q+1],St=[Z+2*(At-Z)/3,ft+2*(_t-ft)/3],Ut=[K+2*(At-K)/3,Ct+2*(_t-Ct)/3];return D.push([[Z,ft],St,Ut,[K,Ct]]),D},ee=function(){if(this.isEmpty()){X(this,i,Re).call(this);return}X(this,i,rs).call(this);const{canvas:g,ctx:D}=this;D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,g.width,g.height),X(this,i,Re).call(this);for(const q of this.bezierPath2D)D.stroke(q)},os=function(g){this.canvas.removeEventListener("pointerleave",t(this,j)),this.canvas.removeEventListener("pointermove",t(this,N)),this.canvas.removeEventListener("pointerup",t(this,v)),this.canvas.addEventListener("pointerdown",t(this,m)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",z.noContextMenu)},10),X(this,i,Bs).call(this,g.offsetX,g.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ce=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(g=>{var D;return(D=this.canvas)==null?void 0:D.setAttribute("aria-label",g)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Te=function(){rt(this,w,new ResizeObserver(g=>{const D=g[0].contentRect;D.width&&D.height&&this.setDimensions(D.width,D.height)})),t(this,w).observe(this.div)},le=function(){if(!t(this,x))return;const[g,D]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*g),this.canvas.height=Math.ceil(this.height*D),X(this,i,Re).call(this)},ls=function(g,D){const q=X(this,i,Pe).call(this),Z=(g-q)/t(this,f),ft=(D-q)/t(this,C);this.scaleFactor=Math.min(Z,ft)},Re=function(){const g=X(this,i,Pe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+g,this.translationY*this.scaleFactor+g)},k=new WeakSet,zs=function(g){const D=new Path2D;for(let q=0,Z=g.length;q<Z;q++){const[ft,At,_t,K]=g[q];q===0&&D.moveTo(...ft),D.bezierCurveTo(At[0],At[1],_t[0],_t[1],K[0],K[1])}return D},cs=function(g,D,q){const[Z,ft,At,_t]=D;switch(q){case 0:for(let K=0,Ct=g.length;K<Ct;K+=2)g[K]+=Z,g[K+1]=_t-g[K+1];break;case 90:for(let K=0,Ct=g.length;K<Ct;K+=2){const St=g[K];g[K]=g[K+1]+Z,g[K+1]=St+ft}break;case 180:for(let K=0,Ct=g.length;K<Ct;K+=2)g[K]=At-g[K],g[K+1]+=ft;break;case 270:for(let K=0,Ct=g.length;K<Ct;K+=2){const St=g[K];g[K]=At-g[K+1],g[K+1]=_t-St}break;default:throw new Error("Invalid rotation")}return g},Gs=function(g,D,q){const[Z,ft,At,_t]=D;switch(q){case 0:for(let K=0,Ct=g.length;K<Ct;K+=2)g[K]-=Z,g[K+1]=_t-g[K+1];break;case 90:for(let K=0,Ct=g.length;K<Ct;K+=2){const St=g[K];g[K]=g[K+1]-ft,g[K+1]=St-Z}break;case 180:for(let K=0,Ct=g.length;K<Ct;K+=2)g[K]=At-g[K],g[K+1]-=ft;break;case 270:for(let K=0,Ct=g.length;K<Ct;K+=2){const St=g[K];g[K]=_t-g[K+1],g[K+1]=At-St}break;default:throw new Error("Invalid rotation")}return g},Xs=function(g,D,q,Z){var Ct,St;const ft=[],At=this.thickness/2,_t=g*D+At,K=g*q+At;for(const Ut of this.paths){const Ot=[],qt=[];for(let Mt=0,Nt=Ut.length;Mt<Nt;Mt++){const[Wt,Vt,xt,it]=Ut[Mt],lt=g*Wt[0]+_t,Pt=g*Wt[1]+K,Xt=g*Vt[0]+_t,Gt=g*Vt[1]+K,I=g*xt[0]+_t,mt=g*xt[1]+K,wt=g*it[0]+_t,Dt=g*it[1]+K;Mt===0&&(Ot.push(lt,Pt),qt.push(lt,Pt)),Ot.push(Xt,Gt,I,mt,wt,Dt),qt.push(Xt,Gt),Mt===Nt-1&&qt.push(wt,Dt)}ft.push({bezier:X(Ct=yt,k,cs).call(Ct,Ot,Z,this.rotation),points:X(St=yt,k,cs).call(St,qt,Z,this.rotation)})}return ft},hs=function(){let g=1/0,D=-1/0,q=1/0,Z=-1/0;for(const ft of this.paths)for(const[At,_t,K,Ct]of ft){const St=a.Util.bezierBoundingBox(...At,..._t,...K,...Ct);g=Math.min(g,St[0]),q=Math.min(q,St[1]),D=Math.max(D,St[2]),Z=Math.max(Z,St[3])}return[g,q,D,Z]},Pe=function(){return t(this,p)?Math.ceil(this.thickness*this.parentScale):0},ce=function(g=!1){if(this.isEmpty())return;if(!t(this,p)){X(this,i,ee).call(this);return}const D=X(this,i,hs).call(this),q=X(this,i,Pe).call(this);rt(this,f,Math.max(y.AnnotationEditor.MIN_SIZE,D[2]-D[0])),rt(this,C,Math.max(y.AnnotationEditor.MIN_SIZE,D[3]-D[1]));const Z=Math.ceil(q+t(this,f)*this.scaleFactor),ft=Math.ceil(q+t(this,C)*this.scaleFactor),[At,_t]=this.parentDimensions;this.width=Z/At,this.height=ft/_t,this.setAspectRatio(Z,ft);const K=this.translationX,Ct=this.translationY;this.translationX=-D[0],this.translationY=-D[1],X(this,i,le).call(this),X(this,i,ee).call(this),rt(this,b,Z),rt(this,n,ft),this.setDims(Z,ft);const St=g?q/this.scaleFactor/2:0;this.translate(K-this.translationX-St,Ct-this.translationY-St)},tt(yt,k),$t(yt,"_defaultColor",null),$t(yt,"_defaultOpacity",1),$t(yt,"_defaultThickness",1),$t(yt,"_type","ink");let O=yt;o.InkEditor=O}),((et,o,V)=>{var O,C,f,N,j,v,m,E,p,d,x,ge,be,ke,ds,Vs,qs,us,Me,Ys;Object.defineProperty(o,"__esModule",{value:!0}),o.StampEditor=void 0;var a=V(1),y=V(4),Y=V(6),z=V(29);const _=class _ extends y.AnnotationEditor{constructor(H){super({...H,name:"stampEditor"});tt(this,x);tt(this,O,null);tt(this,C,null);tt(this,f,null);tt(this,N,null);tt(this,j,null);tt(this,v,null);tt(this,m,null);tt(this,E,null);tt(this,p,!1);tt(this,d,!1);rt(this,N,H.bitmapUrl),rt(this,j,H.bitmapFile)}static initialize(H){y.AnnotationEditor.initialize(H)}static get supportedTypes(){const H=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",H.map($=>"image/".concat($)))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(H){return this.supportedTypes.includes(H)}static paste(H,$){$.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:H.getAsFile()})}remove(){var H,$;t(this,C)&&(rt(this,O,null),this._uiManager.imageManager.deleteId(t(this,C)),(H=t(this,v))==null||H.remove(),rt(this,v,null),($=t(this,m))==null||$.disconnect(),rt(this,m,null)),super.remove()}rebuild(){if(!this.parent){t(this,C)&&X(this,x,ke).call(this);return}super.rebuild(),this.div!==null&&(t(this,C)&&X(this,x,ke).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,O)||t(this,N)||t(this,j))}get isResizable(){return!0}render(){if(this.div)return this.div;let H,$;if(this.width&&(H=this.x,$=this.y),super.render(),this.div.hidden=!0,t(this,O)?X(this,x,ds).call(this):X(this,x,ke).call(this),this.width){const[U,ct]=this.parentDimensions;this.setAt(H*U,$*ct,this.width*U,this.height*ct)}return this.div}static deserialize(H,$,U){if(H instanceof z.StampAnnotationElement)return null;const ct=super.deserialize(H,$,U),{rect:R,bitmapUrl:B,bitmapId:J,isSvg:S,accessibilityData:e}=H;J&&U.imageManager.isValidId(J)?rt(ct,C,J):rt(ct,N,B),rt(ct,p,S);const[s,u]=ct.pageDimensions;return ct.width=(R[2]-R[0])/s,ct.height=(R[3]-R[1])/u,e&&(ct.altTextData=e),ct}serialize(H=!1,$=null){if(this.isEmpty())return null;const U={annotationType:a.AnnotationEditorType.STAMP,bitmapId:t(this,C),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,p),structTreeParentId:this._structTreeParentId};if(H)return U.bitmapUrl=X(this,x,Me).call(this,!0),U.accessibilityData=this.altTextData,U;const{decorative:ct,altText:R}=this.altTextData;if(!ct&&R&&(U.accessibilityData={type:"Figure",alt:R}),$===null)return U;$.stamps||($.stamps=new Map);const B=t(this,p)?(U.rect[2]-U.rect[0])*(U.rect[3]-U.rect[1]):null;if(!$.stamps.has(t(this,C)))$.stamps.set(t(this,C),{area:B,serialized:U}),U.bitmap=X(this,x,Me).call(this,!1);else if(t(this,p)){const J=$.stamps.get(t(this,C));B>J.area&&(J.area=B,J.serialized.bitmap.close(),J.serialized.bitmap=X(this,x,Me).call(this,!1))}return U}};O=new WeakMap,C=new WeakMap,f=new WeakMap,N=new WeakMap,j=new WeakMap,v=new WeakMap,m=new WeakMap,E=new WeakMap,p=new WeakMap,d=new WeakMap,x=new WeakSet,ge=function(H,$=!1){if(!H){this.remove();return}rt(this,O,H.bitmap),$||(rt(this,C,H.id),rt(this,p,H.isSvg)),X(this,x,ds).call(this)},be=function(){rt(this,f,null),this._uiManager.enableWaiting(!1),t(this,v)&&this.div.focus()},ke=function(){if(t(this,C)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,C)).then($=>X(this,x,ge).call(this,$,!0)).finally(()=>X(this,x,be).call(this));return}if(t(this,N)){const $=t(this,N);rt(this,N,null),this._uiManager.enableWaiting(!0),rt(this,f,this._uiManager.imageManager.getFromUrl($).then(U=>X(this,x,ge).call(this,U)).finally(()=>X(this,x,be).call(this)));return}if(t(this,j)){const $=t(this,j);rt(this,j,null),this._uiManager.enableWaiting(!0),rt(this,f,this._uiManager.imageManager.getFromFile($).then(U=>X(this,x,ge).call(this,U)).finally(()=>X(this,x,be).call(this)));return}const H=document.createElement("input");H.type="file",H.accept=_.supportedTypesStr,rt(this,f,new Promise($=>{H.addEventListener("change",async()=>{if(!H.files||H.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const U=await this._uiManager.imageManager.getFromFile(H.files[0]);X(this,x,ge).call(this,U)}$()}),H.addEventListener("cancel",()=>{this.remove(),$()})}).finally(()=>X(this,x,be).call(this))),H.click()},ds=function(){const{div:H}=this;let{width:$,height:U}=t(this,O);const[ct,R]=this.pageDimensions,B=.75;if(this.width)$=this.width*ct,U=this.height*R;else if($>B*ct||U>B*R){const s=Math.min(B*ct/$,B*R/U);$*=s,U*=s}const[J,S]=this.parentDimensions;this.setDims($*J/ct,U*S/R),this._uiManager.enableWaiting(!1);const e=rt(this,v,document.createElement("canvas"));H.append(e),H.hidden=!1,X(this,x,us).call(this,$,U),X(this,x,Ys).call(this),t(this,d)||(this.parent.addUndoableEditor(this),rt(this,d,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Vs=function(H,$){var B;const[U,ct]=this.parentDimensions;this.width=H/U,this.height=$/ct,this.setDims(H,$),(B=this._initialOptions)!=null&&B.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,E)!==null&&clearTimeout(t(this,E)),rt(this,E,setTimeout(()=>{rt(this,E,null),X(this,x,us).call(this,H,$)},200))},qs=function(H,$){const{width:U,height:ct}=t(this,O);let R=U,B=ct,J=t(this,O);for(;R>2*H||B>2*$;){const S=R,e=B;R>2*H&&(R=R>=16384?Math.floor(R/2)-1:Math.ceil(R/2)),B>2*$&&(B=B>=16384?Math.floor(B/2)-1:Math.ceil(B/2));const s=new OffscreenCanvas(R,B);s.getContext("2d").drawImage(J,0,0,S,e,0,0,R,B),J=s.transferToImageBitmap()}return J},us=function(H,$){H=Math.ceil(H),$=Math.ceil($);const U=t(this,v);if(!U||U.width===H&&U.height===$)return;U.width=H,U.height=$;const ct=t(this,p)?t(this,O):X(this,x,qs).call(this,H,$),R=U.getContext("2d");R.filter=this._uiManager.hcmFilter,R.drawImage(ct,0,0,ct.width,ct.height,0,0,H,$)},Me=function(H){if(H){if(t(this,p)){const ct=this._uiManager.imageManager.getSvgUrl(t(this,C));if(ct)return ct}const $=document.createElement("canvas");return{width:$.width,height:$.height}=t(this,O),$.getContext("2d").drawImage(t(this,O),0,0),$.toDataURL()}if(t(this,p)){const[$,U]=this.pageDimensions,ct=Math.round(this.width*$*Y.PixelsPerInch.PDF_TO_CSS_UNITS),R=Math.round(this.height*U*Y.PixelsPerInch.PDF_TO_CSS_UNITS),B=new OffscreenCanvas(ct,R);return B.getContext("2d").drawImage(t(this,O),0,0,t(this,O).width,t(this,O).height,0,0,ct,R),B.transferToImageBitmap()}return structuredClone(t(this,O))},Ys=function(){rt(this,m,new ResizeObserver(H=>{const $=H[0].contentRect;$.width&&$.height&&X(this,x,Vs).call(this,$.width,$.height)})),t(this,m).observe(this.div)},$t(_,"_type","stamp");let nt=_;o.StampEditor=nt})],__webpack_module_cache__={};function __w_pdfjs_require__(et){var o=__webpack_module_cache__[et];if(o!==void 0)return o.exports;var V=__webpack_module_cache__[et]={exports:{}};return __webpack_modules__[et](V,V.exports,__w_pdfjs_require__),V.exports}var __webpack_exports__={};return(()=>{var et=__webpack_exports__;Object.defineProperty(et,"__esModule",{value:!0}),Object.defineProperty(et,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(et,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Y.AnnotationEditorLayer}}),Object.defineProperty(et,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(et,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(et,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return z.AnnotationEditorUIManager}}),Object.defineProperty(et,"AnnotationLayer",{enumerable:!0,get:function(){return nt.AnnotationLayer}}),Object.defineProperty(et,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(et,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(et,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(et,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(et,"GlobalWorkerOptions",{enumerable:!0,get:function(){return O.GlobalWorkerOptions}}),Object.defineProperty(et,"ImageKind",{enumerable:!0,get:function(){return o.ImageKind}}),Object.defineProperty(et,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(et,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(et,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(et,"PDFDataRangeTransport",{enumerable:!0,get:function(){return V.PDFDataRangeTransport}}),Object.defineProperty(et,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(et,"PDFWorker",{enumerable:!0,get:function(){return V.PDFWorker}}),Object.defineProperty(et,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(et,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(et,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(et,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(et,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(et,"SVGGraphics",{enumerable:!0,get:function(){return V.SVGGraphics}}),Object.defineProperty(et,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(et,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(et,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(et,"XfaLayer",{enumerable:!0,get:function(){return C.XfaLayer}}),Object.defineProperty(et,"build",{enumerable:!0,get:function(){return V.build}}),Object.defineProperty(et,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(et,"getDocument",{enumerable:!0,get:function(){return V.getDocument}}),Object.defineProperty(et,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(et,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(et,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(et,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(et,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(et,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(et,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(et,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(et,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(et,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(et,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(et,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(et,"version",{enumerable:!0,get:function(){return V.version}});var o=__w_pdfjs_require__(1),V=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),Y=__w_pdfjs_require__(27),z=__w_pdfjs_require__(5),nt=__w_pdfjs_require__(29),O=__w_pdfjs_require__(14),C=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();typeof window<"u"&&(pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js");const PDFViewer=({url:et})=>{const o=reactExports.useRef(null),[V,a]=reactExports.useState(1),[y,Y]=reactExports.useState(0),[z,nt]=reactExports.useState(null),[O,C]=reactExports.useState(!0),[f,N]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{try{C(!0),N(!1);const p=await pdfExports.getDocument(et).promise;nt(p),Y(p.numPages),C(!1)}catch(E){console.error("Error loading PDF:",E),N(!0),C(!1)}})()},[et]),reactExports.useEffect(()=>{if(!z||!o.current)return;(async()=>{try{const E=await z.getPage(V),p=o.current,d=p.getContext("2d"),w=p.parentElement.clientWidth,b=E.getViewport({scale:1}),n=w/b.width,h=E.getViewport({scale:n});p.height=h.height,p.width=h.width;const i={canvasContext:d,viewport:h};await E.render(i).promise}catch(E){console.error("Error rendering page:",E)}})()},[z,V]);const j=()=>{V>1&&a(V-1)},v=()=>{V<y&&a(V+1)};return O?jsxRuntimeExports.jsx("div",{className:"relative w-full h-full bg-slate-100 dark:bg-slate-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)]",children:"Cargando presentación..."})]})}):f?jsxRuntimeExports.jsx("div",{className:"relative w-full h-full bg-slate-100 dark:bg-slate-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] mb-4",children:"No se pudo cargar el PDF"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noreferrer",className:"text-emerald-500 font-bold hover:underline",children:"Descargar PDF"})]})}):jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full bg-slate-100 dark:bg-slate-900 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("canvas",{ref:o,className:"max-w-full h-auto shadow-lg"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 p-4 bg-slate-200 dark:bg-slate-800 border-t border-slate-300 dark:border-slate-700",children:[jsxRuntimeExports.jsxs("button",{onClick:j,disabled:V===1,className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-medium hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.ArrowUp,{className:"w-4 h-4 rotate-[-90deg]"}),"Anterior"]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 rounded-lg bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600",children:jsxRuntimeExports.jsxs("span",{className:"font-mono text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[var(--text-primary)]",children:V}),jsxRuntimeExports.jsx("span",{className:"text-[var(--text-secondary)]",children:" / "}),jsxRuntimeExports.jsx("span",{className:"text-[var(--text-secondary)]",children:y})]})}),jsxRuntimeExports.jsxs("button",{onClick:v,disabled:V===y,className:"px-4 py-2 rounded-lg bg-emerald-500 text-white font-medium hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:["Siguiente",jsxRuntimeExports.jsx(Icons.ArrowUp,{className:"w-4 h-4 rotate-90"})]})]})]})},useMousePosition=()=>{const{lite:et}=useStore(performanceMode);return V=>{if(et)return;const{currentTarget:a}=V,y=a.getBoundingClientRect();a.style.setProperty("--mouse-x","".concat(V.clientX-y.left,"px")),a.style.setProperty("--mouse-y","".concat(V.clientY-y.top,"px"))}},navigateTo=et=>{window.location.hash=et,window.scrollTo({top:0,behavior:"smooth"})},getCategoryTheme=et=>{const o=et.toLowerCase();return o.includes("auto")||o.includes("app")||o.includes("desarrollo")?{text:"text-emerald-700 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-500/10",bullet:"bg-emerald-600",gradientFrom:"from-emerald-600/20",colors:{"--card-border":"rgba(5, 150, 105, 0.3)","--glass-glow":"rgba(5, 150, 105, 0.5)","--neon-glow":"rgba(5, 150, 105, 0.4)"}}:o.includes("business")||o.includes("bi")||o.includes("data")?{text:"text-blue-700 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-500/10",bullet:"bg-blue-600",gradientFrom:"from-blue-600/20",colors:{"--card-border":"rgba(37, 99, 235, 0.3)","--glass-glow":"rgba(37, 99, 235, 0.5)","--neon-glow":"rgba(37, 99, 235, 0.4)"}}:o.includes("tec")||o.includes("consult")?{text:"text-violet-700 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-500/10",bullet:"bg-violet-600",gradientFrom:"from-violet-600/20",colors:{"--card-border":"rgba(124, 58, 237, 0.3)","--glass-glow":"rgba(124, 58, 237, 0.5)","--neon-glow":"rgba(124, 58, 237, 0.4)"}}:o.includes("cloud")||o.includes("nube")||o.includes("devops")?{text:"text-cyan-700 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-500/10",bullet:"bg-cyan-600",gradientFrom:"from-cyan-600/20",colors:{"--card-border":"rgba(6, 182, 212, 0.3)","--glass-glow":"rgba(6, 182, 212, 0.5)","--neon-glow":"rgba(6, 182, 212, 0.4)"}}:o.includes("network")||o.includes("red")||o.includes("connect")||o.includes("wifi")?{text:"text-rose-700 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-500/10",bullet:"bg-rose-600",gradientFrom:"from-rose-600/20",colors:{"--card-border":"rgba(225, 29, 72, 0.3)","--glass-glow":"rgba(225, 29, 72, 0.5)","--neon-glow":"rgba(225, 29, 72, 0.4)"}}:{text:"text-slate-700 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-500/10",bullet:"bg-slate-600",gradientFrom:"from-slate-600/20",colors:{"--card-border":"rgba(71, 85, 105, 0.25)","--glass-glow":"rgba(148, 163, 184, 0.4)","--neon-glow":"rgba(148, 163, 184, 0.3)"}}},Typewriter=({text:et,delay:o=25,startDelay:V=0,cursorColor:a="bg-emerald-500",onComplete:y,active:Y=!0})=>{const[z,nt]=reactExports.useState(""),[O,C]=reactExports.useState(!1);return reactExports.useEffect(()=>{Y&&C(!0)},[Y]),reactExports.useEffect(()=>{if(!O)return;const f=setTimeout(()=>{let N=0;const j=setInterval(()=>{N<et.length?(nt(et.slice(0,N+1)),N++):(clearInterval(j),y&&y())},o);return()=>clearInterval(j)},V);return()=>clearTimeout(f)},[O,et,o,V,y]),jsxRuntimeExports.jsxs("span",{className:"relative block w-full break-words",children:[jsxRuntimeExports.jsxs("span",{className:"opacity-0 pointer-events-none select-none","aria-hidden":"true",children:[et,jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-4 md:w-2.5 md:h-5 ml-0.5"})]}),jsxRuntimeExports.jsxs("span",{className:"absolute inset-0 top-0 left-0",children:[z,jsxRuntimeExports.jsx("span",{className:"animate-pulse inline-block w-2 h-4 md:w-2.5 md:h-5 ".concat(a," align-text-bottom ml-0.5")})]})]})},TechCard=({title:et,children:o,accentColor:V="emerald",className:a=""})=>{const y=V==="emerald"?{border:"border-emerald-500/20",bg:"bg-emerald-500/5",text:"text-emerald-600 dark:text-emerald-400",indicator:"bg-emerald-500",glow:"group-hover:shadow-[0_0_30px_rgba(16,185,129,0.15)]"}:{border:"border-cyan-500/20",bg:"bg-cyan-500/5",text:"text-cyan-600 dark:text-cyan-400",indicator:"bg-cyan-500",glow:"group-hover:shadow-[0_0_30px_rgba(6,182,212,0.15)]"},Y=V==="emerald"?"from-emerald-500/30":"from-cyan-500/30",z=V==="emerald"?"from-emerald-500/10":"from-cyan-500/10";return jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden rounded-[20px] border ".concat(y.border," ").concat(y.bg," backdrop-blur-md p-6 md:p-8 flex flex-col h-full group transition-all duration-700 hover:border-opacity-60 ").concat(y.glow," ").concat(a),children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-2 border-t-2 ".concat(y.border," rounded-tl-[18px] opacity-40 group-hover:opacity-100 transition-opacity duration-500")}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-2 border-b-2 ".concat(y.border," rounded-br-[18px] opacity-40 group-hover:opacity-100 transition-opacity duration-500")}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex gap-1 opacity-20 group-hover:opacity-50 transition-opacity",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full ".concat(y.indicator)}),jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full ".concat(y.indicator)}),jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full ".concat(y.indicator)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-5 opacity-90 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-sm ".concat(y.indicator," shadow-[0_0_10px_rgba(255,255,255,0.5)]")}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 w-2 h-2 rounded-sm ".concat(y.indicator," animate-ping opacity-30")})]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] md:text-xs font-bold tracking-[0.25em] uppercase font-mono ".concat(y.text),children:et}),jsxRuntimeExports.jsx("div",{className:"h-[1px] flex-grow bg-gradient-to-r ".concat(Y," to-transparent")})]}),jsxRuntimeExports.jsx("div",{className:"font-mono text-sm md:text-[15px] leading-relaxed ".concat(y.text," opacity-90 relative z-10 h-full flex flex-col justify-start"),children:o}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] mix-blend-overlay pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute -right-20 -bottom-20 w-64 h-64 bg-gradient-to-tl ".concat(z," to-transparent rounded-full blur-3xl pointer-events-none group-hover:opacity-100 opacity-50 transition-opacity duration-700")})]})},HomeView=()=>{const{lang:et}=useStore(settings),o=UI_TEXT[et],[V,a]=reactExports.useState(1),y=useMousePosition(),Y=reactExports.useRef([]);reactExports.useEffect(()=>{const nt=setTimeout(()=>{document.documentElement.style.scrollSnapType="y mandatory"},800);return()=>{document.documentElement.style.scrollSnapType="",clearTimeout(nt)}},[]),reactExports.useEffect(()=>{const nt=()=>{const O=window.scrollY+window.innerHeight/2;Y.current.forEach((C,f)=>{C&&O>=C.offsetTop&&O<C.offsetTop+C.offsetHeight&&a(f+1)})};return window.addEventListener("scroll",nt),()=>window.removeEventListener("scroll",nt)},[]);const z=nt=>{var O;(O=Y.current[nt-1])==null||O.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center w-full",children:[jsxRuntimeExports.jsxs("div",{className:"fixed left-3 md:left-8 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-4 md:gap-6 pointer-events-auto",children:[[{id:1,label:o.homeLabels.overview},{id:2,label:o.mission.title},{id:3,label:o.vision.title}].map(nt=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center gap-3 cursor-pointer",onClick:()=>z(nt.id),children:[jsxRuntimeExports.jsx("div",{className:"w-2.5 h-2.5 md:w-3.5 md:h-3.5 rounded-full transition-all duration-500 ease-in-out border border-[var(--card-border)] ".concat(V===nt.id?"bg-emerald-500 scale-125 shadow-[0_0_15px_rgba(16,185,129,0.6)] border-emerald-500":"bg-[var(--dock-item-bg)] hover:bg-[var(--text-tertiary)] group-hover:scale-110")}),jsxRuntimeExports.jsx("span",{className:"hidden md:block text-[10px] md:text-xs font-bold uppercase tracking-widest transition-all duration-500 ".concat(V===nt.id?"text-[var(--text-primary)] opacity-100 translate-x-0":"text-[var(--text-tertiary)] opacity-0 -translate-x-2 group-hover:opacity-70 group-hover:translate-x-0"),children:nt.label})]},nt.id)),jsxRuntimeExports.jsx("div",{className:"absolute left-[4px] md:left-[6px] top-2 bottom-2 w-[1px] bg-[var(--card-border)] -z-10 opacity-30"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("section",{ref:nt=>{Y.current[0]=nt},className:"min-h-screen min-h-[100svh] w-full flex flex-col justify-center items-center py-20 md:py-24 snap-start relative",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center animate-slide-up max-w-5xl mx-auto w-full",children:[jsxRuntimeExports.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl lg:text-[8rem] font-bold tracking-tighter mb-4 md:mb-6 text-transparent bg-clip-text bg-gradient-to-b from-[var(--text-primary)] via-[var(--text-primary)] to-transparent drop-shadow-sm leading-[0.9]",children:[o.heroTitle.split(" ")[0]," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 to-cyan-500 dark:from-emerald-400 dark:to-cyan-400 filter drop-shadow-[0_0_30px_rgba(52,211,153,0.3)]",children:o.heroTitle.split(" ").slice(1).join(" ")})]}),jsxRuntimeExports.jsxs("p",{className:"max-w-xl md:max-w-2xl mx-auto text-sm sm:text-lg md:text-xl text-[var(--text-secondary)] mb-8 md:mb-8 font-normal leading-relaxed tracking-wide px-2",children:[o.heroSubtitle,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-[var(--text-tertiary)] text-xs md:text-lg mt-2 block font-light",children:o.heroTags})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 justify-center items-center w-full px-4 mb-10 md:mb-12",children:[jsxRuntimeExports.jsx(LiquidButton,{onClick:()=>navigateTo("/contact"),className:"w-full sm:w-auto px-8 py-3.5 md:px-10 md:py-5 text-base md:text-lg min-w-[180px] md:min-w-[200px] rounded-full",style:{"--card-bg":"rgba(16, 185, 129, 0.15)","--card-border":"rgba(16, 185, 129, 0.4)","--glass-glow":"rgba(16, 185, 129, 0.6)"},children:o.startProject}),jsxRuntimeExports.jsx(LiquidButton,{onClick:()=>navigateTo("/portfolio"),className:"w-full sm:w-auto px-8 py-3.5 md:px-10 md:py-5 text-base md:text-lg min-w-[180px] md:min-w-[200px] rounded-full",children:o.exploreWork})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 w-full max-w-4xl mx-auto px-1",children:[{val:"<50ms",label:o.stats.latency},{val:"99.9%",label:o.stats.uptime},{val:"A+",label:o.stats.security},{val:"24/7",label:o.stats.global}].map((nt,O)=>jsxRuntimeExports.jsxs("div",{onMouseMove:y,className:"bento-card p-3 md:p-4 rounded-2xl md:rounded-3xl flex flex-col items-center justify-center h-20 md:h-28 group",children:[jsxRuntimeExports.jsx("span",{className:"text-lg md:text-3xl font-mono font-bold text-[var(--text-primary)] tracking-tight mb-1 group-hover:scale-110 transition-transform duration-500 group-hover:text-emerald-500",children:nt.val}),jsxRuntimeExports.jsx("span",{className:"text-[9px] md:text-[11px] text-[var(--text-secondary)] uppercase font-bold tracking-[0.2em]",children:nt.label})]},O))}),jsxRuntimeExports.jsx("button",{onClick:()=>z(2),className:"mt-8 md:mt-10 lg:mt-16 animate-bounce p-2 md:p-3 rounded-full border border-[var(--card-border)] bg-[var(--card-bg)] text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors backdrop-blur-md shadow-sm",children:jsxRuntimeExports.jsx(Icons.ArrowUp,{className:"w-4 h-4 md:w-5 md:h-5 rotate-180"})})]})}),jsxRuntimeExports.jsx("section",{ref:nt=>{Y.current[1]=nt},className:"min-h-screen min-h-[100svh] w-full flex flex-col justify-center items-center py-12 md:py-20 snap-start",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-12 lg:gap-16 items-center w-full max-w-6xl h-auto md:h-[500px]",children:[jsxRuntimeExports.jsx("div",{className:"order-2 md:order-1 h-full w-full",children:jsxRuntimeExports.jsx(TechCard,{title:"/// ".concat(o.mission.title.toUpperCase()),accentColor:"emerald",className:"h-full flex flex-col justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full justify-center",children:jsxRuntimeExports.jsx("div",{className:"text-base md:text-lg lg:text-xl leading-relaxed",children:jsxRuntimeExports.jsx(Typewriter,{text:o.mission.content,startDelay:200,cursorColor:"bg-emerald-500",delay:15,active:V>=2})})})})}),jsxRuntimeExports.jsxs("div",{className:"order-1 md:order-2 h-[300px] md:h-full w-full rounded-[2rem] md:rounded-[3rem] overflow-hidden border border-[var(--card-border)] relative group shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-900/60 via-transparent to-transparent z-10 mix-blend-multiply"}),jsxRuntimeExports.jsx("img",{src:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto=format&fit=crop",alt:"Mission Team",className:"w-full h-full object-cover transition-transform duration-[1.5s] ease-[cubic-bezier(0.25,1,0.3,1)] group-hover:scale-105"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 left-4 md:bottom-8 md:left-8 z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500/20 backdrop-blur-xl border border-emerald-500/30 text-emerald-100 text-[10px] md:text-xs font-bold px-3 py-1.5 md:px-4 md:py-2 rounded-full uppercase tracking-widest shadow-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-emerald-400 animate-pulse"}),o.homeLabels.collaboration]})})]})]})}),jsxRuntimeExports.jsx("section",{ref:nt=>{Y.current[2]=nt},className:"min-h-screen min-h-[100svh] w-full flex flex-col justify-center items-center py-12 md:py-20 snap-start",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-12 lg:gap-16 items-center w-full max-w-6xl h-auto md:h-[500px]",children:[jsxRuntimeExports.jsxs("div",{className:"order-1 h-[300px] md:h-full w-full rounded-[2rem] md:rounded-[3rem] overflow-hidden border border-[var(--card-border)] relative group shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-cyan-900/60 via-transparent to-transparent z-10 mix-blend-multiply"}),jsxRuntimeExports.jsx("img",{src:"https://images.unsplash.com/photo-1480694313141-fce5e697ee25?q=80&w=2070&auto=format&fit=crop",alt:"Future Vision",className:"w-full h-full object-cover transition-transform duration-[1.5s] ease-[cubic-bezier(0.25,1,0.3,1)] group-hover:scale-105"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 right-4 md:bottom-8 md:right-8 z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-cyan-500/20 backdrop-blur-xl border border-cyan-500/30 text-cyan-100 text-[10px] md:text-xs font-bold px-3 py-1.5 md:px-4 md:py-2 rounded-full uppercase tracking-widest shadow-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-cyan-400 animate-pulse"}),o.homeLabels.future]})})]}),jsxRuntimeExports.jsx("div",{className:"order-2 h-full w-full flex flex-col",children:jsxRuntimeExports.jsx(TechCard,{title:"/// ".concat(o.vision.title.toUpperCase()),accentColor:"blue",className:"h-full flex flex-col justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full justify-center",children:jsxRuntimeExports.jsx("div",{className:"text-base md:text-lg lg:text-xl leading-relaxed",children:jsxRuntimeExports.jsx(Typewriter,{text:o.vision.content,startDelay:200,cursorColor:"bg-cyan-500",delay:15,active:V>=3})})})})})]})})]})]})},ServicesView=()=>{const{lang:et}=useStore(settings),o=useMousePosition(),V=UI_TEXT[et].services;return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto pt-24 md:pt-32 px-4 md:px-6 pb-40 md:pb-52 animate-slide-up",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center text-center mb-8 md:mb-16 px-2 md:px-0",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-3 tracking-tight",children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] text-base md:text-lg",children:V.subtitle})]})}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap justify-center gap-4 md:gap-8",children:SERVICES[et].map((a,y)=>{const Y=Icons[a.iconName],z=getCategoryTheme(a.title);return jsxRuntimeExports.jsxs("div",{onMouseMove:o,className:"bento-card rounded-[2rem] md:rounded-[2.5rem] p-5 md:p-10 flex flex-col items-start text-left h-full group w-full md:w-[calc(33.33%-1.5rem)] flex-grow-0",style:z.colors,children:[jsxRuntimeExports.jsx("div",{className:"h-16 w-16 md:h-20 md:h-20 rounded-3xl bg-gradient-to-br ".concat(z.gradientFrom," to-transparent flex items-center justify-center mb-6 md:mb-10 border border-[var(--card-border)] ").concat(z.text," group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-lg relative z-10"),children:jsxRuntimeExports.jsx(Y,{className:"w-7 h-7 md:w-9 md:h-9 drop-shadow-sm"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-[var(--text-primary)] mb-4 md:mb-6 relative z-10 tracking-tight",children:a.title}),jsxRuntimeExports.jsx("div",{className:"flex-grow space-y-3 md:space-y-5 relative z-10 w-full flex flex-col items-start",children:a.items.map((nt,O)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-start gap-3 md:gap-4 text-[var(--text-secondary)] group-hover:text-[var(--text-primary)] transition-colors w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ".concat(z.bullet," shadow-sm flex-shrink-0 mt-2")}),jsxRuntimeExports.jsx("span",{className:"text-sm md:text-[15px] font-medium leading-relaxed",children:nt})]},O))}),jsxRuntimeExports.jsxs("div",{className:"mt-8 md:mt-10 pt-6 md:pt-8 border-t border-[var(--card-border)] relative z-10 w-full flex flex-col items-start",children:[jsxRuntimeExports.jsx("p",{className:"text-[10px] font-bold text-[var(--text-tertiary)] uppercase tracking-[0.2em] mb-4",children:V.impact}),jsxRuntimeExports.jsx("div",{className:"space-y-3 w-full flex flex-col items-start",children:a.valueProp.map((nt,O)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-start gap-3 text-xs text-[var(--text-secondary)] bg-[var(--input-bg)] p-3 rounded-xl border border-[var(--card-border)] group-hover:bg-[var(--glass-glow)] transition-colors w-full max-w-[280px]",children:[jsxRuntimeExports.jsx("span",{className:z.text,children:jsxRuntimeExports.jsx(Icons.CheckCircle,{className:"w-4 h-4"})}),nt]},O))})]})]},y)})}),jsxRuntimeExports.jsxs("div",{onMouseMove:o,className:"mt-8 md:mt-12 p-5 md:p-10 bento-card rounded-[2rem] md:rounded-[2.5rem]",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold mb-6 md:mb-8 tracking-tight text-[var(--text-primary)] text-center",children:V.engagementModels}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:ENGAGEMENT_MODELS[et].map((a,y)=>{const Y=Icons[a.iconName];return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center p-6 md:p-8 bg-[var(--input-bg)] rounded-3xl border border-[var(--card-border)] hover:bg-[var(--glass-glow)] transition-all duration-300 group cursor-default hover:-translate-y-1 text-center",children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-[var(--text-tertiary)] group-hover:text-emerald-500 group-hover:scale-110 transition-all",children:jsxRuntimeExports.jsx(Y,{className:"w-6 h-6 md:w-8 md:h-8"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-[var(--text-primary)] tracking-wide",children:a.label})]},y)})})]})]})},PortfolioModal=({project:et,onClose:o,lang:V})=>{var j,v,m,E,p,d,x;const[a,y]=reactExports.useState(0),[Y,z]=reactExports.useState(et.presentationUrl||((m=(v=(j=et.details)==null?void 0:j.documents)==null?void 0:v[0])==null?void 0:m.url)||null),nt=UI_TEXT[V].portfolio.modal;if(reactExports.useEffect(()=>{var w,b,n;z(et.presentationUrl||((n=(b=(w=et.details)==null?void 0:w.documents)==null?void 0:b[0])==null?void 0:n.url)||null)},[et]),reactExports.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),!et)return null;const O=et.screenshots&&et.screenshots.length>0?et.screenshots:[et.image],C=Y==null?void 0:Y.toLowerCase().endsWith(".pdf"),N=!C&&Y?(w=>w.includes("drive.google.com")?w.includes("/preview")?w:w.replace(/\/view.*/,"/preview"):"".concat(w,"#view=FitH"))(Y):null;return reactDomExports.createPortal(jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 md:p-6 animate-fadeIn",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:o}),jsxRuntimeExports.jsxs("div",{className:"bg-[var(--card-bg)] backdrop-blur-3xl border border-[var(--card-border)] w-full max-w-6xl max-h-[90vh] rounded-[2rem] shadow-2xl overflow-hidden relative flex flex-col md:flex-row animate-slide-up",children:[jsxRuntimeExports.jsx("button",{onClick:o,className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-black/20 hover:bg-black/40 text-white backdrop-blur-md transition-colors border border-white/10",children:jsxRuntimeExports.jsx(Icons.X,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 h-[40vh] md:h-auto bg-black relative flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex-grow relative overflow-hidden group",children:[jsxRuntimeExports.jsx("img",{src:O[a],alt:"Project Screenshot",className:"w-full h-full object-cover object-center transition-transform duration-700 hover:scale-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-50"})]}),O.length>1&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2 px-4 z-20",children:O.map((w,b)=>jsxRuntimeExports.jsx("button",{onClick:()=>y(b),className:"w-12 h-12 rounded-lg overflow-hidden border-2 transition-all ".concat(a===b?"border-emerald-500 scale-110":"border-white/30 opacity-70 hover:opacity-100"),children:jsxRuntimeExports.jsx("img",{src:w,alt:"thumb",className:"w-full h-full object-cover"})},b))})]}),jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-10 overflow-y-auto custom-scrollbar flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("span",{className:"text-emerald-500 font-bold uppercase tracking-widest text-xs mb-2 block",children:nt.caseStudy}),jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-[var(--text-primary)] mb-2 leading-tight",children:et.title}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:et.tech.split(",").map((w,b)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 rounded-full bg-[var(--input-bg)] border border-[var(--card-border)] text-[10px] font-bold uppercase tracking-wider text-[var(--text-secondary)]",children:w.trim()},b))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Briefcase,{className:"w-5 h-5 text-emerald-500"})," ",nt.overview]}),jsxRuntimeExports.jsxs("p",{className:"text-[var(--text-secondary)] leading-relaxed text-sm md:text-base",children:[et.problem," ",et.solution]})]}),Y&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Book,{className:"w-5 h-5 text-indigo-500"})," ",nt.presentation]}),jsxRuntimeExports.jsx("div",{className:"w-full h-[300px] md:h-[450px] rounded-xl overflow-hidden border border-[var(--card-border)] shadow-sm bg-[var(--card-bg)] relative",children:C?jsxRuntimeExports.jsx(PDFViewer,{url:Y}):jsxRuntimeExports.jsx("iframe",{src:N,title:"Project Presentation",className:"w-full h-full",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] mb-2",children:nt.pdfError}),jsxRuntimeExports.jsx("a",{href:Y,target:"_blank",rel:"noreferrer",className:"text-emerald-500 font-bold",children:nt.downloadPdf})]})})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-right",children:jsxRuntimeExports.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-bold text-emerald-500 hover:underline flex items-center justify-end gap-1",children:[nt.openTab," ",jsxRuntimeExports.jsx(Icons.ExternalLink,{className:"w-3 h-3"})]})})]}),et.videoUrl&&(et.videoUrl.includes("embed")||et.videoUrl.includes("/preview"))&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Video,{className:"w-5 h-5 text-red-500"})," ",nt.demoVideo]}),jsxRuntimeExports.jsx("div",{className:"relative w-full pt-[56.25%] rounded-xl overflow-hidden border border-[var(--card-border)] bg-black/50 shadow-lg group",children:jsxRuntimeExports.jsx("iframe",{src:et.videoUrl,title:et.title,className:"absolute top-0 left-0 w-full h-full z-10",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})]}),et.videoUrl&&!(et.videoUrl.includes("embed")||et.videoUrl.includes("/preview"))&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("a",{href:et.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full p-4 rounded-xl bg-[var(--input-bg)] border border-[var(--card-border)] text-[var(--text-primary)] hover:border-red-500/50 hover:bg-red-500/5 transition-all group shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Icons.Video,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold",children:nt.watchDemo}),jsxRuntimeExports.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:nt.externalLink})]}),jsxRuntimeExports.jsx(Icons.ExternalLink,{className:"w-4 h-4 opacity-50 group-hover:opacity-100 transition-opacity ml-auto"})]})}),((E=et.details)==null?void 0:E.currentFeatures)&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Layers,{className:"w-5 h-5 text-blue-500"})," ",nt.features]}),jsxRuntimeExports.jsx("ul",{className:"grid grid-cols-1 gap-2",children:et.details.currentFeatures.map((w,b)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-[var(--text-secondary)] bg-[var(--input-bg)] p-3 rounded-xl border border-[var(--card-border)]",children:[jsxRuntimeExports.jsx(Icons.CheckCircle,{className:"w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:w})]},b))})]}),((p=et.details)==null?void 0:p.techStack)&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Code,{className:"w-5 h-5 text-orange-500"})," ",nt.techStack]}),jsxRuntimeExports.jsx("ul",{className:"grid grid-cols-1 gap-2",children:et.details.techStack.map((w,b)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-[var(--text-secondary)] font-mono opacity-80",children:[jsxRuntimeExports.jsx("span",{className:"text-emerald-500 font-bold",children:">"}),jsxRuntimeExports.jsx("span",{children:w})]},b))})]}),((d=et.details)==null?void 0:d.documents)&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Book,{className:"w-5 h-5 text-indigo-500"})," ",nt.documentation]}),jsxRuntimeExports.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:et.details.documents.map((w,b)=>{const n=Y&&(Y===w.url||Y.includes(w.url)||w.url.includes(Y));return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs("button",{onClick:()=>z(w.url),className:"w-full flex items-center gap-3 p-3 rounded-xl border transition-all group h-full text-left ".concat(n?"bg-indigo-500/10 border-indigo-500 shadow-md ring-1 ring-indigo-500/30":"bg-[var(--input-bg)] border-[var(--card-border)] hover:bg-[var(--glass-glow)]"),children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg transition-colors ".concat(n?"bg-indigo-500 text-white":"bg-indigo-500/10 text-indigo-500 group-hover:bg-indigo-500 group-hover:text-white"),children:jsxRuntimeExports.jsx(Icons.Book,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium leading-tight ".concat(n?"text-[var(--text-primary)] font-bold":"text-[var(--text-primary)]"),children:w.label}),n&&jsxRuntimeExports.jsx("div",{className:"ml-auto w-2 h-2 rounded-full bg-indigo-500"})]})},b)})})]}),((x=et.details)==null?void 0:x.upcomingFeatures)&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-[var(--text-primary)] mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Icons.Rocket,{className:"w-5 h-5 text-purple-500"})," ",nt.roadmap]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:et.details.upcomingFeatures.map((w,b)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-[var(--text-secondary)] opacity-80",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-500 mt-2 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:w})]},b))})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t border-[var(--card-border)] flex flex-col gap-3",children:et.repoUrl&&jsxRuntimeExports.jsxs("a",{href:et.repoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm font-bold text-[var(--text-primary)] hover:text-emerald-500 transition-colors group",children:[jsxRuntimeExports.jsx(Icons.GitHub,{className:"w-5 h-5"}),nt.viewRepo,jsxRuntimeExports.jsx(Icons.ExternalLink,{className:"w-4 h-4 opacity-50 group-hover:opacity-100 transition-opacity"})]})})]})]})]})]}),document.body)},PortfolioView=()=>{const{lang:et}=useStore(settings),o=useMousePosition(),[V,a]=reactExports.useState(null),y=UI_TEXT[et].portfolio;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto pt-24 md:pt-32 px-4 md:px-6 pb-32 md:pb-40 animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8 md:mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-3 tracking-tight",children:y.title}),jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] text-base md:text-lg",children:y.subtitle})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10",children:PORTFOLIO[et].map((Y,z)=>jsxRuntimeExports.jsxs("div",{onMouseMove:o,onClick:()=>a(Y),className:"bento-card rounded-[2rem] md:rounded-[3rem] overflow-hidden group p-0 border-0 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"h-[250px] md:h-[400px] overflow-hidden relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[var(--bg-primary)] via-transparent to-transparent z-10 opacity-90"}),jsxRuntimeExports.jsx("img",{src:Y.image,alt:Y.title,className:"w-full h-full object-cover transition-transform duration-[1.5s] ease-[cubic-bezier(0.16,1,0.3,1)] group-hover:scale-105"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 flex items-center justify-center backdrop-blur-[2px]",children:jsxRuntimeExports.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-full px-6 py-3 text-white font-bold text-sm tracking-widest uppercase transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 flex items-center gap-2",children:[y.viewDetails," ",jsxRuntimeExports.jsx(Icons.ArrowRight,{className:"w-4 h-4"})]})}),jsxRuntimeExports.jsx("div",{className:"absolute top-6 right-6 md:top-8 md:right-8 z-20 pointer-events-none",children:jsxRuntimeExports.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 rounded-full bg-[var(--card-bg)] border border-[var(--card-border)] text-[10px] md:text-[11px] font-bold uppercase tracking-widest text-[var(--text-primary)] backdrop-blur-xl shadow-xl",children:Y.tech.split(",")[0]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 md:p-10 relative z-20 -mt-16 md:-mt-24 pointer-events-none",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-4xl font-bold text-[var(--text-primary)] mb-3 drop-shadow-lg tracking-tight",children:Y.title}),jsxRuntimeExports.jsxs("p",{className:"text-emerald-500 font-semibold mb-6 md:mb-8 flex items-center gap-2 text-xs md:text-sm uppercase tracking-wider",children:[jsxRuntimeExports.jsx(Icons.CheckCircle,{className:"w-4 h-4 md:w-5 md:h-5"})," ",Y.result]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 text-sm text-[var(--text-secondary)]",children:[jsxRuntimeExports.jsxs("div",{className:"bg-[var(--input-bg)] p-4 md:p-6 rounded-2xl border border-[var(--card-border)]",children:[jsxRuntimeExports.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-[var(--text-tertiary)] mb-2 md:mb-3 font-bold",children:y.challenge}),jsxRuntimeExports.jsx("span",{className:"text-sm leading-relaxed block line-clamp-3",children:Y.problem})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[var(--input-bg)] p-4 md:p-6 rounded-2xl border border-[var(--card-border)]",children:[jsxRuntimeExports.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-[var(--text-tertiary)] mb-2 md:mb-3 font-bold",children:y.solution}),jsxRuntimeExports.jsx("span",{className:"text-sm leading-relaxed block line-clamp-3",children:Y.solution})]})]})]})]},z))})]}),V&&jsxRuntimeExports.jsx(PortfolioModal,{project:V,onClose:()=>a(null),lang:et})]})},BlogView=()=>{const{lang:et}=useStore(settings),o=useMousePosition(),V=UI_TEXT[et].blog;return jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto pt-24 md:pt-32 px-4 md:px-6 pb-32 md:pb-40 animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8 md:mb-16 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-3 tracking-tight",children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] text-base md:text-lg",children:V.subtitle})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6 md:space-y-8",children:BLOG_POSTS[et].map((a,y)=>{const Y=getCategoryTheme(a.category);return jsxRuntimeExports.jsxs("article",{onMouseMove:o,className:"bento-card p-6 md:p-10 rounded-[2rem] md:rounded-[2.5rem] flex flex-col md:flex-row items-start md:items-center gap-6 md:gap-8 cursor-pointer group",style:Y.colors,children:[jsxRuntimeExports.jsxs("div",{className:"h-20 w-20 md:h-28 md:w-28 rounded-3xl bg-[var(--input-bg)] flex-shrink-0 flex flex-col items-center justify-center border border-[var(--card-border)] group-hover:scale-105 transition-all duration-500 group-hover:border-emerald-500/30 group-hover:shadow-[0_0_30px_rgba(52,211,153,0.1)]",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl md:text-3xl font-bold text-[var(--text-primary)] tracking-tighter",children:a.date.split(" ")[1].replace(",","")}),jsxRuntimeExports.jsx("span",{className:"text-[10px] md:text-[11px] uppercase text-[var(--text-secondary)] font-bold tracking-widest mt-1",children:a.date.split(" ")[0]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mb-3",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 rounded-lg border ".concat(Y.text," ").concat(Y.bg," border-current opacity-70"),children:a.category})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-[var(--text-primary)] mb-3 group-hover:text-[var(--text-primary)] transition-colors tracking-tight",children:a.title}),jsxRuntimeExports.jsx("p",{className:"text-[var(--text-secondary)] leading-relaxed text-sm md:text-base font-light",children:a.excerpt})]}),jsxRuntimeExports.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-[var(--input-bg)] text-[var(--text-primary)] flex items-center justify-center group-hover:bg-[var(--text-primary)] group-hover:text-[var(--bg-primary)] transition-all duration-300 transform group-hover:translate-x-2 border border-[var(--card-border)]",children:jsxRuntimeExports.jsx(Icons.ArrowRight,{className:"w-4 h-4 md:w-5 md:h-5"})})]},y)})})]})},ContactView=()=>{const{lang:et}=useStore(settings),o=useMousePosition(),V=UI_TEXT[et].contact,[a,y]=reactExports.useState({name:"",email:"",message:""}),[Y,z]=reactExports.useState("idle"),[nt,O]=reactExports.useState("");reactExports.useEffect(()=>{O("")},[et]);const C=m=>{y(E=>({...E,[m.target.id]:m.target.value})),nt&&O("")},f=()=>a.name.trim()?!a.email.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?V.errors.email:a.message.trim()?null:V.errors.message:V.errors.name,N=async m=>{m.preventDefault();const E=f();if(E){O(E);return}z("submitting"),O("");try{(await fetch("https://formspree.io/f/xzzwknze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?z("success"):(z("error"),O(V.errors.generic))}catch(p){z("error"),O(V.errors.network)}},j=()=>{z("idle"),y({name:"",email:"",message:""})},v=[{icon:Icons.LinkedIn,url:"https://www.linkedin.com/in/bryanvrgsc",label:"LinkedIn",color:"hover:text-[#0077b5] hover:bg-[#0077b5]/10 hover:border-[#0077b5]/30"},{icon:Icons.GitHub,url:"https://github.com/bryanvrgsc",label:"GitHub",color:"hover:text-[#333] dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/10 hover:border-black/20 dark:hover:border-white/20"},{icon:Icons.WhatsApp,url:"https://api.whatsapp.com/send?phone=12533687369",label:"WhatsApp",color:"hover:text-[#25D366] hover:bg-[#25D366]/10 hover:border-[#25D366]/30"},{icon:Icons.Instagram,url:"https://www.instagram.com/bryanvrgsc/",label:"Instagram",color:"hover:text-[#E4405F] hover:bg-[#E4405F]/10 hover:border-[#E4405F]/30"},{icon:Icons.Mail,url:"mailto:bryanvrgsc@gmail.com",label:"Email",color:"hover:text-red-500 hover:bg-red-500/10 hover:border-red-500/30"}];return Y==="success"?jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto pt-24 md:pt-32 px-4 md:px-6 pb-32 md:pb-40 animate-slide-up",children:jsxRuntimeExports.jsxs("div",{onMouseMove:o,className:"bento-card p-8 md:p-12 rounded-[2.5rem] md:rounded-[3.5rem] text-center relative overflow-hidden flex flex-col items-center justify-center min-h-[400px] md:min-h-[500px]",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-emerald-500/5 to-transparent pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(52,211,153,0.5)] animate-pulse",children:jsxRuntimeExports.jsx(Icons.CheckCircle,{className:"w-10 h-10 md:w-12 md:h-12 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-[var(--text-primary)] mb-4 tracking-tight",children:V.successTitle}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-[var(--text-secondary)] mb-10 max-w-md",children:V.successMessage.replace("{name}",a.name)}),jsxRuntimeExports.jsx(LiquidButton,{onClick:j,className:"px-8 py-4 md:px-8 md:py-4 text-base md:text-lg rounded-full",style:{"--card-bg":"rgba(16, 185, 129, 0.15)","--card-border":"rgba(16, 185, 129, 0.5)","--glass-glow":"rgba(16, 185, 129, 0.6)"},children:V.sendAnother})]})}):jsxRuntimeExports.jsx("div",{className:"max-w-5xl mx-auto pt-24 md:pt-32 px-4 md:px-6 pb-32 md:pb-40 animate-slide-up",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-6 items-stretch",children:[jsxRuntimeExports.jsx("div",{className:"flex md:flex-col gap-3 justify-center md:justify-center animate-slide-up",style:{animationDelay:"0.1s"},children:v.map((m,E)=>jsxRuntimeExports.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"p-5 md:p-6 rounded-2xl md:rounded-3xl bg-[var(--card-bg)] backdrop-blur-xl border border-[var(--card-border)] text-[var(--text-secondary)] transition-all duration-300 transform hover:scale-110 shadow-sm ".concat(m.color," flex items-center justify-center"),"aria-label":m.label,children:jsxRuntimeExports.jsx(m.icon,{className:"w-5 h-5 md:w-6 md:h-6"})},E))}),jsxRuntimeExports.jsxs("div",{onMouseMove:o,className:"bento-card p-6 md:p-12 rounded-[2.5rem] md:rounded-[3.5rem] text-center relative overflow-hidden flex-grow",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-blue-500 to-emerald-500 rounded-[2rem] mx-auto mb-6 md:mb-10 shadow-[0_20px_50px_-10px_rgba(16,185,129,0.5)] flex items-center justify-center relative z-10 transform -rotate-6 group-hover:rotate-0 transition-transform duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]",children:jsxRuntimeExports.jsx(Icons.Talk,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-4 md:mb-6 relative z-10 tracking-tight",children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-[var(--text-secondary)] mb-8 md:mb-12 leading-relaxed relative z-10 max-w-xl mx-auto font-light",children:V.subtitle}),jsxRuntimeExports.jsxs("form",{className:"space-y-4 md:space-y-5 text-left mb-8 md:mb-12 relative z-10 max-w-lg mx-auto",onSubmit:N,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-5",children:[jsxRuntimeExports.jsx("div",{className:"relative group",children:jsxRuntimeExports.jsx("input",{id:"name",type:"text",placeholder:V.placeholders.name,value:a.name,onChange:C,disabled:Y==="submitting",className:"w-full bg-[var(--input-bg)] border border-[var(--input-border)] rounded-2xl px-5 py-5 text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:outline-none focus:border-emerald-500/50 focus:bg-[var(--glass-glow)] transition-all text-sm focus:ring-1 focus:ring-emerald-500/50 disabled:opacity-50"})}),jsxRuntimeExports.jsx("div",{className:"relative group",children:jsxRuntimeExports.jsx("input",{id:"email",type:"email",placeholder:V.placeholders.email,value:a.email,onChange:C,disabled:Y==="submitting",className:"w-full bg-[var(--input-bg)] border border-[var(--input-border)] rounded-2xl px-5 py-5 text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:outline-none focus:border-emerald-500/50 focus:bg-[var(--glass-glow)] transition-all text-sm focus:ring-1 focus:ring-emerald-500/50 disabled:opacity-50"})})]}),jsxRuntimeExports.jsx("div",{className:"relative group",children:jsxRuntimeExports.jsx("textarea",{id:"message",placeholder:V.placeholders.message,rows:4,value:a.message,onChange:C,disabled:Y==="submitting",className:"w-full bg-[var(--input-bg)] border border-[var(--input-border)] rounded-2xl px-5 py-5 text-[var(--text-primary)] placeholder:text-[var(--text-secondary)] focus:outline-none focus:border-emerald-500/50 focus:bg-[var(--glass-glow)] transition-all resize-none text-sm focus:ring-1 focus:ring-emerald-500/50 disabled:opacity-50"})}),nt&&jsxRuntimeExports.jsx("div",{className:"text-red-500 text-sm text-center font-medium bg-red-500/10 py-2 rounded-xl border border-red-500/20 animate-pulse",children:nt}),jsxRuntimeExports.jsx(LiquidButton,{type:"submit",className:"w-full py-5 md:py-6 text-lg md:text-xl font-bold tracking-wide rounded-full",style:{"--card-bg":"rgba(16, 185, 129, 0.15)","--card-hover-bg":"rgba(16, 185, 129, 0.25)","--card-border":"rgba(16, 185, 129, 0.5)","--glass-glow":"rgba(16, 185, 129, 0.6)","--highlight-color":"rgba(16, 185, 129, 0.2)"},children:Y==="submitting"?V.button.sending:V.button.default})]}),jsxRuntimeExports.jsx("p",{className:"mt-6 md:mt-8 text-xs text-[var(--text-tertiary)] relative z-10 font-medium uppercase tracking-widest",children:V.responseTime})]})]})})};export{BlogView,ContactView,HomeView,PortfolioView,ServicesView};
